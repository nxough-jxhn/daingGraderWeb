function mv(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function hv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $f={exports:{}},Co={},zf={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),xv=Symbol.for("react.portal"),fv=Symbol.for("react.fragment"),pv=Symbol.for("react.strict_mode"),gv=Symbol.for("react.profiler"),bv=Symbol.for("react.provider"),vv=Symbol.for("react.context"),yv=Symbol.for("react.forward_ref"),jv=Symbol.for("react.suspense"),wv=Symbol.for("react.memo"),Nv=Symbol.for("react.lazy"),qm=Symbol.iterator;function Sv(e){return e===null||typeof e!="object"?null:(e=qm&&e[qm]||e["@@iterator"],typeof e=="function"?e:null)}var Bf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hf=Object.assign,Vf={};function oa(e,t,r){this.props=e,this.context=t,this.refs=Vf,this.updater=r||Bf}oa.prototype.isReactComponent={};oa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wf(){}Wf.prototype=oa.prototype;function Pu(e,t,r){this.props=e,this.context=t,this.refs=Vf,this.updater=r||Bf}var Iu=Pu.prototype=new Wf;Iu.constructor=Pu;Hf(Iu,oa.prototype);Iu.isPureReactComponent=!0;var Gm=Array.isArray,qf=Object.prototype.hasOwnProperty,Tu={current:null},Gf={key:!0,ref:!0,__self:!0,__source:!0};function Kf(e,t,r){var n,a={},l=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)qf.call(t,n)&&!Gf.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:bl,type:e,key:l,ref:i,props:a,_owner:Tu.current}}function kv(e,t){return{$$typeof:bl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Au(e){return typeof e=="object"&&e!==null&&e.$$typeof===bl}function Cv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Km=/\/+/g;function oc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cv(""+e.key):t.toString(36)}function pi(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case bl:case xv:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+oc(i,0):n,Gm(a)?(r="",e!=null&&(r=e.replace(Km,"$&/")+"/"),pi(a,t,r,"",function(d){return d})):a!=null&&(Au(a)&&(a=kv(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Km,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",Gm(e))for(var o=0;o<e.length;o++){l=e[o];var c=n+oc(l,o);i+=pi(l,t,r,c,a)}else if(c=Sv(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=n+oc(l,o++),i+=pi(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Wl(e,t,r){if(e==null)return e;var n=[],a=0;return pi(e,n,"","",function(l){return t.call(r,l,a++)}),n}function _v(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},gi={transition:null},Ev={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:gi,ReactCurrentOwner:Tu};Ne.Children={map:Wl,forEach:function(e,t,r){Wl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Wl(e,function(){t++}),t},toArray:function(e){return Wl(e,function(t){return t})||[]},only:function(e){if(!Au(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=oa;Ne.Fragment=fv;Ne.Profiler=gv;Ne.PureComponent=Pu;Ne.StrictMode=pv;Ne.Suspense=jv;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ev;Ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Hf({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=Tu.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)qf.call(t,c)&&!Gf.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:bl,type:e.type,key:a,ref:l,props:n,_owner:i}};Ne.createContext=function(e){return e={$$typeof:vv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bv,_context:e},e.Consumer=e};Ne.createElement=Kf;Ne.createFactory=function(e){var t=Kf.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:yv,render:e}};Ne.isValidElement=Au;Ne.lazy=function(e){return{$$typeof:Nv,_payload:{_status:-1,_result:e},_init:_v}};Ne.memo=function(e,t){return{$$typeof:wv,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=gi.transition;gi.transition={};try{e()}finally{gi.transition=t}};Ne.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ne.useCallback=function(e,t){return It.current.useCallback(e,t)};Ne.useContext=function(e){return It.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return It.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return It.current.useEffect(e,t)};Ne.useId=function(){return It.current.useId()};Ne.useImperativeHandle=function(e,t,r){return It.current.useImperativeHandle(e,t,r)};Ne.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return It.current.useMemo(e,t)};Ne.useReducer=function(e,t,r){return It.current.useReducer(e,t,r)};Ne.useRef=function(e){return It.current.useRef(e)};Ne.useState=function(e){return It.current.useState(e)};Ne.useSyncExternalStore=function(e,t,r){return It.current.useSyncExternalStore(e,t,r)};Ne.useTransition=function(){return It.current.useTransition()};Ne.version="18.2.0";zf.exports=Ne;var u=zf.exports;const Rs=hv(u),Pv=mv({__proto__:null,default:Rs},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv=u,Tv=Symbol.for("react.element"),Av=Symbol.for("react.fragment"),Lv=Object.prototype.hasOwnProperty,Dv=Iv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rv={key:!0,ref:!0,__self:!0,__source:!0};function Yf(e,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Lv.call(t,n)&&!Rv.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Tv,type:e,key:l,ref:i,props:a,_owner:Dv.current}}Co.Fragment=Av;Co.jsx=Yf;Co.jsxs=Yf;$f.exports=Co;var s=$f.exports,Qf={exports:{}},Kt={},Jf={exports:{}},Xf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,F){var B=C.length;C.push(F);e:for(;0<B;){var Q=B-1>>>1,$=C[Q];if(0<a($,F))C[Q]=F,C[B]=$,B=Q;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var F=C[0],B=C.pop();if(B!==F){C[0]=B;e:for(var Q=0,$=C.length,O=$>>>1;Q<O;){var G=2*(Q+1)-1,H=C[G],V=G+1,K=C[V];if(0>a(H,B))V<$&&0>a(K,H)?(C[Q]=K,C[V]=B,Q=V):(C[Q]=H,C[G]=B,Q=G);else if(V<$&&0>a(K,B))C[Q]=K,C[V]=B,Q=V;else break e}}return F}function a(C,F){var B=C.sortIndex-F.sortIndex;return B!==0?B:C.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],d=[],m=1,f=null,p=3,g=!1,v=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(C){for(var F=r(d);F!==null;){if(F.callback===null)n(d);else if(F.startTime<=C)n(d),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(d)}}function S(C){if(y=!1,x(C),!v)if(r(c)!==null)v=!0,J(E);else{var F=r(d);F!==null&&U(S,F.startTime-C)}}function E(C,F){v=!1,y&&(y=!1,b(D),D=-1),g=!0;var B=p;try{for(x(F),f=r(c);f!==null&&(!(f.expirationTime>F)||C&&!_());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,p=f.priorityLevel;var $=Q(f.expirationTime<=F);F=e.unstable_now(),typeof $=="function"?f.callback=$:f===r(c)&&n(c),x(F)}else n(c);f=r(c)}if(f!==null)var O=!0;else{var G=r(d);G!==null&&U(S,G.startTime-F),O=!1}return O}finally{f=null,p=B,g=!1}}var w=!1,k=null,D=-1,q=5,N=-1;function _(){return!(e.unstable_now()-N<q)}function I(){if(k!==null){var C=e.unstable_now();N=C;var F=!0;try{F=k(!0,C)}finally{F?L():(w=!1,k=null)}}else w=!1}var L;if(typeof h=="function")L=function(){h(I)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,M=z.port2;z.port1.onmessage=I,L=function(){M.postMessage(null)}}else L=function(){j(I,0)};function J(C){k=C,w||(w=!0,L())}function U(C,F){D=j(function(){C(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,J(E))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var B=p;p=F;try{return C()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,F){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var B=p;p=C;try{return F()}finally{p=B}},e.unstable_scheduleCallback=function(C,F,B){var Q=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Q+B:Q):B=Q,C){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=B+$,C={id:m++,callback:F,priorityLevel:C,startTime:B,expirationTime:$,sortIndex:-1},B>Q?(C.sortIndex=B,t(d,C),r(c)===null&&C===r(d)&&(y?(b(D),D=-1):y=!0,U(S,B-Q))):(C.sortIndex=$,t(c,C),v||g||(v=!0,J(E))),C},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(C){var F=p;return function(){var B=p;p=F;try{return C.apply(this,arguments)}finally{p=B}}}})(Xf);Jf.exports=Xf;var Ov=Jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=u,qt=Ov;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ep=new Set,Ga={};function bn(e,t){Jn(e,t),Jn(e+"Capture",t)}function Jn(e,t){for(Ga[e]=t,e=0;e<t.length;e++)ep.add(t[e])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=Object.prototype.hasOwnProperty,Mv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Qm={};function Fv(e){return ld.call(Qm,e)?!0:ld.call(Ym,e)?!1:Mv.test(e)?Qm[e]=!0:(Ym[e]=!0,!1)}function Uv(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $v(e,t,r,n){if(t===null||typeof t>"u"||Uv(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tt(e,t,r,n,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new Tt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new Tt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new Tt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new Tt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new Tt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new Tt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){pt[e]=new Tt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){pt[e]=new Tt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){pt[e]=new Tt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lu=/[\-:]([a-z])/g;function Du(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lu,Du);pt[t]=new Tt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lu,Du);pt[t]=new Tt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lu,Du);pt[t]=new Tt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new Tt(e,1,!1,e.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){pt[e]=new Tt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ru(e,t,r,n){var a=pt.hasOwnProperty(t)?pt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($v(t,r,a,n)&&(r=null),n||a===null?Fv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var rr=Zf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),_n=Symbol.for("react.portal"),En=Symbol.for("react.fragment"),Ou=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),tp=Symbol.for("react.provider"),sp=Symbol.for("react.context"),Mu=Symbol.for("react.forward_ref"),od=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),Fu=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),rp=Symbol.for("react.offscreen"),Jm=Symbol.iterator;function va(e){return e===null||typeof e!="object"?null:(e=Jm&&e[Jm]||e["@@iterator"],typeof e=="function"?e:null)}var Ke=Object.assign,cc;function Ea(e){if(cc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);cc=t&&t[1]||""}return`
`+cc+e}var dc=!1;function uc(e,t){if(!e||dc)return"";dc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{dc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ea(e):""}function zv(e){switch(e.tag){case 5:return Ea(e.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 2:case 15:return e=uc(e.type,!1),e;case 11:return e=uc(e.type.render,!1),e;case 1:return e=uc(e.type,!0),e;default:return""}}function dd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case En:return"Fragment";case _n:return"Portal";case id:return"Profiler";case Ou:return"StrictMode";case od:return"Suspense";case cd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sp:return(e.displayName||"Context")+".Consumer";case tp:return(e._context.displayName||"Context")+".Provider";case Mu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fu:return t=e.displayName||null,t!==null?t:dd(e.type)||"Memo";case fr:t=e._payload,e=e._init;try{return dd(e(t))}catch{}}return null}function Bv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dd(t);case 8:return t===Ou?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function np(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hv(e){var t=np(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gl(e){e._valueTracker||(e._valueTracker=Hv(e))}function ap(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=np(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ud(e,t){var r=t.checked;return Ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xm(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Mr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lp(e,t){t=t.checked,t!=null&&Ru(e,"checked",t,!1)}function md(e,t){lp(e,t);var r=Mr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hd(e,t.type,r):t.hasOwnProperty("defaultValue")&&hd(e,t.type,Mr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zm(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function hd(e,t,r){(t!=="number"||Mi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pa=Array.isArray;function Un(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Mr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function xd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ee(92));if(Pa(r)){if(1<r.length)throw Error(ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Mr(r)}}function ip(e,t){var r=Mr(t.value),n=Mr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function th(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function op(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?op(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kl,cp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kl=Kl||document.createElement("div"),Kl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ka(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vv=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(e){Vv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Da[t]=Da[e]})});function dp(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Da.hasOwnProperty(e)&&Da[e]?(""+t).trim():t+"px"}function up(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=dp(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Wv=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pd(e,t){if(t){if(Wv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function gd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=null;function Uu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vd=null,$n=null,zn=null;function sh(e){if(e=jl(e)){if(typeof vd!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=To(t),vd(e.stateNode,e.type,t))}}function mp(e){$n?zn?zn.push(e):zn=[e]:$n=e}function hp(){if($n){var e=$n,t=zn;if(zn=$n=null,sh(e),t)for(e=0;e<t.length;e++)sh(t[e])}}function xp(e,t){return e(t)}function fp(){}var mc=!1;function pp(e,t,r){if(mc)return e(t,r);mc=!0;try{return xp(e,t,r)}finally{mc=!1,($n!==null||zn!==null)&&(fp(),hp())}}function Ya(e,t){var r=e.stateNode;if(r===null)return null;var n=To(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,t,typeof r));return r}var yd=!1;if(Qs)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){yd=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{yd=!1}function qv(e,t,r,n,a,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(m){this.onError(m)}}var Ra=!1,Fi=null,Ui=!1,jd=null,Gv={onError:function(e){Ra=!0,Fi=e}};function Kv(e,t,r,n,a,l,i,o,c){Ra=!1,Fi=null,qv.apply(Gv,arguments)}function Yv(e,t,r,n,a,l,i,o,c){if(Kv.apply(this,arguments),Ra){if(Ra){var d=Fi;Ra=!1,Fi=null}else throw Error(ee(198));Ui||(Ui=!0,jd=d)}}function vn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rh(e){if(vn(e)!==e)throw Error(ee(188))}function Qv(e){var t=e.alternate;if(!t){if(t=vn(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return rh(a),e;if(l===n)return rh(a),t;l=l.sibling}throw Error(ee(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:t}function bp(e){return e=Qv(e),e!==null?vp(e):null}function vp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vp(e);if(t!==null)return t;e=e.sibling}return null}var yp=qt.unstable_scheduleCallback,nh=qt.unstable_cancelCallback,Jv=qt.unstable_shouldYield,Xv=qt.unstable_requestPaint,Qe=qt.unstable_now,Zv=qt.unstable_getCurrentPriorityLevel,$u=qt.unstable_ImmediatePriority,jp=qt.unstable_UserBlockingPriority,$i=qt.unstable_NormalPriority,ey=qt.unstable_LowPriority,wp=qt.unstable_IdlePriority,_o=null,Is=null;function ty(e){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(_o,e,void 0,(e.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:ny,sy=Math.log,ry=Math.LN2;function ny(e){return e>>>=0,e===0?32:31-(sy(e)/ry|0)|0}var Yl=64,Ql=4194304;function Ia(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=Ia(o):(l&=i,l!==0&&(n=Ia(l)))}else i=r&~a,i!==0?n=Ia(i):l!==0&&(n=Ia(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-xs(t),a=1<<r,n|=e[r],t&=~a;return n}function ay(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ly(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-xs(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=ay(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function wd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Np(){var e=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),e}function hc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xs(t),e[t]=r}function iy(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-xs(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function zu(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xs(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ae=0;function Sp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kp,Bu,Cp,_p,Ep,Nd=!1,Jl=[],kr=null,Cr=null,_r=null,Qa=new Map,Ja=new Map,gr=[],oy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ah(e,t){switch(e){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Qa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(t.pointerId)}}function ja(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=jl(t),t!==null&&Bu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function cy(e,t,r,n,a){switch(t){case"focusin":return kr=ja(kr,e,t,r,n,a),!0;case"dragenter":return Cr=ja(Cr,e,t,r,n,a),!0;case"mouseover":return _r=ja(_r,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return Qa.set(l,ja(Qa.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Ja.set(l,ja(Ja.get(l)||null,e,t,r,n,a)),!0}return!1}function Pp(e){var t=en(e.target);if(t!==null){var r=vn(t);if(r!==null){if(t=r.tag,t===13){if(t=gp(r),t!==null){e.blockedOn=t,Ep(e.priority,function(){Cp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Sd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);bd=n,r.target.dispatchEvent(n),bd=null}else return t=jl(r),t!==null&&Bu(t),e.blockedOn=r,!1;t.shift()}return!0}function lh(e,t,r){bi(e)&&r.delete(t)}function dy(){Nd=!1,kr!==null&&bi(kr)&&(kr=null),Cr!==null&&bi(Cr)&&(Cr=null),_r!==null&&bi(_r)&&(_r=null),Qa.forEach(lh),Ja.forEach(lh)}function wa(e,t){e.blockedOn===t&&(e.blockedOn=null,Nd||(Nd=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,dy)))}function Xa(e){function t(a){return wa(a,e)}if(0<Jl.length){wa(Jl[0],e);for(var r=1;r<Jl.length;r++){var n=Jl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(kr!==null&&wa(kr,e),Cr!==null&&wa(Cr,e),_r!==null&&wa(_r,e),Qa.forEach(t),Ja.forEach(t),r=0;r<gr.length;r++)n=gr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<gr.length&&(r=gr[0],r.blockedOn===null);)Pp(r),r.blockedOn===null&&gr.shift()}var Bn=rr.ReactCurrentBatchConfig,Bi=!0;function uy(e,t,r,n){var a=Ae,l=Bn.transition;Bn.transition=null;try{Ae=1,Hu(e,t,r,n)}finally{Ae=a,Bn.transition=l}}function my(e,t,r,n){var a=Ae,l=Bn.transition;Bn.transition=null;try{Ae=4,Hu(e,t,r,n)}finally{Ae=a,Bn.transition=l}}function Hu(e,t,r,n){if(Bi){var a=Sd(e,t,r,n);if(a===null)Nc(e,t,n,Hi,r),ah(e,n);else if(cy(a,e,t,r,n))n.stopPropagation();else if(ah(e,n),t&4&&-1<oy.indexOf(e)){for(;a!==null;){var l=jl(a);if(l!==null&&kp(l),l=Sd(e,t,r,n),l===null&&Nc(e,t,n,Hi,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else Nc(e,t,n,null,r)}}var Hi=null;function Sd(e,t,r,n){if(Hi=null,e=Uu(n),e=en(e),e!==null)if(t=vn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hi=e,null}function Ip(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zv()){case $u:return 1;case jp:return 4;case $i:case ey:return 16;case wp:return 536870912;default:return 16}default:return 16}}var wr=null,Vu=null,vi=null;function Tp(){if(vi)return vi;var e,t=Vu,r=t.length,n,a="value"in wr?wr.value:wr.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[l-n];n++);return vi=a.slice(e,1<n?1-n:void 0)}function yi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xl(){return!0}function ih(){return!1}function Yt(e){function t(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Xl:ih,this.isPropagationStopped=ih,this}return Ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),t}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wu=Yt(ca),yl=Ke({},ca,{view:0,detail:0}),hy=Yt(yl),xc,fc,Na,Eo=Ke({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Na&&(Na&&e.type==="mousemove"?(xc=e.screenX-Na.screenX,fc=e.screenY-Na.screenY):fc=xc=0,Na=e),xc)},movementY:function(e){return"movementY"in e?e.movementY:fc}}),oh=Yt(Eo),xy=Ke({},Eo,{dataTransfer:0}),fy=Yt(xy),py=Ke({},yl,{relatedTarget:0}),pc=Yt(py),gy=Ke({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),by=Yt(gy),vy=Ke({},ca,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yy=Yt(vy),jy=Ke({},ca,{data:0}),ch=Yt(jy),wy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ny={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ky(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sy[e])?!!t[e]:!1}function qu(){return ky}var Cy=Ke({},yl,{key:function(e){if(e.key){var t=wy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ny[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qu,charCode:function(e){return e.type==="keypress"?yi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_y=Yt(Cy),Ey=Ke({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=Yt(Ey),Py=Ke({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qu}),Iy=Yt(Py),Ty=Ke({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=Yt(Ty),Ly=Ke({},Eo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=Yt(Ly),Ry=[9,13,27,32],Gu=Qs&&"CompositionEvent"in window,Oa=null;Qs&&"documentMode"in document&&(Oa=document.documentMode);var Oy=Qs&&"TextEvent"in window&&!Oa,Ap=Qs&&(!Gu||Oa&&8<Oa&&11>=Oa),uh=" ",mh=!1;function Lp(e,t){switch(e){case"keyup":return Ry.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pn=!1;function My(e,t){switch(e){case"compositionend":return Dp(t);case"keypress":return t.which!==32?null:(mh=!0,uh);case"textInput":return e=t.data,e===uh&&mh?null:e;default:return null}}function Fy(e,t){if(Pn)return e==="compositionend"||!Gu&&Lp(e,t)?(e=Tp(),vi=Vu=wr=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ap&&t.locale!=="ko"?null:t.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uy[e.type]:t==="textarea"}function Rp(e,t,r,n){mp(n),t=Vi(t,"onChange"),0<t.length&&(r=new Wu("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ma=null,Za=null;function $y(e){qp(e,0)}function Po(e){var t=An(e);if(ap(t))return e}function zy(e,t){if(e==="change")return t}var Op=!1;if(Qs){var gc;if(Qs){var bc="oninput"in document;if(!bc){var xh=document.createElement("div");xh.setAttribute("oninput","return;"),bc=typeof xh.oninput=="function"}gc=bc}else gc=!1;Op=gc&&(!document.documentMode||9<document.documentMode)}function fh(){Ma&&(Ma.detachEvent("onpropertychange",Mp),Za=Ma=null)}function Mp(e){if(e.propertyName==="value"&&Po(Za)){var t=[];Rp(t,Za,e,Uu(e)),pp($y,t)}}function By(e,t,r){e==="focusin"?(fh(),Ma=t,Za=r,Ma.attachEvent("onpropertychange",Mp)):e==="focusout"&&fh()}function Hy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Po(Za)}function Vy(e,t){if(e==="click")return Po(t)}function Wy(e,t){if(e==="input"||e==="change")return Po(t)}function qy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:qy;function el(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ld.call(t,a)||!vs(e[a],t[a]))return!1}return!0}function ph(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gh(e,t){var r=ph(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ph(r)}}function Fp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Up(){for(var e=window,t=Mi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Mi(e.document)}return t}function Ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gy(e){var t=Up(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Fp(r.ownerDocument.documentElement,r)){if(n!==null&&Ku(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=gh(r,l);var i=gh(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ky=Qs&&"documentMode"in document&&11>=document.documentMode,In=null,kd=null,Fa=null,Cd=!1;function bh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Cd||In==null||In!==Mi(n)||(n=In,"selectionStart"in n&&Ku(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fa&&el(Fa,n)||(Fa=n,n=Vi(kd,"onSelect"),0<n.length&&(t=new Wu("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=In)))}function Zl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Tn={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},vc={},$p={};Qs&&($p=document.createElement("div").style,"AnimationEvent"in window||(delete Tn.animationend.animation,delete Tn.animationiteration.animation,delete Tn.animationstart.animation),"TransitionEvent"in window||delete Tn.transitionend.transition);function Io(e){if(vc[e])return vc[e];if(!Tn[e])return e;var t=Tn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in $p)return vc[e]=t[r];return e}var zp=Io("animationend"),Bp=Io("animationiteration"),Hp=Io("animationstart"),Vp=Io("transitionend"),Wp=new Map,vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(e,t){Wp.set(e,t),bn(t,[e])}for(var yc=0;yc<vh.length;yc++){var jc=vh[yc],Yy=jc.toLowerCase(),Qy=jc[0].toUpperCase()+jc.slice(1);Hr(Yy,"on"+Qy)}Hr(zp,"onAnimationEnd");Hr(Bp,"onAnimationIteration");Hr(Hp,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(Vp,"onTransitionEnd");Jn("onMouseEnter",["mouseout","mouseover"]);Jn("onMouseLeave",["mouseout","mouseover"]);Jn("onPointerEnter",["pointerout","pointerover"]);Jn("onPointerLeave",["pointerout","pointerover"]);bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function yh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Yv(n,t,void 0,e),e.currentTarget=null}function qp(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;yh(a,o,d),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;yh(a,o,d),l=c}}}if(Ui)throw e=jd,Ui=!1,jd=null,e}function $e(e,t){var r=t[Td];r===void 0&&(r=t[Td]=new Set);var n=e+"__bubble";r.has(n)||(Gp(t,e,2,!1),r.add(n))}function wc(e,t,r){var n=0;t&&(n|=4),Gp(r,e,n,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function tl(e){if(!e[ei]){e[ei]=!0,ep.forEach(function(r){r!=="selectionchange"&&(Jy.has(r)||wc(r,!1,e),wc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,wc("selectionchange",!1,t))}}function Gp(e,t,r,n){switch(Ip(t)){case 1:var a=uy;break;case 4:a=my;break;default:a=Hu}r=a.bind(null,t,r,e),a=void 0,!yd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Nc(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=en(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}pp(function(){var d=l,m=Uu(r),f=[];e:{var p=Wp.get(e);if(p!==void 0){var g=Wu,v=e;switch(e){case"keypress":if(yi(r)===0)break e;case"keydown":case"keyup":g=_y;break;case"focusin":v="focus",g=pc;break;case"focusout":v="blur",g=pc;break;case"beforeblur":case"afterblur":g=pc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=fy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Iy;break;case zp:case Bp:case Hp:g=by;break;case Vp:g=Ay;break;case"scroll":g=hy;break;case"wheel":g=Dy;break;case"copy":case"cut":case"paste":g=yy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=dh}var y=(t&4)!==0,j=!y&&e==="scroll",b=y?p!==null?p+"Capture":null:p;y=[];for(var h=d,x;h!==null;){x=h;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,b!==null&&(S=Ya(h,b),S!=null&&y.push(sl(h,S,x)))),j)break;h=h.return}0<y.length&&(p=new g(p,v,null,r,m),f.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&r!==bd&&(v=r.relatedTarget||r.fromElement)&&(en(v)||v[Js]))break e;if((g||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=d,v=v?en(v):null,v!==null&&(j=vn(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=d),g!==v)){if(y=oh,S="onMouseLeave",b="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(y=dh,S="onPointerLeave",b="onPointerEnter",h="pointer"),j=g==null?p:An(g),x=v==null?p:An(v),p=new y(S,h+"leave",g,r,m),p.target=j,p.relatedTarget=x,S=null,en(m)===d&&(y=new y(b,h+"enter",v,r,m),y.target=x,y.relatedTarget=j,S=y),j=S,g&&v)t:{for(y=g,b=v,h=0,x=y;x;x=kn(x))h++;for(x=0,S=b;S;S=kn(S))x++;for(;0<h-x;)y=kn(y),h--;for(;0<x-h;)b=kn(b),x--;for(;h--;){if(y===b||b!==null&&y===b.alternate)break t;y=kn(y),b=kn(b)}y=null}else y=null;g!==null&&jh(f,p,g,y,!1),v!==null&&j!==null&&jh(f,j,v,y,!0)}}e:{if(p=d?An(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var E=zy;else if(hh(p))if(Op)E=Wy;else{E=Hy;var w=By}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=Vy);if(E&&(E=E(e,d))){Rp(f,E,r,m);break e}w&&w(e,p,d),e==="focusout"&&(w=p._wrapperState)&&w.controlled&&p.type==="number"&&hd(p,"number",p.value)}switch(w=d?An(d):window,e){case"focusin":(hh(w)||w.contentEditable==="true")&&(In=w,kd=d,Fa=null);break;case"focusout":Fa=kd=In=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,bh(f,r,m);break;case"selectionchange":if(Ky)break;case"keydown":case"keyup":bh(f,r,m)}var k;if(Gu)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Pn?Lp(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Ap&&r.locale!=="ko"&&(Pn||D!=="onCompositionStart"?D==="onCompositionEnd"&&Pn&&(k=Tp()):(wr=m,Vu="value"in wr?wr.value:wr.textContent,Pn=!0)),w=Vi(d,D),0<w.length&&(D=new ch(D,e,null,r,m),f.push({event:D,listeners:w}),k?D.data=k:(k=Dp(r),k!==null&&(D.data=k)))),(k=Oy?My(e,r):Fy(e,r))&&(d=Vi(d,"onBeforeInput"),0<d.length&&(m=new ch("onBeforeInput","beforeinput",null,r,m),f.push({event:m,listeners:d}),m.data=k))}qp(f,t)})}function sl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vi(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Ya(e,r),l!=null&&n.unshift(sl(e,l,a)),l=Ya(e,t),l!=null&&n.push(sl(e,l,a))),e=e.return}return n}function kn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jh(e,t,r,n,a){for(var l=t._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=Ya(r,l),c!=null&&i.unshift(sl(r,c,o))):a||(c=Ya(r,l),c!=null&&i.push(sl(r,c,o)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Xy=/\r\n?/g,Zy=/\u0000|\uFFFD/g;function wh(e){return(typeof e=="string"?e:""+e).replace(Xy,`
`).replace(Zy,"")}function ti(e,t,r){if(t=wh(t),wh(e)!==t&&r)throw Error(ee(425))}function Wi(){}var _d=null,Ed=null;function Pd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Id=typeof setTimeout=="function"?setTimeout:void 0,ej=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,tj=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(sj)}:Id;function sj(e){setTimeout(function(){throw e})}function Sc(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Xa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Xa(t)}function Er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),Es="__reactFiber$"+da,rl="__reactProps$"+da,Js="__reactContainer$"+da,Td="__reactEvents$"+da,rj="__reactListeners$"+da,nj="__reactHandles$"+da;function en(e){var t=e[Es];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Js]||r[Es]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Sh(e);e!==null;){if(r=e[Es])return r;e=Sh(e)}return t}e=r,r=e.parentNode}return null}function jl(e){return e=e[Es]||e[Js],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function An(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function To(e){return e[rl]||null}var Ad=[],Ln=-1;function Vr(e){return{current:e}}function ze(e){0>Ln||(e.current=Ad[Ln],Ad[Ln]=null,Ln--)}function Oe(e,t){Ln++,Ad[Ln]=e.current,e.current=t}var Fr={},Nt=Vr(Fr),Ot=Vr(!1),cn=Fr;function Xn(e,t){var r=e.type.contextTypes;if(!r)return Fr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mt(e){return e=e.childContextTypes,e!=null}function qi(){ze(Ot),ze(Nt)}function kh(e,t,r){if(Nt.current!==Fr)throw Error(ee(168));Oe(Nt,t),Oe(Ot,r)}function Kp(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ee(108,Bv(e)||"Unknown",a));return Ke({},r,n)}function Gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fr,cn=Nt.current,Oe(Nt,e),Oe(Ot,Ot.current),!0}function Ch(e,t,r){var n=e.stateNode;if(!n)throw Error(ee(169));r?(e=Kp(e,t,cn),n.__reactInternalMemoizedMergedChildContext=e,ze(Ot),ze(Nt),Oe(Nt,e)):ze(Ot),Oe(Ot,r)}var $s=null,Ao=!1,kc=!1;function Yp(e){$s===null?$s=[e]:$s.push(e)}function aj(e){Ao=!0,Yp(e)}function Wr(){if(!kc&&$s!==null){kc=!0;var e=0,t=Ae;try{var r=$s;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}$s=null,Ao=!1}catch(a){throw $s!==null&&($s=$s.slice(e+1)),yp($u,Wr),a}finally{Ae=t,kc=!1}}return null}var Dn=[],Rn=0,Ki=null,Yi=0,Xt=[],Zt=0,dn=null,Bs=1,Hs="";function Qr(e,t){Dn[Rn++]=Yi,Dn[Rn++]=Ki,Ki=e,Yi=t}function Qp(e,t,r){Xt[Zt++]=Bs,Xt[Zt++]=Hs,Xt[Zt++]=dn,dn=e;var n=Bs;e=Hs;var a=32-xs(n)-1;n&=~(1<<a),r+=1;var l=32-xs(t)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Bs=1<<32-xs(t)+a|r<<a|n,Hs=l+e}else Bs=1<<l|r<<a|n,Hs=e}function Yu(e){e.return!==null&&(Qr(e,1),Qp(e,1,0))}function Qu(e){for(;e===Ki;)Ki=Dn[--Rn],Dn[Rn]=null,Yi=Dn[--Rn],Dn[Rn]=null;for(;e===dn;)dn=Xt[--Zt],Xt[Zt]=null,Hs=Xt[--Zt],Xt[Zt]=null,Bs=Xt[--Zt],Xt[Zt]=null}var Vt=null,Ht=null,He=!1,us=null;function Jp(e,t){var r=ts(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _h(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,Ht=Er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,Ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=dn!==null?{id:Bs,overflow:Hs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ts(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Vt=e,Ht=null,!0):!1;default:return!1}}function Ld(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dd(e){if(He){var t=Ht;if(t){var r=t;if(!_h(e,t)){if(Ld(e))throw Error(ee(418));t=Er(r.nextSibling);var n=Vt;t&&_h(e,t)?Jp(n,r):(e.flags=e.flags&-4097|2,He=!1,Vt=e)}}else{if(Ld(e))throw Error(ee(418));e.flags=e.flags&-4097|2,He=!1,Vt=e}}}function Eh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function si(e){if(e!==Vt)return!1;if(!He)return Eh(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pd(e.type,e.memoizedProps)),t&&(t=Ht)){if(Ld(e))throw Xp(),Error(ee(418));for(;t;)Jp(e,t),t=Er(t.nextSibling)}if(Eh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ht=Er(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ht=null}}else Ht=Vt?Er(e.stateNode.nextSibling):null;return!0}function Xp(){for(var e=Ht;e;)e=Er(e.nextSibling)}function Zn(){Ht=Vt=null,He=!1}function Ju(e){us===null?us=[e]:us.push(e)}var lj=rr.ReactCurrentBatchConfig;function cs(e,t){if(e&&e.defaultProps){t=Ke({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Qi=Vr(null),Ji=null,On=null,Xu=null;function Zu(){Xu=On=Ji=null}function em(e){var t=Qi.current;ze(Qi),e._currentValue=t}function Rd(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Hn(e,t){Ji=e,Xu=On=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function rs(e){var t=e._currentValue;if(Xu!==e)if(e={context:e,memoizedValue:t,next:null},On===null){if(Ji===null)throw Error(ee(308));On=e,Ji.dependencies={lanes:0,firstContext:e}}else On=On.next=e;return t}var tn=null;function tm(e){tn===null?tn=[e]:tn.push(e)}function Zp(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,tm(t)):(r.next=a.next,a.next=r),t.interleaved=r,Xs(e,n)}function Xs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var pr=!1;function sm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function e0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ce&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Xs(e,r)}return a=n.interleaved,a===null?(t.next=t,tm(n)):(t.next=a.next,a.next=t),n.interleaved=t,Xs(e,r)}function ji(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zu(e,r)}}function Ph(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Xi(e,t,r,n){var a=e.updateQueue;pr=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var m=e.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==i&&(o===null?m.firstBaseUpdate=d:o.next=d,m.lastBaseUpdate=c))}if(l!==null){var f=a.baseState;i=0,m=d=c=null,o=l;do{var p=o.lane,g=o.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,y=o;switch(p=t,g=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){f=v.call(g,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break e;f=Ke({},f,p);break e;case 2:pr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else g={eventTime:g,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(d=m=g,c=f):m=m.next=g,i|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(m===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);mn|=i,e.lanes=i,e.memoizedState=f}}function Ih(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ee(191,a));a.call(n)}}}var t0=new Zf.Component().refs;function Od(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ke({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lo={isMounted:function(e){return(e=e._reactInternals)?vn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ct(),a=Tr(e),l=Gs(n,a);l.payload=t,r!=null&&(l.callback=r),t=Pr(e,l,a),t!==null&&(fs(t,e,a,n),ji(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ct(),a=Tr(e),l=Gs(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Pr(e,l,a),t!==null&&(fs(t,e,a,n),ji(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),n=Tr(e),a=Gs(r,n);a.tag=2,t!=null&&(a.callback=t),t=Pr(e,a,n),t!==null&&(fs(t,e,n,r),ji(t,e,n))}};function Th(e,t,r,n,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,i):t.prototype&&t.prototype.isPureReactComponent?!el(r,n)||!el(a,l):!0}function s0(e,t,r){var n=!1,a=Fr,l=t.contextType;return typeof l=="object"&&l!==null?l=rs(l):(a=Mt(t)?cn:Nt.current,n=t.contextTypes,l=(n=n!=null)?Xn(e,a):Fr),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ah(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lo.enqueueReplaceState(t,t.state,null)}function Md(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=t0,sm(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=rs(l):(l=Mt(t)?cn:Nt.current,a.context=Xn(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Od(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Lo.enqueueReplaceState(a,a.state,null),Xi(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Sa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;o===t0&&(o=a.refs={}),i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,e))}return e}function ri(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lh(e){var t=e._init;return t(e._payload)}function r0(e){function t(b,h){if(e){var x=b.deletions;x===null?(b.deletions=[h],b.flags|=16):x.push(h)}}function r(b,h){if(!e)return null;for(;h!==null;)t(b,h),h=h.sibling;return null}function n(b,h){for(b=new Map;h!==null;)h.key!==null?b.set(h.key,h):b.set(h.index,h),h=h.sibling;return b}function a(b,h){return b=Ar(b,h),b.index=0,b.sibling=null,b}function l(b,h,x){return b.index=x,e?(x=b.alternate,x!==null?(x=x.index,x<h?(b.flags|=2,h):x):(b.flags|=2,h)):(b.flags|=1048576,h)}function i(b){return e&&b.alternate===null&&(b.flags|=2),b}function o(b,h,x,S){return h===null||h.tag!==6?(h=Ac(x,b.mode,S),h.return=b,h):(h=a(h,x),h.return=b,h)}function c(b,h,x,S){var E=x.type;return E===En?m(b,h,x.props.children,S,x.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===fr&&Lh(E)===h.type)?(S=a(h,x.props),S.ref=Sa(b,h,x),S.return=b,S):(S=_i(x.type,x.key,x.props,null,b.mode,S),S.ref=Sa(b,h,x),S.return=b,S)}function d(b,h,x,S){return h===null||h.tag!==4||h.stateNode.containerInfo!==x.containerInfo||h.stateNode.implementation!==x.implementation?(h=Lc(x,b.mode,S),h.return=b,h):(h=a(h,x.children||[]),h.return=b,h)}function m(b,h,x,S,E){return h===null||h.tag!==7?(h=ln(x,b.mode,S,E),h.return=b,h):(h=a(h,x),h.return=b,h)}function f(b,h,x){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Ac(""+h,b.mode,x),h.return=b,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ql:return x=_i(h.type,h.key,h.props,null,b.mode,x),x.ref=Sa(b,null,h),x.return=b,x;case _n:return h=Lc(h,b.mode,x),h.return=b,h;case fr:var S=h._init;return f(b,S(h._payload),x)}if(Pa(h)||va(h))return h=ln(h,b.mode,x,null),h.return=b,h;ri(b,h)}return null}function p(b,h,x,S){var E=h!==null?h.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:o(b,h,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ql:return x.key===E?c(b,h,x,S):null;case _n:return x.key===E?d(b,h,x,S):null;case fr:return E=x._init,p(b,h,E(x._payload),S)}if(Pa(x)||va(x))return E!==null?null:m(b,h,x,S,null);ri(b,x)}return null}function g(b,h,x,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(x)||null,o(h,b,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ql:return b=b.get(S.key===null?x:S.key)||null,c(h,b,S,E);case _n:return b=b.get(S.key===null?x:S.key)||null,d(h,b,S,E);case fr:var w=S._init;return g(b,h,x,w(S._payload),E)}if(Pa(S)||va(S))return b=b.get(x)||null,m(h,b,S,E,null);ri(h,S)}return null}function v(b,h,x,S){for(var E=null,w=null,k=h,D=h=0,q=null;k!==null&&D<x.length;D++){k.index>D?(q=k,k=null):q=k.sibling;var N=p(b,k,x[D],S);if(N===null){k===null&&(k=q);break}e&&k&&N.alternate===null&&t(b,k),h=l(N,h,D),w===null?E=N:w.sibling=N,w=N,k=q}if(D===x.length)return r(b,k),He&&Qr(b,D),E;if(k===null){for(;D<x.length;D++)k=f(b,x[D],S),k!==null&&(h=l(k,h,D),w===null?E=k:w.sibling=k,w=k);return He&&Qr(b,D),E}for(k=n(b,k);D<x.length;D++)q=g(k,b,D,x[D],S),q!==null&&(e&&q.alternate!==null&&k.delete(q.key===null?D:q.key),h=l(q,h,D),w===null?E=q:w.sibling=q,w=q);return e&&k.forEach(function(_){return t(b,_)}),He&&Qr(b,D),E}function y(b,h,x,S){var E=va(x);if(typeof E!="function")throw Error(ee(150));if(x=E.call(x),x==null)throw Error(ee(151));for(var w=E=null,k=h,D=h=0,q=null,N=x.next();k!==null&&!N.done;D++,N=x.next()){k.index>D?(q=k,k=null):q=k.sibling;var _=p(b,k,N.value,S);if(_===null){k===null&&(k=q);break}e&&k&&_.alternate===null&&t(b,k),h=l(_,h,D),w===null?E=_:w.sibling=_,w=_,k=q}if(N.done)return r(b,k),He&&Qr(b,D),E;if(k===null){for(;!N.done;D++,N=x.next())N=f(b,N.value,S),N!==null&&(h=l(N,h,D),w===null?E=N:w.sibling=N,w=N);return He&&Qr(b,D),E}for(k=n(b,k);!N.done;D++,N=x.next())N=g(k,b,D,N.value,S),N!==null&&(e&&N.alternate!==null&&k.delete(N.key===null?D:N.key),h=l(N,h,D),w===null?E=N:w.sibling=N,w=N);return e&&k.forEach(function(I){return t(b,I)}),He&&Qr(b,D),E}function j(b,h,x,S){if(typeof x=="object"&&x!==null&&x.type===En&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ql:e:{for(var E=x.key,w=h;w!==null;){if(w.key===E){if(E=x.type,E===En){if(w.tag===7){r(b,w.sibling),h=a(w,x.props.children),h.return=b,b=h;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===fr&&Lh(E)===w.type){r(b,w.sibling),h=a(w,x.props),h.ref=Sa(b,w,x),h.return=b,b=h;break e}r(b,w);break}else t(b,w);w=w.sibling}x.type===En?(h=ln(x.props.children,b.mode,S,x.key),h.return=b,b=h):(S=_i(x.type,x.key,x.props,null,b.mode,S),S.ref=Sa(b,h,x),S.return=b,b=S)}return i(b);case _n:e:{for(w=x.key;h!==null;){if(h.key===w)if(h.tag===4&&h.stateNode.containerInfo===x.containerInfo&&h.stateNode.implementation===x.implementation){r(b,h.sibling),h=a(h,x.children||[]),h.return=b,b=h;break e}else{r(b,h);break}else t(b,h);h=h.sibling}h=Lc(x,b.mode,S),h.return=b,b=h}return i(b);case fr:return w=x._init,j(b,h,w(x._payload),S)}if(Pa(x))return v(b,h,x,S);if(va(x))return y(b,h,x,S);ri(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,h!==null&&h.tag===6?(r(b,h.sibling),h=a(h,x),h.return=b,b=h):(r(b,h),h=Ac(x,b.mode,S),h.return=b,b=h),i(b)):r(b,h)}return j}var ea=r0(!0),n0=r0(!1),wl={},Ts=Vr(wl),nl=Vr(wl),al=Vr(wl);function sn(e){if(e===wl)throw Error(ee(174));return e}function rm(e,t){switch(Oe(al,t),Oe(nl,e),Oe(Ts,wl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fd(t,e)}ze(Ts),Oe(Ts,t)}function ta(){ze(Ts),ze(nl),ze(al)}function a0(e){sn(al.current);var t=sn(Ts.current),r=fd(t,e.type);t!==r&&(Oe(nl,e),Oe(Ts,r))}function nm(e){nl.current===e&&(ze(Ts),ze(nl))}var We=Vr(0);function Zi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cc=[];function am(){for(var e=0;e<Cc.length;e++)Cc[e]._workInProgressVersionPrimary=null;Cc.length=0}var wi=rr.ReactCurrentDispatcher,_c=rr.ReactCurrentBatchConfig,un=0,qe=null,nt=null,ot=null,eo=!1,Ua=!1,ll=0,ij=0;function vt(){throw Error(ee(321))}function lm(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vs(e[r],t[r]))return!1;return!0}function im(e,t,r,n,a,l){if(un=l,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wi.current=e===null||e.memoizedState===null?uj:mj,e=r(n,a),Ua){l=0;do{if(Ua=!1,ll=0,25<=l)throw Error(ee(301));l+=1,ot=nt=null,t.updateQueue=null,wi.current=hj,e=r(n,a)}while(Ua)}if(wi.current=to,t=nt!==null&&nt.next!==null,un=0,ot=nt=qe=null,eo=!1,t)throw Error(ee(300));return e}function om(){var e=ll!==0;return ll=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?qe.memoizedState=ot=e:ot=ot.next=e,ot}function ns(){if(nt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=ot===null?qe.memoizedState:ot.next;if(t!==null)ot=t,nt=e;else{if(e===null)throw Error(ee(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?qe.memoizedState=ot=e:ot=ot.next=e}return ot}function il(e,t){return typeof t=="function"?t(e):t}function Ec(e){var t=ns(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=nt,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,d=l;do{var m=d.lane;if((un&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=f,i=n):c=c.next=f,qe.lanes|=m,mn|=m}d=d.next}while(d!==null&&d!==l);c===null?i=n:c.next=o,vs(n,t.memoizedState)||(Rt=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,qe.lanes|=l,mn|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Pc(e){var t=ns(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);vs(l,t.memoizedState)||(Rt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function l0(){}function i0(e,t){var r=qe,n=ns(),a=t(),l=!vs(n.memoizedState,a);if(l&&(n.memoizedState=a,Rt=!0),n=n.queue,cm(d0.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||ot!==null&&ot.memoizedState.tag&1){if(r.flags|=2048,ol(9,c0.bind(null,r,n,a,t),void 0,null),ut===null)throw Error(ee(349));un&30||o0(r,t,a)}return a}function o0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function c0(e,t,r,n){t.value=r,t.getSnapshot=n,u0(t)&&m0(e)}function d0(e,t,r){return r(function(){u0(t)&&m0(e)})}function u0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!vs(e,r)}catch{return!0}}function m0(e){var t=Xs(e,1);t!==null&&fs(t,e,1,-1)}function Dh(e){var t=_s();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:e},t.queue=e,e=e.dispatch=dj.bind(null,qe,e),[t.memoizedState,e]}function ol(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=qe.updateQueue,t===null?(t={lastEffect:null,stores:null},qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function h0(){return ns().memoizedState}function Ni(e,t,r,n){var a=_s();qe.flags|=e,a.memoizedState=ol(1|t,r,void 0,n===void 0?null:n)}function Do(e,t,r,n){var a=ns();n=n===void 0?null:n;var l=void 0;if(nt!==null){var i=nt.memoizedState;if(l=i.destroy,n!==null&&lm(n,i.deps)){a.memoizedState=ol(t,r,l,n);return}}qe.flags|=e,a.memoizedState=ol(1|t,r,l,n)}function Rh(e,t){return Ni(8390656,8,e,t)}function cm(e,t){return Do(2048,8,e,t)}function x0(e,t){return Do(4,2,e,t)}function f0(e,t){return Do(4,4,e,t)}function p0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function g0(e,t,r){return r=r!=null?r.concat([e]):null,Do(4,4,p0.bind(null,t,e),r)}function dm(){}function b0(e,t){var r=ns();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&lm(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function v0(e,t){var r=ns();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&lm(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function y0(e,t,r){return un&21?(vs(r,t)||(r=Np(),qe.lanes|=r,mn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=r)}function oj(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=_c.transition;_c.transition={};try{e(!1),t()}finally{Ae=r,_c.transition=n}}function j0(){return ns().memoizedState}function cj(e,t,r){var n=Tr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},w0(e))N0(t,r);else if(r=Zp(e,t,r,n),r!==null){var a=Ct();fs(r,e,n,a),S0(r,t,n)}}function dj(e,t,r){var n=Tr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(w0(e))N0(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,vs(o,i)){var c=t.interleaved;c===null?(a.next=a,tm(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Zp(e,t,a,n),r!==null&&(a=Ct(),fs(r,e,n,a),S0(r,t,n))}}function w0(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function N0(e,t){Ua=eo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function S0(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zu(e,r)}}var to={readContext:rs,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},uj={readContext:rs,useCallback:function(e,t){return _s().memoizedState=[e,t===void 0?null:t],e},useContext:rs,useEffect:Rh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ni(4194308,4,p0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ni(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ni(4,2,e,t)},useMemo:function(e,t){var r=_s();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=_s();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=cj.bind(null,qe,e),[n.memoizedState,e]},useRef:function(e){var t=_s();return e={current:e},t.memoizedState=e},useState:Dh,useDebugValue:dm,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=Dh(!1),t=e[0];return e=oj.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=qe,a=_s();if(He){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=t(),ut===null)throw Error(ee(349));un&30||o0(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,Rh(d0.bind(null,n,l,e),[e]),n.flags|=2048,ol(9,c0.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=_s(),t=ut.identifierPrefix;if(He){var r=Hs,n=Bs;r=(n&~(1<<32-xs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ll++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ij++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mj={readContext:rs,useCallback:b0,useContext:rs,useEffect:cm,useImperativeHandle:g0,useInsertionEffect:x0,useLayoutEffect:f0,useMemo:v0,useReducer:Ec,useRef:h0,useState:function(){return Ec(il)},useDebugValue:dm,useDeferredValue:function(e){var t=ns();return y0(t,nt.memoizedState,e)},useTransition:function(){var e=Ec(il)[0],t=ns().memoizedState;return[e,t]},useMutableSource:l0,useSyncExternalStore:i0,useId:j0,unstable_isNewReconciler:!1},hj={readContext:rs,useCallback:b0,useContext:rs,useEffect:cm,useImperativeHandle:g0,useInsertionEffect:x0,useLayoutEffect:f0,useMemo:v0,useReducer:Pc,useRef:h0,useState:function(){return Pc(il)},useDebugValue:dm,useDeferredValue:function(e){var t=ns();return nt===null?t.memoizedState=e:y0(t,nt.memoizedState,e)},useTransition:function(){var e=Pc(il)[0],t=ns().memoizedState;return[e,t]},useMutableSource:l0,useSyncExternalStore:i0,useId:j0,unstable_isNewReconciler:!1};function sa(e,t){try{var r="",n=t;do r+=zv(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Ic(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Fd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xj=typeof WeakMap=="function"?WeakMap:Map;function k0(e,t,r){r=Gs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ro||(ro=!0,Kd=n),Fd(e,t)},r}function C0(e,t,r){r=Gs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Fd(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Fd(e,t),typeof n!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Oh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new xj;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Ej.bind(null,e,t,r),t.then(e,e))}function Mh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fh(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gs(-1,1),t.tag=2,Pr(r,t,1))),r.lanes|=1),e)}var fj=rr.ReactCurrentOwner,Rt=!1;function St(e,t,r,n){t.child=e===null?n0(t,null,r,n):ea(t,e.child,r,n)}function Uh(e,t,r,n,a){r=r.render;var l=t.ref;return Hn(t,a),n=im(e,t,r,n,l,a),r=om(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zs(e,t,a)):(He&&r&&Yu(t),t.flags|=1,St(e,t,n,a),t.child)}function $h(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!bm(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,_0(e,t,l,n,a)):(e=_i(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:el,r(i,n)&&e.ref===t.ref)return Zs(e,t,a)}return t.flags|=1,e=Ar(l,n),e.ref=t.ref,e.return=t,t.child=e}function _0(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(el(l,n)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Zs(e,t,a)}return Ud(e,t,r,n,a)}function E0(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Fn,Bt),Bt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(Fn,Bt),Bt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Oe(Fn,Bt),Bt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,Oe(Fn,Bt),Bt|=n;return St(e,t,a,r),t.child}function P0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ud(e,t,r,n,a){var l=Mt(r)?cn:Nt.current;return l=Xn(t,l),Hn(t,a),r=im(e,t,r,n,l,a),n=om(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zs(e,t,a)):(He&&n&&Yu(t),t.flags|=1,St(e,t,r,a),t.child)}function zh(e,t,r,n,a){if(Mt(r)){var l=!0;Gi(t)}else l=!1;if(Hn(t,a),t.stateNode===null)Si(e,t),s0(t,r,n),Md(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=rs(d):(d=Mt(r)?cn:Nt.current,d=Xn(t,d));var m=r.getDerivedStateFromProps,f=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==d)&&Ah(t,i,n,d),pr=!1;var p=t.memoizedState;i.state=p,Xi(t,n,i,a),c=t.memoizedState,o!==n||p!==c||Ot.current||pr?(typeof m=="function"&&(Od(t,r,m,n),c=t.memoizedState),(o=pr||Th(t,r,o,n,p,c,d))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,e0(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:cs(t.type,o),i.props=d,f=t.pendingProps,p=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=rs(c):(c=Mt(r)?cn:Nt.current,c=Xn(t,c));var g=r.getDerivedStateFromProps;(m=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==f||p!==c)&&Ah(t,i,n,c),pr=!1,p=t.memoizedState,i.state=p,Xi(t,n,i,a);var v=t.memoizedState;o!==f||p!==v||Ot.current||pr?(typeof g=="function"&&(Od(t,r,g,n),v=t.memoizedState),(d=pr||Th(t,r,d,n,p,v,c)||!1)?(m||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),i.props=n,i.state=v,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return $d(e,t,r,n,l,a)}function $d(e,t,r,n,a,l){P0(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Ch(t,r,!1),Zs(e,t,l);n=t.stateNode,fj.current=t;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=ea(t,e.child,null,l),t.child=ea(t,null,o,l)):St(e,t,o,l),t.memoizedState=n.state,a&&Ch(t,r,!0),t.child}function I0(e){var t=e.stateNode;t.pendingContext?kh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&kh(e,t.context,!1),rm(e,t.containerInfo)}function Bh(e,t,r,n,a){return Zn(),Ju(a),t.flags|=256,St(e,t,r,n),t.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Bd(e){return{baseLanes:e,cachePool:null,transitions:null}}function T0(e,t,r){var n=t.pendingProps,a=We.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Oe(We,a&1),e===null)return Dd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,l?(n=t.mode,l=t.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Mo(i,n,0,null),e=ln(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Bd(r),t.memoizedState=zd,e):um(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return pj(e,t,i,n,o,a,r);if(l){l=n.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ar(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Ar(o,l):(l=ln(l,i,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,i=e.child.memoizedState,i=i===null?Bd(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~r,t.memoizedState=zd,n}return l=e.child,e=l.sibling,n=Ar(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function um(e,t){return t=Mo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ni(e,t,r,n){return n!==null&&Ju(n),ea(t,e.child,null,r),e=um(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pj(e,t,r,n,a,l,i){if(r)return t.flags&256?(t.flags&=-257,n=Ic(Error(ee(422))),ni(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Mo({mode:"visible",children:n.children},a,0,null),l=ln(l,a,i,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&ea(t,e.child,null,i),t.child.memoizedState=Bd(i),t.memoizedState=zd,l);if(!(t.mode&1))return ni(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(ee(419)),n=Ic(l,n,void 0),ni(e,t,i,n)}if(o=(i&e.childLanes)!==0,Rt||o){if(n=ut,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Xs(e,a),fs(n,e,a,-1))}return gm(),n=Ic(Error(ee(421))),ni(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Pj.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ht=Er(a.nextSibling),Vt=t,He=!0,us=null,e!==null&&(Xt[Zt++]=Bs,Xt[Zt++]=Hs,Xt[Zt++]=dn,Bs=e.id,Hs=e.overflow,dn=t),t=um(t,n.children),t.flags|=4096,t)}function Hh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Rd(e.return,t,r)}function Tc(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function A0(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(St(e,t,n.children,r),n=We.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hh(e,r,t);else if(e.tag===19)Hh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Oe(We,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Zi(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Tc(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Zi(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Tc(t,!0,r,null,l);break;case"together":Tc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Si(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,r=Ar(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ar(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gj(e,t,r){switch(t.tag){case 3:I0(t),Zn();break;case 5:a0(t);break;case 1:Mt(t.type)&&Gi(t);break;case 4:rm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Oe(Qi,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Oe(We,We.current&1),t.flags|=128,null):r&t.child.childLanes?T0(e,t,r):(Oe(We,We.current&1),e=Zs(e,t,r),e!==null?e.sibling:null);Oe(We,We.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return A0(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oe(We,We.current),n)break;return null;case 22:case 23:return t.lanes=0,E0(e,t,r)}return Zs(e,t,r)}var L0,Hd,D0,R0;L0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Hd=function(){};D0=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,sn(Ts.current);var l=null;switch(r){case"input":a=ud(e,a),n=ud(e,n),l=[];break;case"select":a=Ke({},a,{value:void 0}),n=Ke({},n,{value:void 0}),l=[];break;case"textarea":a=xd(e,a),n=xd(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Wi)}pd(r,n);var i;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ga.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ga.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&$e("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};R0=function(e,t,r,n){r!==n&&(t.flags|=4)};function ka(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function bj(e,t,r){var n=t.pendingProps;switch(Qu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return Mt(t.type)&&qi(),yt(t),null;case 3:return n=t.stateNode,ta(),ze(Ot),ze(Nt),am(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(si(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,us!==null&&(Jd(us),us=null))),Hd(e,t),yt(t),null;case 5:nm(t);var a=sn(al.current);if(r=t.type,e!==null&&t.stateNode!=null)D0(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ee(166));return yt(t),null}if(e=sn(Ts.current),si(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Es]=t,n[rl]=l,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(a=0;a<Ta.length;a++)$e(Ta[a],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":Xm(n,l),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},$e("invalid",n);break;case"textarea":eh(n,l),$e("invalid",n)}pd(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&ti(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&ti(n.textContent,o,e),a=["children",""+o]):Ga.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&$e("scroll",n)}switch(r){case"input":Gl(n),Zm(n,l,!0);break;case"textarea":Gl(n),th(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Wi)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=op(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[Es]=t,e[rl]=n,L0(e,t,!1,!1),t.stateNode=e;e:{switch(i=gd(r,n),r){case"dialog":$e("cancel",e),$e("close",e),a=n;break;case"iframe":case"object":case"embed":$e("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ta.length;a++)$e(Ta[a],e);a=n;break;case"source":$e("error",e),a=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),a=n;break;case"details":$e("toggle",e),a=n;break;case"input":Xm(e,n),a=ud(e,n),$e("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ke({},n,{value:void 0}),$e("invalid",e);break;case"textarea":eh(e,n),a=xd(e,n),$e("invalid",e);break;default:a=n}pd(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?up(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cp(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ka(e,c):typeof c=="number"&&Ka(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ga.hasOwnProperty(l)?c!=null&&l==="onScroll"&&$e("scroll",e):c!=null&&Ru(e,l,c,i))}switch(r){case"input":Gl(e),Zm(e,n,!1);break;case"textarea":Gl(e),th(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Mr(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Un(e,!!n.multiple,l,!1):n.defaultValue!=null&&Un(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Wi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yt(t),null;case 6:if(e&&t.stateNode!=null)R0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ee(166));if(r=sn(al.current),sn(Ts.current),si(t)){if(n=t.stateNode,r=t.memoizedProps,n[Es]=t,(l=n.nodeValue!==r)&&(e=Vt,e!==null))switch(e.tag){case 3:ti(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ti(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Es]=t,t.stateNode=n}return yt(t),null;case 13:if(ze(We),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&Ht!==null&&t.mode&1&&!(t.flags&128))Xp(),Zn(),t.flags|=98560,l=!1;else if(l=si(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(ee(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ee(317));l[Es]=t}else Zn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yt(t),l=!1}else us!==null&&(Jd(us),us=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||We.current&1?at===0&&(at=3):gm())),t.updateQueue!==null&&(t.flags|=4),yt(t),null);case 4:return ta(),Hd(e,t),e===null&&tl(t.stateNode.containerInfo),yt(t),null;case 10:return em(t.type._context),yt(t),null;case 17:return Mt(t.type)&&qi(),yt(t),null;case 19:if(ze(We),l=t.memoizedState,l===null)return yt(t),null;if(n=(t.flags&128)!==0,i=l.rendering,i===null)if(n)ka(l,!1);else{if(at!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Zi(e),i!==null){for(t.flags|=128,ka(l,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Oe(We,We.current&1|2),t.child}e=e.sibling}l.tail!==null&&Qe()>ra&&(t.flags|=128,n=!0,ka(l,!1),t.lanes=4194304)}else{if(!n)if(e=Zi(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ka(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!He)return yt(t),null}else 2*Qe()-l.renderingStartTime>ra&&r!==1073741824&&(t.flags|=128,n=!0,ka(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(r=l.last,r!==null?r.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,r=We.current,Oe(We,n?r&1|2:r&1),t):(yt(t),null);case 22:case 23:return pm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Bt&1073741824&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function vj(e,t){switch(Qu(t),t.tag){case 1:return Mt(t.type)&&qi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ta(),ze(Ot),ze(Nt),am(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nm(t),null;case 13:if(ze(We),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Zn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(We),null;case 4:return ta(),null;case 10:return em(t.type._context),null;case 22:case 23:return pm(),null;case 24:return null;default:return null}}var ai=!1,jt=!1,yj=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Mn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ye(e,t,n)}else r.current=null}function Vd(e,t,r){try{r()}catch(n){Ye(e,t,n)}}var Vh=!1;function jj(e,t){if(_d=Bi,e=Up(),Ku(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,d=0,m=0,f=e,p=null;t:for(;;){for(var g;f!==r||a!==0&&f.nodeType!==3||(o=i+a),f!==l||n!==0&&f.nodeType!==3||(c=i+n),f.nodeType===3&&(i+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===e)break t;if(p===r&&++d===a&&(o=i),p===l&&++m===n&&(c=i),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ed={focusedElem:e,selectionRange:r},Bi=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,j=v.memoizedState,b=t.stateNode,h=b.getSnapshotBeforeUpdate(t.elementType===t.type?y:cs(t.type,y),j);b.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(S){Ye(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return v=Vh,Vh=!1,v}function $a(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Vd(t,r,l)}a=a.next}while(a!==n)}}function Ro(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Wd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function O0(e){var t=e.alternate;t!==null&&(e.alternate=null,O0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Es],delete t[rl],delete t[Td],delete t[rj],delete t[nj])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function M0(e){return e.tag===5||e.tag===3||e.tag===4}function Wh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||M0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Wi));else if(n!==4&&(e=e.child,e!==null))for(qd(e,t,r),e=e.sibling;e!==null;)qd(e,t,r),e=e.sibling}function Gd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Gd(e,t,r),e=e.sibling;e!==null;)Gd(e,t,r),e=e.sibling}var xt=null,ds=!1;function ur(e,t,r){for(r=r.child;r!==null;)F0(e,t,r),r=r.sibling}function F0(e,t,r){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(_o,r)}catch{}switch(r.tag){case 5:jt||Mn(r,t);case 6:var n=xt,a=ds;xt=null,ur(e,t,r),xt=n,ds=a,xt!==null&&(ds?(e=xt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):xt.removeChild(r.stateNode));break;case 18:xt!==null&&(ds?(e=xt,r=r.stateNode,e.nodeType===8?Sc(e.parentNode,r):e.nodeType===1&&Sc(e,r),Xa(e)):Sc(xt,r.stateNode));break;case 4:n=xt,a=ds,xt=r.stateNode.containerInfo,ds=!0,ur(e,t,r),xt=n,ds=a;break;case 0:case 11:case 14:case 15:if(!jt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Vd(r,t,i),a=a.next}while(a!==n)}ur(e,t,r);break;case 1:if(!jt&&(Mn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Ye(r,t,o)}ur(e,t,r);break;case 21:ur(e,t,r);break;case 22:r.mode&1?(jt=(n=jt)||r.memoizedState!==null,ur(e,t,r),jt=n):ur(e,t,r);break;default:ur(e,t,r)}}function qh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new yj),t.forEach(function(n){var a=Ij.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function os(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:xt=o.stateNode,ds=!1;break e;case 3:xt=o.stateNode.containerInfo,ds=!0;break e;case 4:xt=o.stateNode.containerInfo,ds=!0;break e}o=o.return}if(xt===null)throw Error(ee(160));F0(l,i,a),xt=null,ds=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ye(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)U0(t,e),t=t.sibling}function U0(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(os(t,e),Ss(e),n&4){try{$a(3,e,e.return),Ro(3,e)}catch(y){Ye(e,e.return,y)}try{$a(5,e,e.return)}catch(y){Ye(e,e.return,y)}}break;case 1:os(t,e),Ss(e),n&512&&r!==null&&Mn(r,r.return);break;case 5:if(os(t,e),Ss(e),n&512&&r!==null&&Mn(r,r.return),e.flags&32){var a=e.stateNode;try{Ka(a,"")}catch(y){Ye(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=r!==null?r.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&lp(a,l),gd(o,i);var d=gd(o,l);for(i=0;i<c.length;i+=2){var m=c[i],f=c[i+1];m==="style"?up(a,f):m==="dangerouslySetInnerHTML"?cp(a,f):m==="children"?Ka(a,f):Ru(a,m,f,d)}switch(o){case"input":md(a,l);break;case"textarea":ip(a,l);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var g=l.value;g!=null?Un(a,!!l.multiple,g,!1):p!==!!l.multiple&&(l.defaultValue!=null?Un(a,!!l.multiple,l.defaultValue,!0):Un(a,!!l.multiple,l.multiple?[]:"",!1))}a[rl]=l}catch(y){Ye(e,e.return,y)}}break;case 6:if(os(t,e),Ss(e),n&4){if(e.stateNode===null)throw Error(ee(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){Ye(e,e.return,y)}}break;case 3:if(os(t,e),Ss(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xa(t.containerInfo)}catch(y){Ye(e,e.return,y)}break;case 4:os(t,e),Ss(e);break;case 13:os(t,e),Ss(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(xm=Qe())),n&4&&qh(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(jt=(d=jt)||m,os(t,e),jt=d):os(t,e),Ss(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(ne=e,m=e.child;m!==null;){for(f=ne=m;ne!==null;){switch(p=ne,g=p.child,p.tag){case 0:case 11:case 14:case 15:$a(4,p,p.return);break;case 1:Mn(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ye(n,r,y)}}break;case 5:Mn(p,p.return);break;case 22:if(p.memoizedState!==null){Kh(f);continue}}g!==null?(g.return=p,ne=g):Kh(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{a=f.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=dp("display",i))}catch(y){Ye(e,e.return,y)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Ye(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:os(t,e),Ss(e),n&4&&qh(e);break;case 21:break;default:os(t,e),Ss(e)}}function Ss(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(M0(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ka(a,""),n.flags&=-33);var l=Wh(e);Gd(e,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=Wh(e);qd(e,o,i);break;default:throw Error(ee(161))}}catch(c){Ye(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wj(e,t,r){ne=e,$0(e)}function $0(e,t,r){for(var n=(e.mode&1)!==0;ne!==null;){var a=ne,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||ai;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||jt;o=ai;var d=jt;if(ai=i,(jt=c)&&!d)for(ne=a;ne!==null;)i=ne,c=i.child,i.tag===22&&i.memoizedState!==null?Yh(a):c!==null?(c.return=i,ne=c):Yh(a);for(;l!==null;)ne=l,$0(l),l=l.sibling;ne=a,ai=o,jt=d}Gh(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ne=l):Gh(e)}}function Gh(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jt||Ro(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!jt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:cs(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ih(t,l,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ih(t,i,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&Xa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}jt||t.flags&512&&Wd(t)}catch(p){Ye(t,t.return,p)}}if(t===e){ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Kh(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ne=r;break}ne=t.return}}function Yh(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ro(4,t)}catch(c){Ye(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ye(t,a,c)}}var l=t.return;try{Wd(t)}catch(c){Ye(t,l,c)}break;case 5:var i=t.return;try{Wd(t)}catch(c){Ye(t,i,c)}}}catch(c){Ye(t,t.return,c)}if(t===e){ne=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ne=o;break}ne=t.return}}var Nj=Math.ceil,so=rr.ReactCurrentDispatcher,mm=rr.ReactCurrentOwner,ss=rr.ReactCurrentBatchConfig,Ce=0,ut=null,et=null,ft=0,Bt=0,Fn=Vr(0),at=0,cl=null,mn=0,Oo=0,hm=0,za=null,Dt=null,xm=0,ra=1/0,Us=null,ro=!1,Kd=null,Ir=null,li=!1,Nr=null,no=0,Ba=0,Yd=null,ki=-1,Ci=0;function Ct(){return Ce&6?Qe():ki!==-1?ki:ki=Qe()}function Tr(e){return e.mode&1?Ce&2&&ft!==0?ft&-ft:lj.transition!==null?(Ci===0&&(Ci=Np()),Ci):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:Ip(e.type)),e):1}function fs(e,t,r,n){if(50<Ba)throw Ba=0,Yd=null,Error(ee(185));vl(e,r,n),(!(Ce&2)||e!==ut)&&(e===ut&&(!(Ce&2)&&(Oo|=r),at===4&&br(e,ft)),Ft(e,n),r===1&&Ce===0&&!(t.mode&1)&&(ra=Qe()+500,Ao&&Wr()))}function Ft(e,t){var r=e.callbackNode;ly(e,t);var n=zi(e,e===ut?ft:0);if(n===0)r!==null&&nh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&nh(r),t===1)e.tag===0?aj(Qh.bind(null,e)):Yp(Qh.bind(null,e)),tj(function(){!(Ce&6)&&Wr()}),r=null;else{switch(Sp(n)){case 1:r=$u;break;case 4:r=jp;break;case 16:r=$i;break;case 536870912:r=wp;break;default:r=$i}r=K0(r,z0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function z0(e,t){if(ki=-1,Ci=0,Ce&6)throw Error(ee(327));var r=e.callbackNode;if(Vn()&&e.callbackNode!==r)return null;var n=zi(e,e===ut?ft:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ao(e,n);else{t=n;var a=Ce;Ce|=2;var l=H0();(ut!==e||ft!==t)&&(Us=null,ra=Qe()+500,an(e,t));do try{Cj();break}catch(o){B0(e,o)}while(!0);Zu(),so.current=l,Ce=a,et!==null?t=0:(ut=null,ft=0,t=at)}if(t!==0){if(t===2&&(a=wd(e),a!==0&&(n=a,t=Qd(e,a))),t===1)throw r=cl,an(e,0),br(e,n),Ft(e,Qe()),r;if(t===6)br(e,n);else{if(a=e.current.alternate,!(n&30)&&!Sj(a)&&(t=ao(e,n),t===2&&(l=wd(e),l!==0&&(n=l,t=Qd(e,l))),t===1))throw r=cl,an(e,0),br(e,n),Ft(e,Qe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ee(345));case 2:Jr(e,Dt,Us);break;case 3:if(br(e,n),(n&130023424)===n&&(t=xm+500-Qe(),10<t)){if(zi(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ct(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Id(Jr.bind(null,e,Dt,Us),t);break}Jr(e,Dt,Us);break;case 4:if(br(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-xs(n);l=1<<i,i=t[i],i>a&&(a=i),n&=~l}if(n=a,n=Qe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nj(n/1960))-n,10<n){e.timeoutHandle=Id(Jr.bind(null,e,Dt,Us),n);break}Jr(e,Dt,Us);break;case 5:Jr(e,Dt,Us);break;default:throw Error(ee(329))}}}return Ft(e,Qe()),e.callbackNode===r?z0.bind(null,e):null}function Qd(e,t){var r=za;return e.current.memoizedState.isDehydrated&&(an(e,t).flags|=256),e=ao(e,t),e!==2&&(t=Dt,Dt=r,t!==null&&Jd(t)),e}function Jd(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function Sj(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!vs(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~hm,t&=~Oo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xs(t),n=1<<r;e[r]=-1,t&=~n}}function Qh(e){if(Ce&6)throw Error(ee(327));Vn();var t=zi(e,0);if(!(t&1))return Ft(e,Qe()),null;var r=ao(e,t);if(e.tag!==0&&r===2){var n=wd(e);n!==0&&(t=n,r=Qd(e,n))}if(r===1)throw r=cl,an(e,0),br(e,t),Ft(e,Qe()),r;if(r===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jr(e,Dt,Us),Ft(e,Qe()),null}function fm(e,t){var r=Ce;Ce|=1;try{return e(t)}finally{Ce=r,Ce===0&&(ra=Qe()+500,Ao&&Wr())}}function hn(e){Nr!==null&&Nr.tag===0&&!(Ce&6)&&Vn();var t=Ce;Ce|=1;var r=ss.transition,n=Ae;try{if(ss.transition=null,Ae=1,e)return e()}finally{Ae=n,ss.transition=r,Ce=t,!(Ce&6)&&Wr()}}function pm(){Bt=Fn.current,ze(Fn)}function an(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ej(r)),et!==null)for(r=et.return;r!==null;){var n=r;switch(Qu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&qi();break;case 3:ta(),ze(Ot),ze(Nt),am();break;case 5:nm(n);break;case 4:ta();break;case 13:ze(We);break;case 19:ze(We);break;case 10:em(n.type._context);break;case 22:case 23:pm()}r=r.return}if(ut=e,et=e=Ar(e.current,null),ft=Bt=t,at=0,cl=null,hm=Oo=mn=0,Dt=za=null,tn!==null){for(t=0;t<tn.length;t++)if(r=tn[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}tn=null}return e}function B0(e,t){do{var r=et;try{if(Zu(),wi.current=to,eo){for(var n=qe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}eo=!1}if(un=0,ot=nt=qe=null,Ua=!1,ll=0,mm.current=null,r===null||r.return===null){at=1,cl=t,et=null;break}e:{var l=e,i=r.return,o=r,c=t;if(t=ft,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=o,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var g=Mh(i);if(g!==null){g.flags&=-257,Fh(g,i,o,l,t),g.mode&1&&Oh(l,d,t),t=g,c=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){Oh(l,d,t),gm();break e}c=Error(ee(426))}}else if(He&&o.mode&1){var j=Mh(i);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Fh(j,i,o,l,t),Ju(sa(c,o));break e}}l=c=sa(c,o),at!==4&&(at=2),za===null?za=[l]:za.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var b=k0(l,c,t);Ph(l,b);break e;case 1:o=c;var h=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof h.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ir===null||!Ir.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t;var S=C0(l,o,t);Ph(l,S);break e}}l=l.return}while(l!==null)}W0(r)}catch(E){t=E,et===r&&r!==null&&(et=r=r.return);continue}break}while(!0)}function H0(){var e=so.current;return so.current=to,e===null?to:e}function gm(){(at===0||at===3||at===2)&&(at=4),ut===null||!(mn&268435455)&&!(Oo&268435455)||br(ut,ft)}function ao(e,t){var r=Ce;Ce|=2;var n=H0();(ut!==e||ft!==t)&&(Us=null,an(e,t));do try{kj();break}catch(a){B0(e,a)}while(!0);if(Zu(),Ce=r,so.current=n,et!==null)throw Error(ee(261));return ut=null,ft=0,at}function kj(){for(;et!==null;)V0(et)}function Cj(){for(;et!==null&&!Jv();)V0(et)}function V0(e){var t=G0(e.alternate,e,Bt);e.memoizedProps=e.pendingProps,t===null?W0(e):et=t,mm.current=null}function W0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vj(r,t),r!==null){r.flags&=32767,et=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,et=null;return}}else if(r=bj(r,t,Bt),r!==null){et=r;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);at===0&&(at=5)}function Jr(e,t,r){var n=Ae,a=ss.transition;try{ss.transition=null,Ae=1,_j(e,t,r,n)}finally{ss.transition=a,Ae=n}return null}function _j(e,t,r,n){do Vn();while(Nr!==null);if(Ce&6)throw Error(ee(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(iy(e,l),e===ut&&(et=ut=null,ft=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||li||(li=!0,K0($i,function(){return Vn(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=ss.transition,ss.transition=null;var i=Ae;Ae=1;var o=Ce;Ce|=4,mm.current=null,jj(e,r),U0(r,e),Gy(Ed),Bi=!!_d,Ed=_d=null,e.current=r,wj(r),Xv(),Ce=o,Ae=i,ss.transition=l}else e.current=r;if(li&&(li=!1,Nr=e,no=a),l=e.pendingLanes,l===0&&(Ir=null),ty(r.stateNode),Ft(e,Qe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(ro)throw ro=!1,e=Kd,Kd=null,e;return no&1&&e.tag!==0&&Vn(),l=e.pendingLanes,l&1?e===Yd?Ba++:(Ba=0,Yd=e):Ba=0,Wr(),null}function Vn(){if(Nr!==null){var e=Sp(no),t=ss.transition,r=Ae;try{if(ss.transition=null,Ae=16>e?16:e,Nr===null)var n=!1;else{if(e=Nr,Nr=null,no=0,Ce&6)throw Error(ee(331));var a=Ce;for(Ce|=4,ne=e.current;ne!==null;){var l=ne,i=l.child;if(ne.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ne=d;ne!==null;){var m=ne;switch(m.tag){case 0:case 11:case 15:$a(8,m,l)}var f=m.child;if(f!==null)f.return=m,ne=f;else for(;ne!==null;){m=ne;var p=m.sibling,g=m.return;if(O0(m),m===d){ne=null;break}if(p!==null){p.return=g,ne=p;break}ne=g}}}var v=l.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}ne=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,ne=i;else e:for(;ne!==null;){if(l=ne,l.flags&2048)switch(l.tag){case 0:case 11:case 15:$a(9,l,l.return)}var b=l.sibling;if(b!==null){b.return=l.return,ne=b;break e}ne=l.return}}var h=e.current;for(ne=h;ne!==null;){i=ne;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,ne=x;else e:for(i=h;ne!==null;){if(o=ne,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ro(9,o)}}catch(E){Ye(o,o.return,E)}if(o===i){ne=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,ne=S;break e}ne=o.return}}if(Ce=a,Wr(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(_o,e)}catch{}n=!0}return n}finally{Ae=r,ss.transition=t}}return!1}function Jh(e,t,r){t=sa(r,t),t=k0(e,t,1),e=Pr(e,t,1),t=Ct(),e!==null&&(vl(e,1,t),Ft(e,t))}function Ye(e,t,r){if(e.tag===3)Jh(e,e,r);else for(;t!==null;){if(t.tag===3){Jh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ir===null||!Ir.has(n))){e=sa(r,e),e=C0(t,e,1),t=Pr(t,e,1),e=Ct(),t!==null&&(vl(t,1,e),Ft(t,e));break}}t=t.return}}function Ej(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&r,ut===e&&(ft&r)===r&&(at===4||at===3&&(ft&130023424)===ft&&500>Qe()-xm?an(e,0):hm|=r),Ft(e,t)}function q0(e,t){t===0&&(e.mode&1?(t=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):t=1);var r=Ct();e=Xs(e,t),e!==null&&(vl(e,t,r),Ft(e,r))}function Pj(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),q0(e,r)}function Ij(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(t),q0(e,r)}var G0;G0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ot.current)Rt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Rt=!1,gj(e,t,r);Rt=!!(e.flags&131072)}else Rt=!1,He&&t.flags&1048576&&Qp(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Si(e,t),e=t.pendingProps;var a=Xn(t,Nt.current);Hn(t,r),a=im(null,t,n,e,a,r);var l=om();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mt(n)?(l=!0,Gi(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sm(t),a.updater=Lo,t.stateNode=a,a._reactInternals=t,Md(t,n,e,r),t=$d(null,t,n,!0,l,r)):(t.tag=0,He&&l&&Yu(t),St(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Si(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Aj(n),e=cs(n,e),a){case 0:t=Ud(null,t,n,e,r);break e;case 1:t=zh(null,t,n,e,r);break e;case 11:t=Uh(null,t,n,e,r);break e;case 14:t=$h(null,t,n,cs(n.type,e),r);break e}throw Error(ee(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),Ud(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),zh(e,t,n,a,r);case 3:e:{if(I0(t),e===null)throw Error(ee(387));n=t.pendingProps,l=t.memoizedState,a=l.element,e0(e,t),Xi(t,n,null,r);var i=t.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=sa(Error(ee(423)),t),t=Bh(e,t,n,r,a);break e}else if(n!==a){a=sa(Error(ee(424)),t),t=Bh(e,t,n,r,a);break e}else for(Ht=Er(t.stateNode.containerInfo.firstChild),Vt=t,He=!0,us=null,r=n0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zn(),n===a){t=Zs(e,t,r);break e}St(e,t,n,r)}t=t.child}return t;case 5:return a0(t),e===null&&Dd(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,Pd(n,a)?i=null:l!==null&&Pd(n,l)&&(t.flags|=32),P0(e,t),St(e,t,i,r),t.child;case 6:return e===null&&Dd(t),null;case 13:return T0(e,t,r);case 4:return rm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ea(t,null,n,r):St(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),Uh(e,t,n,a,r);case 7:return St(e,t,t.pendingProps,r),t.child;case 8:return St(e,t,t.pendingProps.children,r),t.child;case 12:return St(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,Oe(Qi,n._currentValue),n._currentValue=i,l!==null)if(vs(l.value,i)){if(l.children===a.children&&!Ot.current){t=Zs(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Gs(-1,r&-r),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Rd(l.return,r,t),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(ee(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Rd(i,r,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}St(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Hn(t,r),a=rs(a),n=n(a),t.flags|=1,St(e,t,n,r),t.child;case 14:return n=t.type,a=cs(n,t.pendingProps),a=cs(n.type,a),$h(e,t,n,a,r);case 15:return _0(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),Si(e,t),t.tag=1,Mt(n)?(e=!0,Gi(t)):e=!1,Hn(t,r),s0(t,n,a),Md(t,n,a,r),$d(null,t,n,!0,e,r);case 19:return A0(e,t,r);case 22:return E0(e,t,r)}throw Error(ee(156,t.tag))};function K0(e,t){return yp(e,t)}function Tj(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(e,t,r,n){return new Tj(e,t,r,n)}function bm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Aj(e){if(typeof e=="function")return bm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mu)return 11;if(e===Fu)return 14}return 2}function Ar(e,t){var r=e.alternate;return r===null?(r=ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function _i(e,t,r,n,a,l){var i=2;if(n=e,typeof e=="function")bm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case En:return ln(r.children,a,l,t);case Ou:i=8,a|=8;break;case id:return e=ts(12,r,t,a|2),e.elementType=id,e.lanes=l,e;case od:return e=ts(13,r,t,a),e.elementType=od,e.lanes=l,e;case cd:return e=ts(19,r,t,a),e.elementType=cd,e.lanes=l,e;case rp:return Mo(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tp:i=10;break e;case sp:i=9;break e;case Mu:i=11;break e;case Fu:i=14;break e;case fr:i=16,n=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=ts(i,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function ln(e,t,r,n){return e=ts(7,e,n,t),e.lanes=r,e}function Mo(e,t,r,n){return e=ts(22,e,n,t),e.elementType=rp,e.lanes=r,e.stateNode={isHidden:!1},e}function Ac(e,t,r){return e=ts(6,e,null,t),e.lanes=r,e}function Lc(e,t,r){return t=ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lj(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hc(0),this.expirationTimes=hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hc(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vm(e,t,r,n,a,l,i,o,c){return e=new Lj(e,t,r,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=ts(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sm(l),e}function Dj(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_n,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Y0(e){if(!e)return Fr;e=e._reactInternals;e:{if(vn(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var r=e.type;if(Mt(r))return Kp(e,r,t)}return t}function Q0(e,t,r,n,a,l,i,o,c){return e=vm(r,n,!0,e,a,l,i,o,c),e.context=Y0(null),r=e.current,n=Ct(),a=Tr(r),l=Gs(n,a),l.callback=t??null,Pr(r,l,a),e.current.lanes=a,vl(e,a,n),Ft(e,n),e}function Fo(e,t,r,n){var a=t.current,l=Ct(),i=Tr(a);return r=Y0(r),t.context===null?t.context=r:t.pendingContext=r,t=Gs(l,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Pr(a,t,i),e!==null&&(fs(e,a,i,l),ji(e,a,i)),i}function lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ym(e,t){Xh(e,t),(e=e.alternate)&&Xh(e,t)}function Rj(){return null}var J0=typeof reportError=="function"?reportError:function(e){console.error(e)};function jm(e){this._internalRoot=e}Uo.prototype.render=jm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Fo(e,t,null,null)};Uo.prototype.unmount=jm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hn(function(){Fo(null,e,null,null)}),t[Js]=null}};function Uo(e){this._internalRoot=e}Uo.prototype.unstable_scheduleHydration=function(e){if(e){var t=_p();e={blockedOn:null,target:e,priority:t};for(var r=0;r<gr.length&&t!==0&&t<gr[r].priority;r++);gr.splice(r,0,e),r===0&&Pp(e)}};function wm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zh(){}function Oj(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=lo(i);l.call(d)}}var i=Q0(t,n,e,0,null,!1,!1,"",Zh);return e._reactRootContainer=i,e[Js]=i.current,tl(e.nodeType===8?e.parentNode:e),hn(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=lo(c);o.call(d)}}var c=vm(e,0,!1,null,null,!1,!1,"",Zh);return e._reactRootContainer=c,e[Js]=c.current,tl(e.nodeType===8?e.parentNode:e),hn(function(){Fo(t,c,r,n)}),c}function zo(e,t,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=lo(i);o.call(c)}}Fo(t,i,e,a)}else i=Oj(r,t,e,a,n);return lo(i)}kp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ia(t.pendingLanes);r!==0&&(zu(t,r|1),Ft(t,Qe()),!(Ce&6)&&(ra=Qe()+500,Wr()))}break;case 13:hn(function(){var n=Xs(e,1);if(n!==null){var a=Ct();fs(n,e,1,a)}}),ym(e,1)}};Bu=function(e){if(e.tag===13){var t=Xs(e,134217728);if(t!==null){var r=Ct();fs(t,e,134217728,r)}ym(e,134217728)}};Cp=function(e){if(e.tag===13){var t=Tr(e),r=Xs(e,t);if(r!==null){var n=Ct();fs(r,e,t,n)}ym(e,t)}};_p=function(){return Ae};Ep=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};vd=function(e,t,r){switch(t){case"input":if(md(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=To(n);if(!a)throw Error(ee(90));ap(n),md(n,a)}}}break;case"textarea":ip(e,r);break;case"select":t=r.value,t!=null&&Un(e,!!r.multiple,t,!1)}};xp=fm;fp=hn;var Mj={usingClientEntryPoint:!1,Events:[jl,An,To,mp,hp,fm]},Ca={findFiberByHostInstance:en,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Fj={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bp(e),e===null?null:e.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance||Rj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ii.isDisabled&&ii.supportsFiber)try{_o=ii.inject(Fj),Is=ii}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mj;Kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wm(t))throw Error(ee(200));return Dj(e,t,null,r)};Kt.createRoot=function(e,t){if(!wm(e))throw Error(ee(299));var r=!1,n="",a=J0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=vm(e,1,!1,null,null,r,!1,n,a),e[Js]=t.current,tl(e.nodeType===8?e.parentNode:e),new jm(t)};Kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=bp(t),e=e===null?null:e.stateNode,e};Kt.flushSync=function(e){return hn(e)};Kt.hydrate=function(e,t,r){if(!$o(t))throw Error(ee(200));return zo(null,e,t,!0,r)};Kt.hydrateRoot=function(e,t,r){if(!wm(e))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=J0;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Q0(t,null,e,1,r??null,a,!1,l,i),e[Js]=t.current,tl(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Uo(t)};Kt.render=function(e,t,r){if(!$o(t))throw Error(ee(200));return zo(null,e,t,!1,r)};Kt.unmountComponentAtNode=function(e){if(!$o(e))throw Error(ee(40));return e._reactRootContainer?(hn(function(){zo(null,null,e,!1,function(){e._reactRootContainer=null,e[Js]=null})}),!0):!1};Kt.unstable_batchedUpdates=fm;Kt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$o(r))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return zo(e,t,r,!1,n)};Kt.version="18.2.0-next-9e3b772b8-20220608";function X0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X0)}catch(e){console.error(e)}}X0(),Qf.exports=Kt;var Uj=Qf.exports,Z0,ex=Uj;Z0=ex.createRoot,ex.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dl.apply(this,arguments)}var Sr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Sr||(Sr={}));const tx="popstate";function $j(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:i,hash:o}=n.location;return Xd("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:io(a)}return Bj(t,r,null,e)}function Ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zj(){return Math.random().toString(36).substr(2,8)}function sx(e,t){return{usr:e.state,key:e.key,idx:t}}function Xd(e,t,r,n){return r===void 0&&(r=null),dl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ua(t):t,{state:r,key:t&&t.key||n||zj()})}function io(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ua(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Bj(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,o=Sr.Pop,c=null,d=m();d==null&&(d=0,i.replaceState(dl({},i.state,{idx:d}),""));function m(){return(i.state||{idx:null}).idx}function f(){o=Sr.Pop;let j=m(),b=j==null?null:j-d;d=j,c&&c({action:o,location:y.location,delta:b})}function p(j,b){o=Sr.Push;let h=Xd(y.location,j,b);d=m()+1;let x=sx(h,d),S=y.createHref(h);try{i.pushState(x,"",S)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(S)}l&&c&&c({action:o,location:y.location,delta:1})}function g(j,b){o=Sr.Replace;let h=Xd(y.location,j,b);d=m();let x=sx(h,d),S=y.createHref(h);i.replaceState(x,"",S),l&&c&&c({action:o,location:y.location,delta:0})}function v(j){let b=a.location.origin!=="null"?a.location.origin:a.location.href,h=typeof j=="string"?j:io(j);return Ge(b,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,b)}let y={get action(){return o},get location(){return e(a,i)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(tx,f),c=j,()=>{a.removeEventListener(tx,f),c=null}},createHref(j){return t(a,j)},createURL:v,encodeLocation(j){let b=v(j);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:g,go(j){return i.go(j)}};return y}var rx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rx||(rx={}));function Hj(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?ua(t):t,a=ul(n.pathname||"/",r);if(a==null)return null;let l=eg(e);Vj(l);let i=null;for(let o=0;i==null&&o<l.length;++o)i=Zj(l[o],tw(a));return i}function eg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Lr([n,c.relativePath]),m=r.concat(c);l.children&&l.children.length>0&&(Ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),eg(l.children,t,m,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Jj(d,l.index),routesMeta:m})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of tg(l.path))a(l,i,c)}),t}function tg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=tg(n.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Vj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xj(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Wj=/^:\w+$/,qj=3,Gj=2,Kj=1,Yj=10,Qj=-2,nx=e=>e==="*";function Jj(e,t){let r=e.split("/"),n=r.length;return r.some(nx)&&(n+=Qj),t&&(n+=Gj),r.filter(a=>!nx(a)).reduce((a,l)=>a+(Wj.test(l)?qj:l===""?Kj:Yj),n)}function Xj(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Zj(e,t){let{routesMeta:r}=e,n={},a="/",l=[];for(let i=0;i<r.length;++i){let o=r[i],c=i===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",m=Zd({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d);if(!m)return null;Object.assign(n,m.params);let f=o.route;l.push({params:n,pathname:Lr([a,m.pathname]),pathnameBase:aw(Lr([a,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(a=Lr([a,m.pathnameBase]))}return l}function Zd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ew(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,m,f)=>{let{paramName:p,isOptional:g}=m;if(p==="*"){let y=o[f]||"";i=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[f];return g&&!v?d[p]=void 0:d[p]=sw(v||"",p),d},{}),pathname:l,pathnameBase:i,pattern:e}}function ew(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Nm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function tw(e){try{return decodeURI(e)}catch(t){return Nm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function sw(e,t){try{return decodeURIComponent(e)}catch(r){return Nm(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function ul(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function rw(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ua(e):e;return{pathname:r?r.startsWith("/")?r:nw(r,t):t,search:lw(n),hash:iw(a)}}function nw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Dc(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sm(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function km(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ua(e):(a=dl({},e),Ge(!a.pathname||!a.pathname.includes("?"),Dc("?","pathname","search",a)),Ge(!a.pathname||!a.pathname.includes("#"),Dc("#","pathname","hash",a)),Ge(!a.search||!a.search.includes("#"),Dc("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(n||i==null)o=r;else{let f=t.length-1;if(i.startsWith("..")){let p=i.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}o=f>=0?t[f]:"/"}let c=rw(a,o),d=i&&i!=="/"&&i.endsWith("/"),m=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const Lr=e=>e.join("/").replace(/\/\/+/g,"/"),aw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ow(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sg=["post","put","patch","delete"];new Set(sg);const cw=["get",...sg];new Set(cw);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oo.apply(this,arguments)}const Bo=u.createContext(null),rg=u.createContext(null),yn=u.createContext(null),Ho=u.createContext(null),nr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),ng=u.createContext(null);function dw(e,t){let{relative:r}=t===void 0?{}:t;ma()||Ge(!1);let{basename:n,navigator:a}=u.useContext(yn),{hash:l,pathname:i,search:o}=Vo(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:Lr([n,i])),a.createHref({pathname:c,search:o,hash:l})}function ma(){return u.useContext(Ho)!=null}function jn(){return ma()||Ge(!1),u.useContext(Ho).location}function ag(e){u.useContext(yn).static||u.useLayoutEffect(e)}function mt(){let{isDataRoute:e}=u.useContext(nr);return e?Nw():uw()}function uw(){ma()||Ge(!1);let e=u.useContext(Bo),{basename:t,navigator:r}=u.useContext(yn),{matches:n}=u.useContext(nr),{pathname:a}=jn(),l=JSON.stringify(Sm(n).map(c=>c.pathnameBase)),i=u.useRef(!1);return ag(()=>{i.current=!0}),u.useCallback(function(c,d){if(d===void 0&&(d={}),!i.current)return;if(typeof c=="number"){r.go(c);return}let m=km(c,JSON.parse(l),a,d.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Lr([t,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[t,r,l,a,e])}function Nl(){let{matches:e}=u.useContext(nr),t=e[e.length-1];return t?t.params:{}}function Vo(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=u.useContext(nr),{pathname:a}=jn(),l=JSON.stringify(Sm(n).map(i=>i.pathnameBase));return u.useMemo(()=>km(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function mw(e,t){return hw(e,t)}function hw(e,t,r){ma()||Ge(!1);let{navigator:n}=u.useContext(yn),{matches:a}=u.useContext(nr),l=a[a.length-1],i=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let c=jn(),d;if(t){var m;let y=typeof t=="string"?ua(t):t;o==="/"||(m=y.pathname)!=null&&m.startsWith(o)||Ge(!1),d=y}else d=c;let f=d.pathname||"/",p=o==="/"?f:f.slice(o.length)||"/",g=Hj(e,{pathname:p}),v=bw(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},i,y.params),pathname:Lr([o,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?o:Lr([o,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r);return t&&v?u.createElement(Ho.Provider,{value:{location:oo({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Sr.Pop}},v):v}function xw(){let e=ww(),t=ow(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:a},r):null,null)}const fw=u.createElement(xw,null);class pw extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?u.createElement(nr.Provider,{value:this.props.routeContext},u.createElement(ng.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gw(e){let{routeContext:t,match:r,children:n}=e,a=u.useContext(Bo);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(nr.Provider,{value:t},n)}function bw(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var a;if((a=r)!=null&&a.errors)e=r.matches;else return null}let l=e,i=(n=r)==null?void 0:n.errors;if(i!=null){let o=l.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id]));o>=0||Ge(!1),l=l.slice(0,Math.min(l.length,o+1))}return l.reduceRight((o,c,d)=>{let m=c.route.id?i==null?void 0:i[c.route.id]:null,f=null;r&&(f=c.route.errorElement||fw);let p=t.concat(l.slice(0,d+1)),g=()=>{let v;return m?v=f:c.route.Component?v=u.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=o,u.createElement(gw,{match:c,routeContext:{outlet:o,matches:p,isDataRoute:r!=null},children:v})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?u.createElement(pw,{location:r.location,revalidation:r.revalidation,component:f,error:m,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var lg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(lg||{}),ig=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ig||{});function vw(e){let t=u.useContext(Bo);return t||Ge(!1),t}function yw(e){let t=u.useContext(rg);return t||Ge(!1),t}function jw(e){let t=u.useContext(nr);return t||Ge(!1),t}function og(e){let t=jw(),r=t.matches[t.matches.length-1];return r.route.id||Ge(!1),r.route.id}function ww(){var e;let t=u.useContext(ng),r=yw(),n=og();return t||((e=r.errors)==null?void 0:e[n])}function Nw(){let{router:e}=vw(lg.UseNavigateStable),t=og(ig.UseNavigateStable),r=u.useRef(!1);return ag(()=>{r.current=!0}),u.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,oo({fromRouteId:t},l)))},[e,t])}function Ei(e){let{to:t,replace:r,state:n,relative:a}=e;ma()||Ge(!1);let{matches:l}=u.useContext(nr),{pathname:i}=jn(),o=mt(),c=km(t,Sm(l).map(m=>m.pathnameBase),i,a==="path"),d=JSON.stringify(c);return u.useEffect(()=>o(JSON.parse(d),{replace:r,state:n,relative:a}),[o,d,a,r,n]),null}function pe(e){Ge(!1)}function Sw(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Sr.Pop,navigator:l,static:i=!1}=e;ma()&&Ge(!1);let o=t.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:o,navigator:l,static:i}),[o,l,i]);typeof n=="string"&&(n=ua(n));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:g="default"}=n,v=u.useMemo(()=>{let y=ul(d,o);return y==null?null:{location:{pathname:y,search:m,hash:f,state:p,key:g},navigationType:a}},[o,d,m,f,p,g,a]);return v==null?null:u.createElement(yn.Provider,{value:c},u.createElement(Ho.Provider,{children:r,value:v}))}function kw(e){let{children:t,location:r}=e;return mw(eu(t),r)}new Promise(()=>{});function eu(e,t){t===void 0&&(t=[]);let r=[];return u.Children.forEach(e,(n,a)=>{if(!u.isValidElement(n))return;let l=[...t,a];if(n.type===u.Fragment){r.push.apply(r,eu(n.props.children,l));return}n.type!==pe&&Ge(!1),!n.props.index||!n.props.children||Ge(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=eu(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},co.apply(this,arguments)}function cg(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Cw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _w(e,t){return e.button===0&&(!t||t==="_self")&&!Cw(e)}function tu(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Ew(e,t){let r=tu(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(l=>{r.append(a,l)})}),r}const Pw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Iw=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],Tw=u.createContext({isTransitioning:!1}),Aw="startTransition",ax=Pv[Aw];function Lw(e){let{basename:t,children:r,future:n,window:a}=e,l=u.useRef();l.current==null&&(l.current=$j({window:a,v5Compat:!0}));let i=l.current,[o,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=n||{},m=u.useCallback(f=>{d&&ax?ax(()=>c(f)):c(f)},[c,d]);return u.useLayoutEffect(()=>i.listen(m),[i,m]),u.createElement(Sw,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i})}const Dw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=u.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:m,unstable_viewTransition:f}=t,p=cg(t,Pw),{basename:g}=u.useContext(yn),v,y=!1;if(typeof d=="string"&&Rw.test(d)&&(v=d,Dw))try{let x=new URL(window.location.href),S=d.startsWith("//")?new URL(x.protocol+d):new URL(d),E=ul(S.pathname,g);S.origin===x.origin&&E!=null?d=E+S.search+S.hash:y=!0}catch{}let j=dw(d,{relative:a}),b=Mw(d,{replace:i,state:o,target:c,preventScrollReset:m,relative:a,unstable_viewTransition:f});function h(x){n&&n(x),x.defaultPrevented||b(x)}return u.createElement("a",co({},p,{href:v||j,onClick:y||l?n:h,ref:r,target:c}))}),Lt=u.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:c,unstable_viewTransition:d,children:m}=t,f=cg(t,Iw),p=Vo(c,{relative:f.relative}),g=jn(),v=u.useContext(rg),{navigator:y}=u.useContext(yn),j=v!=null&&Uw(p)&&d===!0,b=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,h=g.pathname,x=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(h=h.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase());let S=h===b||!i&&h.startsWith(b)&&h.charAt(b.length)==="/",E=x!=null&&(x===b||!i&&x.startsWith(b)&&x.charAt(b.length)==="/"),w={isActive:S,isPending:E,isTransitioning:j},k=S?n:void 0,D;typeof l=="function"?D=l(w):D=[l,S?"active":null,E?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let q=typeof o=="function"?o(w):o;return u.createElement(ae,co({},f,{"aria-current":k,className:D,ref:r,style:q,to:c,unstable_viewTransition:d}),typeof m=="function"?m(w):m)});var su;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(su||(su={}));var lx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lx||(lx={}));function Ow(e){let t=u.useContext(Bo);return t||Ge(!1),t}function Mw(e,t){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,unstable_viewTransition:o}=t===void 0?{}:t,c=mt(),d=jn(),m=Vo(e,{relative:i});return u.useCallback(f=>{if(_w(f,r)){f.preventDefault();let p=n!==void 0?n:io(d)===io(m);c(e,{replace:p,state:a,preventScrollReset:l,relative:i,unstable_viewTransition:o})}},[d,c,m,n,a,r,e,l,i,o])}function Fw(e){let t=u.useRef(tu(e)),r=u.useRef(!1),n=jn(),a=u.useMemo(()=>Ew(n.search,r.current?null:t.current),[n.search]),l=mt(),i=u.useCallback((o,c)=>{const d=tu(typeof o=="function"?o(a):o);r.current=!0,l("?"+d,c)},[l,a]);return[a,i]}function Uw(e,t){t===void 0&&(t={});let r=u.useContext(Tw);r==null&&Ge(!1);let{basename:n}=Ow(su.useViewTransitionState),a=Vo(e,{relative:t.relative});if(!r.isTransitioning)return!1;let l=ul(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ul(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Zd(a.pathname,i)!=null||Zd(a.pathname,l)!=null}function dg(e,t){return function(){return e.apply(t,arguments)}}const{toString:$w}=Object.prototype,{getPrototypeOf:Cm}=Object,{iterator:Wo,toStringTag:ug}=Symbol,qo=(e=>t=>{const r=$w.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ys=e=>(e=e.toLowerCase(),t=>qo(t)===e),Go=e=>t=>typeof t===e,{isArray:ha}=Array,na=Go("undefined");function Sl(e){return e!==null&&!na(e)&&e.constructor!==null&&!na(e.constructor)&&Ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mg=ys("ArrayBuffer");function zw(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mg(e.buffer),t}const Bw=Go("string"),Ut=Go("function"),hg=Go("number"),kl=e=>e!==null&&typeof e=="object",Hw=e=>e===!0||e===!1,Pi=e=>{if(qo(e)!=="object")return!1;const t=Cm(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ug in e)&&!(Wo in e)},Vw=e=>{if(!kl(e)||Sl(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Ww=ys("Date"),qw=ys("File"),Gw=ys("Blob"),Kw=ys("FileList"),Yw=e=>kl(e)&&Ut(e.pipe),Qw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ut(e.append)&&((t=qo(e))==="formdata"||t==="object"&&Ut(e.toString)&&e.toString()==="[object FormData]"))},Jw=ys("URLSearchParams"),[Xw,Zw,eN,tN]=["ReadableStream","Request","Response","Headers"].map(ys),sN=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cl(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),ha(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Sl(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),i=l.length;let o;for(n=0;n<i;n++)o=l[n],t.call(null,e[o],o,e)}}function xg(e,t){if(Sl(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const rn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fg=e=>!na(e)&&e!==rn;function ru(){const{caseless:e,skipUndefined:t}=fg(this)&&this||{},r={},n=(a,l)=>{const i=e&&xg(r,l)||l;Pi(r[i])&&Pi(a)?r[i]=ru(r[i],a):Pi(a)?r[i]=ru({},a):ha(a)?r[i]=a.slice():(!t||!na(a))&&(r[i]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Cl(arguments[a],n);return r}const rN=(e,t,r,{allOwnKeys:n}={})=>(Cl(t,(a,l)=>{r&&Ut(a)?Object.defineProperty(e,l,{value:dg(a,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),nN=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aN=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},lN=(e,t,r,n)=>{let a,l,i;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)i=a[l],(!n||n(i,e,t))&&!o[i]&&(t[i]=e[i],o[i]=!0);e=r!==!1&&Cm(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},iN=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},oN=e=>{if(!e)return null;if(ha(e))return e;let t=e.length;if(!hg(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},cN=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cm(Uint8Array)),dN=(e,t)=>{const n=(e&&e[Wo]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},uN=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},mN=ys("HTMLFormElement"),hN=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),ix=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),xN=ys("RegExp"),pg=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Cl(r,(a,l)=>{let i;(i=t(a,l,e))!==!1&&(n[l]=i||a)}),Object.defineProperties(e,n)},fN=e=>{pg(e,(t,r)=>{if(Ut(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ut(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pN=(e,t)=>{const r={},n=a=>{a.forEach(l=>{r[l]=!0})};return ha(e)?n(e):n(String(e).split(t)),r},gN=()=>{},bN=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vN(e){return!!(e&&Ut(e.append)&&e[ug]==="FormData"&&e[Wo])}const yN=e=>{const t=new Array(10),r=(n,a)=>{if(kl(n)){if(t.indexOf(n)>=0)return;if(Sl(n))return n;if(!("toJSON"in n)){t[a]=n;const l=ha(n)?[]:{};return Cl(n,(i,o)=>{const c=r(i,a+1);!na(c)&&(l[o]=c)}),t[a]=void 0,l}}return n};return r(e,0)},jN=ys("AsyncFunction"),wN=e=>e&&(kl(e)||Ut(e))&&Ut(e.then)&&Ut(e.catch),gg=((e,t)=>e?setImmediate:t?((r,n)=>(rn.addEventListener("message",({source:a,data:l})=>{a===rn&&l===r&&n.length&&n.shift()()},!1),a=>{n.push(a),rn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ut(rn.postMessage)),NN=typeof queueMicrotask<"u"?queueMicrotask.bind(rn):typeof process<"u"&&process.nextTick||gg,SN=e=>e!=null&&Ut(e[Wo]),W={isArray:ha,isArrayBuffer:mg,isBuffer:Sl,isFormData:Qw,isArrayBufferView:zw,isString:Bw,isNumber:hg,isBoolean:Hw,isObject:kl,isPlainObject:Pi,isEmptyObject:Vw,isReadableStream:Xw,isRequest:Zw,isResponse:eN,isHeaders:tN,isUndefined:na,isDate:Ww,isFile:qw,isBlob:Gw,isRegExp:xN,isFunction:Ut,isStream:Yw,isURLSearchParams:Jw,isTypedArray:cN,isFileList:Kw,forEach:Cl,merge:ru,extend:rN,trim:sN,stripBOM:nN,inherits:aN,toFlatObject:lN,kindOf:qo,kindOfTest:ys,endsWith:iN,toArray:oN,forEachEntry:dN,matchAll:uN,isHTMLForm:mN,hasOwnProperty:ix,hasOwnProp:ix,reduceDescriptors:pg,freezeMethods:fN,toObjectSet:pN,toCamelCase:hN,noop:gN,toFiniteNumber:bN,findKey:xg,global:rn,isContextDefined:fg,isSpecCompliantForm:vN,toJSONObject:yN,isAsyncFn:jN,isThenable:wN,setImmediate:gg,asap:NN,isIterable:SN};let xe=class bg extends Error{static from(t,r,n,a,l,i){const o=new bg(t.message,r||t.code,n,a,l);return o.cause=t,o.name=t.name,i&&Object.assign(o,i),o}constructor(t,r,n,a,l){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),a&&(this.request=a),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}};xe.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";xe.ERR_BAD_OPTION="ERR_BAD_OPTION";xe.ECONNABORTED="ECONNABORTED";xe.ETIMEDOUT="ETIMEDOUT";xe.ERR_NETWORK="ERR_NETWORK";xe.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";xe.ERR_DEPRECATED="ERR_DEPRECATED";xe.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";xe.ERR_BAD_REQUEST="ERR_BAD_REQUEST";xe.ERR_CANCELED="ERR_CANCELED";xe.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";xe.ERR_INVALID_URL="ERR_INVALID_URL";const kN=null;function nu(e){return W.isPlainObject(e)||W.isArray(e)}function vg(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function ox(e,t,r){return e?e.concat(t).map(function(a,l){return a=vg(a),!r&&l?"["+a+"]":a}).join(r?".":""):t}function CN(e){return W.isArray(e)&&!e.some(nu)}const _N=W.toFlatObject(W,{},null,function(t){return/^is[A-Z]/.test(t)});function Ko(e,t,r){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=W.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,j){return!W.isUndefined(j[y])});const n=r.metaTokens,a=r.visitor||m,l=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(W.isDate(v))return v.toISOString();if(W.isBoolean(v))return v.toString();if(!c&&W.isBlob(v))throw new xe("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(v)||W.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function m(v,y,j){let b=v;if(v&&!j&&typeof v=="object"){if(W.endsWith(y,"{}"))y=n?y:y.slice(0,-2),v=JSON.stringify(v);else if(W.isArray(v)&&CN(v)||(W.isFileList(v)||W.endsWith(y,"[]"))&&(b=W.toArray(v)))return y=vg(y),b.forEach(function(x,S){!(W.isUndefined(x)||x===null)&&t.append(i===!0?ox([y],S,l):i===null?y:y+"[]",d(x))}),!1}return nu(v)?!0:(t.append(ox(j,y,l),d(v)),!1)}const f=[],p=Object.assign(_N,{defaultVisitor:m,convertValue:d,isVisitable:nu});function g(v,y){if(!W.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(v),W.forEach(v,function(b,h){(!(W.isUndefined(b)||b===null)&&a.call(t,b,W.isString(h)?h.trim():h,y,p))===!0&&g(b,y?y.concat(h):[h])}),f.pop()}}if(!W.isObject(e))throw new TypeError("data must be an object");return g(e),t}function cx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function _m(e,t){this._pairs=[],e&&Ko(e,this,t)}const yg=_m.prototype;yg.append=function(t,r){this._pairs.push([t,r])};yg.toString=function(t){const r=t?function(n){return t.call(this,n,cx)}:cx;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function EN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function jg(e,t,r){if(!t)return e;const n=r&&r.encode||EN,a=W.isFunction(r)?{serialize:r}:r,l=a&&a.serialize;let i;if(l?i=l(t,a):i=W.isURLSearchParams(t)?t.toString():new _m(t,a).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class dx{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){W.forEach(this.handlers,function(n){n!==null&&t(n)})}}const wg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PN=typeof URLSearchParams<"u"?URLSearchParams:_m,IN=typeof FormData<"u"?FormData:null,TN=typeof Blob<"u"?Blob:null,AN={isBrowser:!0,classes:{URLSearchParams:PN,FormData:IN,Blob:TN},protocols:["http","https","file","blob","url","data"]},Em=typeof window<"u"&&typeof document<"u",au=typeof navigator=="object"&&navigator||void 0,LN=Em&&(!au||["ReactNative","NativeScript","NS"].indexOf(au.product)<0),DN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RN=Em&&window.location.href||"http://localhost",ON=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Em,hasStandardBrowserEnv:LN,hasStandardBrowserWebWorkerEnv:DN,navigator:au,origin:RN},Symbol.toStringTag,{value:"Module"})),wt={...ON,...AN};function MN(e,t){return Ko(e,new wt.classes.URLSearchParams,{visitor:function(r,n,a,l){return wt.isNode&&W.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function FN(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function UN(e){const t={},r=Object.keys(e);let n;const a=r.length;let l;for(n=0;n<a;n++)l=r[n],t[l]=e[l];return t}function Ng(e){function t(r,n,a,l){let i=r[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),c=l>=r.length;return i=!i&&W.isArray(a)?a.length:i,c?(W.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!o):((!a[i]||!W.isObject(a[i]))&&(a[i]=[]),t(r,n,a[i],l)&&W.isArray(a[i])&&(a[i]=UN(a[i])),!o)}if(W.isFormData(e)&&W.isFunction(e.entries)){const r={};return W.forEachEntry(e,(n,a)=>{t(FN(n),a,r,0)}),r}return null}function $N(e,t,r){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const _l={transitional:wg,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,l=W.isObject(t);if(l&&W.isHTMLForm(t)&&(t=new FormData(t)),W.isFormData(t))return a?JSON.stringify(Ng(t)):t;if(W.isArrayBuffer(t)||W.isBuffer(t)||W.isStream(t)||W.isFile(t)||W.isBlob(t)||W.isReadableStream(t))return t;if(W.isArrayBufferView(t))return t.buffer;if(W.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return MN(t,this.formSerializer).toString();if((o=W.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ko(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),$N(t)):t}],transformResponse:[function(t){const r=this.transitional||_l.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(W.isResponse(t)||W.isReadableStream(t))return t;if(t&&W.isString(t)&&(n&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?xe.from(o,xe.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wt.classes.FormData,Blob:wt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{_l.headers[e]={}});const zN=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),BN=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!r||t[r]&&zN[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},ux=Symbol("internals");function _a(e){return e&&String(e).trim().toLowerCase()}function Ii(e){return e===!1||e==null?e:W.isArray(e)?e.map(Ii):String(e)}function HN(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const VN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Rc(e,t,r,n,a){if(W.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!W.isString(t)){if(W.isString(n))return t.indexOf(n)!==-1;if(W.isRegExp(n))return n.test(t)}}function WN(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function qN(e,t){const r=W.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,l,i){return this[n].call(this,t,a,l,i)},configurable:!0})})}let $t=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function l(o,c,d){const m=_a(c);if(!m)throw new Error("header name must be a non-empty string");const f=W.findKey(a,m);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||c]=Ii(o))}const i=(o,c)=>W.forEach(o,(d,m)=>l(d,m,c));if(W.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(W.isString(t)&&(t=t.trim())&&!VN(t))i(BN(t),r);else if(W.isObject(t)&&W.isIterable(t)){let o={},c,d;for(const m of t){if(!W.isArray(m))throw TypeError("Object iterator must return a key-value pair");o[d=m[0]]=(c=o[d])?W.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}i(o,r)}else t!=null&&l(r,t,n);return this}get(t,r){if(t=_a(t),t){const n=W.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return HN(a);if(W.isFunction(r))return r.call(this,a,n);if(W.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=_a(t),t){const n=W.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Rc(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function l(i){if(i=_a(i),i){const o=W.findKey(n,i);o&&(!r||Rc(n,n[o],o,r))&&(delete n[o],a=!0)}}return W.isArray(t)?t.forEach(l):l(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const l=r[n];(!t||Rc(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const r=this,n={};return W.forEach(this,(a,l)=>{const i=W.findKey(n,l);if(i){r[i]=Ii(a),delete r[l];return}const o=t?WN(l):String(l).trim();o!==l&&delete r[l],r[o]=Ii(a),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return W.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&W.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[ux]=this[ux]={accessors:{}}).accessors,a=this.prototype;function l(i){const o=_a(i);n[o]||(qN(a,i),n[o]=!0)}return W.isArray(t)?t.forEach(l):l(t),this}};$t.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors($t.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});W.freezeMethods($t);function Oc(e,t){const r=this||_l,n=t||r,a=$t.from(n.headers);let l=n.data;return W.forEach(e,function(o){l=o.call(r,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Sg(e){return!!(e&&e.__CANCEL__)}let El=class extends xe{constructor(t,r,n){super(t??"canceled",xe.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function kg(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new xe("Request failed with status code "+r.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function GN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function KN(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,l=0,i;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),m=n[l];i||(i=d),r[a]=c,n[a]=d;let f=l,p=0;for(;f!==a;)p+=r[f++],f=f%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-i<t)return;const g=m&&d-m;return g?Math.round(p*1e3/g):void 0}}function YN(e,t){let r=0,n=1e3/t,a,l;const i=(d,m=Date.now())=>{r=m,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const m=Date.now(),f=m-r;f>=n?i(d,m):(a=d,l||(l=setTimeout(()=>{l=null,i(a)},n-f)))},()=>a&&i(a)]}const uo=(e,t,r=3)=>{let n=0;const a=KN(50,250);return YN(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,c=i-n,d=a(c),m=i<=o;n=i;const f={loaded:i,total:o,progress:o?i/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&m?(o-i)/d:void 0,event:l,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(f)},r)},mx=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},hx=e=>(...t)=>W.asap(()=>e(...t)),QN=wt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,wt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(wt.origin),wt.navigator&&/(msie|trident)/i.test(wt.navigator.userAgent)):()=>!0,JN=wt.hasStandardBrowserEnv?{write(e,t,r,n,a,l,i){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];W.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),W.isString(n)&&o.push(`path=${n}`),W.isString(a)&&o.push(`domain=${a}`),l===!0&&o.push("secure"),W.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function XN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ZN(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Cg(e,t,r){let n=!XN(t);return e&&(n||r==!1)?ZN(e,t):t}const xx=e=>e instanceof $t?{...e}:e;function xn(e,t){t=t||{};const r={};function n(d,m,f,p){return W.isPlainObject(d)&&W.isPlainObject(m)?W.merge.call({caseless:p},d,m):W.isPlainObject(m)?W.merge({},m):W.isArray(m)?m.slice():m}function a(d,m,f,p){if(W.isUndefined(m)){if(!W.isUndefined(d))return n(void 0,d,f,p)}else return n(d,m,f,p)}function l(d,m){if(!W.isUndefined(m))return n(void 0,m)}function i(d,m){if(W.isUndefined(m)){if(!W.isUndefined(d))return n(void 0,d)}else return n(void 0,m)}function o(d,m,f){if(f in t)return n(d,m);if(f in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(d,m,f)=>a(xx(d),xx(m),f,!0)};return W.forEach(Object.keys({...e,...t}),function(m){const f=c[m]||a,p=f(e[m],t[m],m);W.isUndefined(p)&&f!==o||(r[m]=p)}),r}const _g=e=>{const t=xn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:i,auth:o}=t;if(t.headers=i=$t.from(i),t.url=jg(Cg(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),W.isFormData(r)){if(wt.hasStandardBrowserEnv||wt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(W.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,f])=>{d.includes(m.toLowerCase())&&i.set(m,f)})}}if(wt.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(t)),n||n!==!1&&QN(t.url))){const c=a&&l&&JN.read(l);c&&i.set(a,c)}return t},e1=typeof XMLHttpRequest<"u",t1=e1&&function(e){return new Promise(function(r,n){const a=_g(e);let l=a.data;const i=$t.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,m,f,p,g,v;function y(){g&&g(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function b(){if(!j)return;const x=$t.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),E={data:!o||o==="text"||o==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:x,config:e,request:j};kg(function(k){r(k),y()},function(k){n(k),y()},E),j=null}"onloadend"in j?j.onloadend=b:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(b)},j.onabort=function(){j&&(n(new xe("Request aborted",xe.ECONNABORTED,e,j)),j=null)},j.onerror=function(S){const E=S&&S.message?S.message:"Network Error",w=new xe(E,xe.ERR_NETWORK,e,j);w.event=S||null,n(w),j=null},j.ontimeout=function(){let S=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const E=a.transitional||wg;a.timeoutErrorMessage&&(S=a.timeoutErrorMessage),n(new xe(S,E.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,e,j)),j=null},l===void 0&&i.setContentType(null),"setRequestHeader"in j&&W.forEach(i.toJSON(),function(S,E){j.setRequestHeader(E,S)}),W.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),o&&o!=="json"&&(j.responseType=a.responseType),d&&([p,v]=uo(d,!0),j.addEventListener("progress",p)),c&&j.upload&&([f,g]=uo(c),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(m=x=>{j&&(n(!x||x.type?new El(null,e,j):x),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const h=GN(a.url);if(h&&wt.protocols.indexOf(h)===-1){n(new xe("Unsupported protocol "+h+":",xe.ERR_BAD_REQUEST,e));return}j.send(l||null)})},s1=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const l=function(d){if(!a){a=!0,o();const m=d instanceof Error?d:this.reason;n.abort(m instanceof xe?m:new El(m instanceof Error?m.message:m))}};let i=t&&setTimeout(()=>{i=null,l(new xe(`timeout of ${t}ms exceeded`,xe.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>W.asap(o),c}},r1=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},n1=async function*(e,t){for await(const r of a1(e))yield*r1(r,t)},a1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},fx=(e,t,r,n)=>{const a=n1(e,t);let l=0,i,o=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await a.next();if(d){o(),c.close();return}let f=m.byteLength;if(r){let p=l+=f;r(p)}c.enqueue(new Uint8Array(m))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},px=64*1024,{isFunction:oi}=W,l1=(({Request:e,Response:t})=>({Request:e,Response:t}))(W.global),{ReadableStream:gx,TextEncoder:bx}=W.global,vx=(e,...t)=>{try{return!!e(...t)}catch{return!1}},i1=e=>{e=W.merge.call({skipUndefined:!0},l1,e);const{fetch:t,Request:r,Response:n}=e,a=t?oi(t):typeof fetch=="function",l=oi(r),i=oi(n);if(!a)return!1;const o=a&&oi(gx),c=a&&(typeof bx=="function"?(v=>y=>v.encode(y))(new bx):async v=>new Uint8Array(await new r(v).arrayBuffer())),d=l&&o&&vx(()=>{let v=!1;const y=new r(wt.origin,{body:new gx,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!y}),m=i&&o&&vx(()=>W.isReadableStream(new n("").body)),f={stream:m&&(v=>v.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(y,j)=>{let b=y&&y[v];if(b)return b.call(y);throw new xe(`Response type '${v}' is not supported`,xe.ERR_NOT_SUPPORT,j)})});const p=async v=>{if(v==null)return 0;if(W.isBlob(v))return v.size;if(W.isSpecCompliantForm(v))return(await new r(wt.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(W.isArrayBufferView(v)||W.isArrayBuffer(v))return v.byteLength;if(W.isURLSearchParams(v)&&(v=v+""),W.isString(v))return(await c(v)).byteLength},g=async(v,y)=>{const j=W.toFiniteNumber(v.getContentLength());return j??p(y)};return async v=>{let{url:y,method:j,data:b,signal:h,cancelToken:x,timeout:S,onDownloadProgress:E,onUploadProgress:w,responseType:k,headers:D,withCredentials:q="same-origin",fetchOptions:N}=_g(v),_=t||fetch;k=k?(k+"").toLowerCase():"text";let I=s1([h,x&&x.toAbortSignal()],S),L=null;const z=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let M;try{if(w&&d&&j!=="get"&&j!=="head"&&(M=await g(D,b))!==0){let Q=new r(y,{method:"POST",body:b,duplex:"half"}),$;if(W.isFormData(b)&&($=Q.headers.get("content-type"))&&D.setContentType($),Q.body){const[O,G]=mx(M,uo(hx(w)));b=fx(Q.body,px,O,G)}}W.isString(q)||(q=q?"include":"omit");const J=l&&"credentials"in r.prototype,U={...N,signal:I,method:j.toUpperCase(),headers:D.normalize().toJSON(),body:b,duplex:"half",credentials:J?q:void 0};L=l&&new r(y,U);let C=await(l?_(L,N):_(y,U));const F=m&&(k==="stream"||k==="response");if(m&&(E||F&&z)){const Q={};["status","statusText","headers"].forEach(H=>{Q[H]=C[H]});const $=W.toFiniteNumber(C.headers.get("content-length")),[O,G]=E&&mx($,uo(hx(E),!0))||[];C=new n(fx(C.body,px,O,()=>{G&&G(),z&&z()}),Q)}k=k||"text";let B=await f[W.findKey(f,k)||"text"](C,v);return!F&&z&&z(),await new Promise((Q,$)=>{kg(Q,$,{data:B,headers:$t.from(C.headers),status:C.status,statusText:C.statusText,config:v,request:L})})}catch(J){throw z&&z(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,v,L),{cause:J.cause||J}):xe.from(J,J&&J.code,v,L)}}},o1=new Map,Eg=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,l=[n,a,r];let i=l.length,o=i,c,d,m=o1;for(;o--;)c=l[o],d=m.get(c),d===void 0&&m.set(c,d=o?new Map:i1(t)),m=d;return d};Eg();const Pm={http:kN,xhr:t1,fetch:{get:Eg}};W.forEach(Pm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const yx=e=>`- ${e}`,c1=e=>W.isFunction(e)||e===null||e===!1;function d1(e,t){e=W.isArray(e)?e:[e];const{length:r}=e;let n,a;const l={};for(let i=0;i<r;i++){n=e[i];let o;if(a=n,!c1(n)&&(a=Pm[(o=String(n)).toLowerCase()],a===void 0))throw new xe(`Unknown adapter '${o}'`);if(a&&(W.isFunction(a)||(a=a.get(t))))break;l[o||"#"+i]=a}if(!a){const i=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?i.length>1?`since :
`+i.map(yx).join(`
`):" "+yx(i[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a}const Pg={getAdapter:d1,adapters:Pm};function Mc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new El(null,e)}function jx(e){return Mc(e),e.headers=$t.from(e.headers),e.data=Oc.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Pg.getAdapter(e.adapter||_l.adapter,e)(e).then(function(n){return Mc(e),n.data=Oc.call(e,e.transformResponse,n),n.headers=$t.from(n.headers),n},function(n){return Sg(n)||(Mc(e),n&&n.response&&(n.response.data=Oc.call(e,e.transformResponse,n.response),n.response.headers=$t.from(n.response.headers))),Promise.reject(n)})}const Ig="1.13.4",Yo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const wx={};Yo.transitional=function(t,r,n){function a(l,i){return"[Axios v"+Ig+"] Transitional option '"+l+"'"+i+(n?". "+n:"")}return(l,i,o)=>{if(t===!1)throw new xe(a(i," has been removed"+(r?" in "+r:"")),xe.ERR_DEPRECATED);return r&&!wx[i]&&(wx[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,i,o):!0}};Yo.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function u1(e,t,r){if(typeof e!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],i=t[l];if(i){const o=e[l],c=o===void 0||i(o,l,e);if(c!==!0)throw new xe("option "+l+" must be "+c,xe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new xe("Unknown option "+l,xe.ERR_BAD_OPTION)}}const Ti={assertOptions:u1,validators:Yo},ks=Ti.validators;let on=class{constructor(t){this.defaults=t||{},this.interceptors={request:new dx,response:new dx}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=xn(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:l}=r;n!==void 0&&Ti.assertOptions(n,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean)},!1),a!=null&&(W.isFunction(a)?r.paramsSerializer={serialize:a}:Ti.assertOptions(a,{encode:ks.function,serialize:ks.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ti.assertOptions(r,{baseUrl:ks.spelling("baseURL"),withXsrfToken:ks.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=l&&W.merge(l.common,l[r.method]);l&&W.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),r.headers=$t.concat(i,l);const o=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let m,f=0,p;if(!c){const v=[jx.bind(this),void 0];for(v.unshift(...o),v.push(...d),p=v.length,m=Promise.resolve(r);f<p;)m=m.then(v[f++],v[f++]);return m}p=o.length;let g=r;for(;f<p;){const v=o[f++],y=o[f++];try{g=v(g)}catch(j){y.call(this,j);break}}try{m=jx.call(this,g)}catch(v){return Promise.reject(v)}for(f=0,p=d.length;f<p;)m=m.then(d[f++],d[f++]);return m}getUri(t){t=xn(this.defaults,t);const r=Cg(t.baseURL,t.url,t.allowAbsoluteUrls);return jg(r,t.params,t.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(t){on.prototype[t]=function(r,n){return this.request(xn(n||{},{method:t,url:r,data:(n||{}).data}))}});W.forEach(["post","put","patch"],function(t){function r(n){return function(l,i,o){return this.request(xn(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}on.prototype[t]=r(),on.prototype[t+"Form"]=r(!0)});let m1=class Tg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const i=new Promise(o=>{n.subscribe(o),l=o}).then(a);return i.cancel=function(){n.unsubscribe(l)},i},t(function(l,i,o){n.reason||(n.reason=new El(l,i,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Tg(function(a){t=a}),cancel:t}}};function h1(e){return function(r){return e.apply(null,r)}}function x1(e){return W.isObject(e)&&e.isAxiosError===!0}const lu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(lu).forEach(([e,t])=>{lu[t]=e});function Ag(e){const t=new on(e),r=dg(on.prototype.request,t);return W.extend(r,on.prototype,t,{allOwnKeys:!0}),W.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Ag(xn(e,a))},r}const Xe=Ag(_l);Xe.Axios=on;Xe.CanceledError=El;Xe.CancelToken=m1;Xe.isCancel=Sg;Xe.VERSION=Ig;Xe.toFormData=Ko;Xe.AxiosError=xe;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=h1;Xe.isAxiosError=x1;Xe.mergeConfig=xn;Xe.AxiosHeaders=$t;Xe.formToJSON=e=>Ng(W.isHTMLForm(e)?new FormData(e):e);Xe.getAdapter=Pg.getAdapter;Xe.HttpStatusCode=lu;Xe.default=Xe;const{Axios:Q3,AxiosError:J3,CanceledError:X3,isCancel:Z3,CancelToken:e_,VERSION:t_,all:s_,Cancel:r_,isAxiosError:n_,spread:a_,toFormData:l_,AxiosHeaders:i_,HttpStatusCode:o_,formToJSON:c_,getAdapter:d_,mergeConfig:u_}=Xe,f1=()=>{};var Nx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},p1=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[r++];t[n++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(l&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const l=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(l&63)<<6|i&63)}}return t.join("")},Dg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const l=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,d=c?e[a+2]:0,m=l>>2,f=(l&3)<<4|o>>4;let p=(o&15)<<2|d>>6,g=d&63;c||(g=64,i||(p=64)),n.push(r[m],r[f],r[p],r[g])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Lg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):p1(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const l=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const d=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,l==null||o==null||d==null||f==null)throw new g1;const p=l<<2|o>>4;if(n.push(p),d!==64){const g=o<<4&240|d>>2;if(n.push(g),f!==64){const v=d<<6&192|f;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class g1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b1=function(e){const t=Lg(e);return Dg.encodeByteArray(t,!0)},Rg=function(e){return b1(e).replace(/\./g,"")},Og=function(e){try{return Dg.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=()=>v1().__FIREBASE_DEFAULTS__,j1=()=>{if(typeof process>"u"||typeof Nx>"u")return;const e=Nx.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},w1=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Og(e[1]);return t&&JSON.parse(t)},Im=()=>{try{return f1()||y1()||j1()||w1()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},N1=e=>{var t,r;return(r=(t=Im())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},Mg=()=>{var e;return(e=Im())==null?void 0:e.config},Fg=e=>{var t;return(t=Im())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k1(e){return(await fetch(e,{credentials:"include"})).ok}const Ha={};function C1(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ha))Ha[t]?e.emulator.push(t):e.prod.push(t);return e}function _1(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let Sx=!1;function E1(e,t){if(typeof window>"u"||typeof document>"u"||!Qo(window.location.host)||Ha[e]===t||Ha[e]||Sx)return;Ha[e]=t;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",l=C1().prod.length>0;function i(){const p=document.getElementById(n);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Sx=!0,i()},p}function m(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=_1(n),g=r("text"),v=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),j=document.getElementById(y)||document.createElement("a"),b=r("preprendIcon"),h=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;o(x),m(j,y);const S=d();c(h,b),x.append(h,v,j,S),document.body.appendChild(x)}l?(v.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function I1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T1(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function A1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L1(){const e=Et();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function D1(){try{return typeof indexedDB=="object"}catch{return!1}}function R1(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var l;t(((l=a.error)==null?void 0:l.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="FirebaseError";class qr extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=O1,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,l=this.errors[t],i=l?M1(l,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new qr(a,o,n)}}function M1(e,t){return e.replace(F1,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const F1=/\{\$([^}]+)}/g;function U1(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function aa(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const l=e[a],i=t[a];if(kx(l)&&kx(i)){if(!aa(l,i))return!1}else if(l!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function kx(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function Aa(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,l]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function La(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function $1(e,t){const r=new z1(e,t);return r.subscribe.bind(r)}class z1{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");B1(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=Fc),a.error===void 0&&(a.error=Fc),a.complete===void 0&&(a.complete=Fc);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B1(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function Fc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(e){return e&&e._delegate?e._delegate:e}class la{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new S1;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(W1(t))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:a});n.resolve(l)}catch{}}}}clearInstance(t=Xr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xr){return this.instances.has(t)}getOptions(t=Xr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[l,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(l);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const l=this.instances.get(n);return l&&t(l,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:V1(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Xr){return this.component?this.component.multipleInstances?t:Xr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V1(e){return e===Xr?void 0:e}function W1(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new H1(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(De||(De={}));const G1={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},K1=De.INFO,Y1={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},Q1=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Y1[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ug{constructor(t){this.name=t,this._logLevel=K1,this._logHandler=Q1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in De))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?G1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...t),this._logHandler(this,De.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...t),this._logHandler(this,De.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,De.INFO,...t),this._logHandler(this,De.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,De.WARN,...t),this._logHandler(this,De.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...t),this._logHandler(this,De.ERROR,...t)}}const J1=(e,t)=>t.some(r=>e instanceof r);let Cx,_x;function X1(){return Cx||(Cx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z1(){return _x||(_x=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $g=new WeakMap,iu=new WeakMap,zg=new WeakMap,Uc=new WeakMap,Tm=new WeakMap;function e2(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",i)},l=()=>{r(Dr(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&$g.set(r,e)}).catch(()=>{}),Tm.set(t,e),t}function t2(e){if(iu.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",i),e.removeEventListener("abort",i)},l=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",i),e.addEventListener("abort",i)});iu.set(e,t)}let ou={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return iu.get(e);if(t==="objectStoreNames")return e.objectStoreNames||zg.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Dr(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function s2(e){ou=e(ou)}function r2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call($c(this),t,...r);return zg.set(n,t.sort?t.sort():[t]),Dr(n)}:Z1().includes(e)?function(...t){return e.apply($c(this),t),Dr($g.get(this))}:function(...t){return Dr(e.apply($c(this),t))}}function n2(e){return typeof e=="function"?r2(e):(e instanceof IDBTransaction&&t2(e),J1(e,X1())?new Proxy(e,ou):e)}function Dr(e){if(e instanceof IDBRequest)return e2(e);if(Uc.has(e))return Uc.get(e);const t=n2(e);return t!==e&&(Uc.set(e,t),Tm.set(t,e)),t}const $c=e=>Tm.get(e);function a2(e,t,{blocked:r,upgrade:n,blocking:a,terminated:l}={}){const i=indexedDB.open(e,t),o=Dr(i);return n&&i.addEventListener("upgradeneeded",c=>{n(Dr(i.result),c.oldVersion,c.newVersion,Dr(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{l&&c.addEventListener("close",()=>l()),a&&c.addEventListener("versionchange",d=>a(d.oldVersion,d.newVersion,d))}).catch(()=>{}),o}const l2=["get","getKey","getAll","getAllKeys","count"],i2=["put","add","delete","clear"],zc=new Map;function Ex(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(zc.get(t))return zc.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=i2.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||l2.includes(r)))return;const l=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(o.shift())),(await Promise.all([d[r](...o),a&&c.done]))[0]};return zc.set(t,l),l}s2(e=>({...e,get:(t,r,n)=>Ex(t,r)||e.get(t,r,n),has:(t,r)=>!!Ex(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(c2(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function c2(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const cu="@firebase/app",Px="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Ug("@firebase/app"),d2="@firebase/app-compat",u2="@firebase/analytics-compat",m2="@firebase/analytics",h2="@firebase/app-check-compat",x2="@firebase/app-check",f2="@firebase/auth",p2="@firebase/auth-compat",g2="@firebase/database",b2="@firebase/data-connect",v2="@firebase/database-compat",y2="@firebase/functions",j2="@firebase/functions-compat",w2="@firebase/installations",N2="@firebase/installations-compat",S2="@firebase/messaging",k2="@firebase/messaging-compat",C2="@firebase/performance",_2="@firebase/performance-compat",E2="@firebase/remote-config",P2="@firebase/remote-config-compat",I2="@firebase/storage",T2="@firebase/storage-compat",A2="@firebase/firestore",L2="@firebase/ai",D2="@firebase/firestore-compat",R2="firebase",O2="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="[DEFAULT]",M2={[cu]:"fire-core",[d2]:"fire-core-compat",[m2]:"fire-analytics",[u2]:"fire-analytics-compat",[x2]:"fire-app-check",[h2]:"fire-app-check-compat",[f2]:"fire-auth",[p2]:"fire-auth-compat",[g2]:"fire-rtdb",[b2]:"fire-data-connect",[v2]:"fire-rtdb-compat",[y2]:"fire-fn",[j2]:"fire-fn-compat",[w2]:"fire-iid",[N2]:"fire-iid-compat",[S2]:"fire-fcm",[k2]:"fire-fcm-compat",[C2]:"fire-perf",[_2]:"fire-perf-compat",[E2]:"fire-rc",[P2]:"fire-rc-compat",[I2]:"fire-gcs",[T2]:"fire-gcs-compat",[A2]:"fire-fst",[D2]:"fire-fst-compat",[L2]:"fire-vertex","fire-js":"fire-js",[R2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Map,F2=new Map,uu=new Map;function Ix(e,t){try{e.container.addComponent(t)}catch(r){er.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function ml(e){const t=e.name;if(uu.has(t))return er.debug(`There were multiple attempts to register component ${t}.`),!1;uu.set(t,e);for(const r of mo.values())Ix(r,e);for(const r of F2.values())Ix(r,e);return!0}function Bg(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function es(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new Pl("app","Firebase",U2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=O2;function Hg(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:du,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw Rr.create("bad-app-name",{appName:String(a)});if(r||(r=Mg()),!r)throw Rr.create("no-options");const l=mo.get(a);if(l){if(aa(r,l.options)&&aa(n,l.config))return l;throw Rr.create("duplicate-app",{appName:a})}const i=new q1(a);for(const c of uu.values())i.addComponent(c);const o=new $2(r,n,i);return mo.set(a,o),o}function z2(e=du){const t=mo.get(e);if(!t&&e===du&&Mg())return Hg();if(!t)throw Rr.create("no-app",{appName:e});return t}function Wn(e,t,r){let n=M2[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&l&&i.push("and"),l&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),er.warn(i.join(" "));return}ml(new la(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firebase-heartbeat-database",H2=1,hl="firebase-heartbeat-store";let Bc=null;function Vg(){return Bc||(Bc=a2(B2,H2,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(hl)}catch(r){console.warn(r)}}}}).catch(e=>{throw Rr.create("idb-open",{originalErrorMessage:e.message})})),Bc}async function V2(e){try{const r=(await Vg()).transaction(hl),n=await r.objectStore(hl).get(Wg(e));return await r.done,n}catch(t){if(t instanceof qr)er.warn(t.message);else{const r=Rr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});er.warn(r.message)}}}async function Tx(e,t){try{const n=(await Vg()).transaction(hl,"readwrite");await n.objectStore(hl).put(t,Wg(e)),await n.done}catch(r){if(r instanceof qr)er.warn(r.message);else{const n=Rr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});er.warn(n.message)}}}function Wg(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=1024,q2=30;class G2{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Y2(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ax();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(i=>i.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>q2){const i=Q2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){er.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Ax(),{heartbeatsToSend:n,unsentEntries:a}=K2(this._heartbeatsCache.heartbeats),l=Rg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return er.warn(r),""}}}function Ax(){return new Date().toISOString().substring(0,10)}function K2(e,t=W2){const r=[];let n=e.slice();for(const a of e){const l=r.find(i=>i.agent===a.agent);if(l){if(l.dates.push(a.date),Lx(r)>t){l.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Lx(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Y2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return D1()?R1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await V2(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return Tx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return Tx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function Lx(e){return Rg(JSON.stringify({version:2,heartbeats:e})).length}function Q2(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(e){ml(new la("platform-logger",t=>new o2(t),"PRIVATE")),ml(new la("heartbeat",t=>new G2(t),"PRIVATE")),Wn(cu,Px,e),Wn(cu,Px,"esm2020"),Wn("fire-js","")}J2("");var X2="firebase",Z2="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(X2,Z2,"app");function qg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eS=qg,Gg=new Pl("auth","Firebase",qg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new Ug("@firebase/auth");function tS(e,...t){ho.logLevel<=De.WARN&&ho.warn(`Auth (${Tl}): ${e}`,...t)}function Ai(e,...t){ho.logLevel<=De.ERROR&&ho.error(`Auth (${Tl}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(e,...t){throw Lm(e,...t)}function ps(e,...t){return Lm(e,...t)}function Am(e,t,r){const n={...eS(),[t]:r};return new Pl("auth","Firebase",n).create(t,{appName:e.name})}function Ks(e){return Am(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sS(e,t,r){const n=r;if(!(t instanceof n))throw n.name!==t.constructor.name&&as(e,"argument-error"),Am(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Lm(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return Gg.create(e,...t)}function he(e,t,...r){if(!e)throw Lm(t,...r)}function Vs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ai(t),new Error(t)}function tr(e,t){e||Vs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function rS(){return Dx()==="http:"||Dx()==="https:"}function Dx(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rS()||T1()||"connection"in navigator)?navigator.onLine:!0}function aS(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(t,r){this.shortDelay=t,this.longDelay=r,tr(r>t,"Short delay should be less than long delay!"),this.isMobile=P1()||A1()}get(){return nS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(e,t){tr(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oS=new Al(3e4,6e4);function lr(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ir(e,t,r,n,a={}){return Yg(e,a,async()=>{let l={},i={};n&&(t==="GET"?i=n:l={body:JSON.stringify(n)});const o=Il({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const d={method:t,headers:c,...l};return I1()||(d.referrerPolicy="no-referrer"),e.emulatorConfig&&Qo(e.emulatorConfig.host)&&(d.credentials="include"),Kg.fetch()(await Qg(e,e.config.apiHost,r,o),d)})}async function Yg(e,t,r){e._canInitEmulator=!1;const n={...lS,...t};try{const a=new dS(e),l=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await l.json();if("needConfirmation"in i)throw ci(e,"account-exists-with-different-credential",i);if(l.ok&&!("errorMessage"in i))return i;{const o=l.ok?i.errorMessage:i.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ci(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw ci(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw ci(e,"user-disabled",i);const m=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Am(e,m,d);as(e,m)}}catch(a){if(a instanceof qr)throw a;as(e,"network-request-failed",{message:String(a)})}}async function Ll(e,t,r,n,a={}){const l=await ir(e,t,r,n,a);return"mfaPendingCredential"in l&&as(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function Qg(e,t,r,n){const a=`${t}${r}?${n}`,l=e,i=l.config.emulator?Dm(e.config,a):`${e.config.apiScheme}://${a}`;return iS.includes(r)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(i).toString():i}function cS(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ps(this.auth,"network-request-failed")),oS.get())})}}function ci(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=ps(e,t,n);return a.customData._tokenResponse=r,a}function Rx(e){return e!==void 0&&e.enterprise!==void 0}class uS{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return cS(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mS(e,t){return ir(e,"GET","/v2/recaptchaConfig",lr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(e,t){return ir(e,"POST","/v1/accounts:delete",t)}async function xo(e,t){return ir(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xS(e,t=!1){const r=ar(e),n=await r.getIdToken(t),a=Rm(n);he(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,i=l==null?void 0:l.sign_in_provider;return{claims:a,token:n,authTime:Va(Hc(a.auth_time)),issuedAtTime:Va(Hc(a.iat)),expirationTime:Va(Hc(a.exp)),signInProvider:i||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Hc(e){return Number(e)*1e3}function Rm(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return Ai("JWT malformed, contained fewer than 3 sections"),null;try{const a=Og(r);return a?JSON.parse(a):(Ai("Failed to decode base64 JWT payload"),null)}catch(a){return Ai("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Ox(e){const t=Rm(e);return he(t,"internal-error"),he(typeof t.exp<"u","internal-error"),he(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof qr&&fS(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function fS({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(e){var f;const t=e.auth,r=await e.getIdToken(),n=await xl(e,xo(t,{idToken:r}));he(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const l=(f=a.providerUserInfo)!=null&&f.length?Jg(a.providerUserInfo):[],i=bS(e.providerData,l),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),d=o?c:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new hu(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(e,m)}async function gS(e){const t=ar(e);await fo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function bS(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function Jg(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(e,t){const r=await Yg(e,{},async()=>{const n=Il({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,i=await Qg(e,a,"/v1/token",`key=${l}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&Qo(e.emulatorConfig.host)&&(c.credentials="include"),Kg.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function yS(e,t){return ir(e,"POST","/v2/accounts:revokeToken",lr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){he(t.idToken,"internal-error"),he(typeof t.idToken<"u","internal-error"),he(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Ox(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){he(t.length!==0,"internal-error");const r=Ox(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:l}=await vS(t,r);this.updateTokensAndExpiration(n,a,Number(l))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:l}=r,i=new qn;return n&&(he(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(he(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),l&&(he(typeof l=="number","internal-error",{appName:t}),i.expirationTime=l),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qn,this.toJSON())}_performRefresh(){return Vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(e,t){he(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class hs{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new pS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hu(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await xl(this,this.stsTokenManager.getToken(this.auth,t));return he(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return xS(this,t)}reload(){return gS(this)}_assign(t){this!==t&&(he(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new hs({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await fo(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(es(this.auth.app))return Promise.reject(Ks(this.auth));const t=await this.getIdToken();return await xl(this,hS(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,l=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,d=r.createdAt??void 0,m=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:v,stsTokenManager:y}=r;he(f&&y,t,"internal-error");const j=qn.fromJSON(this.name,y);he(typeof f=="string",t,"internal-error"),mr(n,t.name),mr(a,t.name),he(typeof p=="boolean",t,"internal-error"),he(typeof g=="boolean",t,"internal-error"),mr(l,t.name),mr(i,t.name),mr(o,t.name),mr(c,t.name),mr(d,t.name),mr(m,t.name);const b=new hs({uid:f,auth:t,email:a,emailVerified:p,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:l,tenantId:o,stsTokenManager:j,createdAt:d,lastLoginAt:m});return v&&Array.isArray(v)&&(b.providerData=v.map(h=>({...h}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(t,r,n=!1){const a=new qn;a.updateFromServerResponse(r);const l=new hs({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await fo(l),l}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];he(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Jg(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),o=new qn;o.updateFromIdToken(n);const c=new hs({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hu(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;function Ws(e){tr(e instanceof Function,"Expected a class definition");let t=Mx.get(e);return t?(tr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Mx.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}Xg.type="NONE";const Fx=Xg;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(e,t,r){return`firebase:${e}:${t}:${r}`}class Gn{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:l}=this.auth;this.fullUserKey=Li(this.userKey,a.apiKey,l),this.fullPersistenceKey=Li("persistence",a.apiKey,l),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await xo(this.auth,{idToken:t}).catch(()=>{});return r?hs._fromGetAccountInfoResponse(this.auth,r,t):null}return hs._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Gn(Ws(Fx),t,n);const a=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let l=a[0]||Ws(Fx);const i=Li(n,t.config.apiKey,t.name);let o=null;for(const d of r)try{const m=await d._get(i);if(m){let f;if(typeof m=="string"){const p=await xo(t,{idToken:m}).catch(()=>{});if(!p)break;f=await hs._fromGetAccountInfoResponse(t,p,m)}else f=hs._fromJSON(t,m);d!==l&&(o=f),l=d;break}}catch{}const c=a.filter(d=>d._shouldAllowMigration);return!l._shouldAllowMigration||!c.length?new Gn(l,t,n):(l=c[0],o&&await l._set(i,o.toJSON()),await Promise.all(r.map(async d=>{if(d!==l)try{await d._remove(i)}catch{}})),new Gn(l,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(nb(t))return"Blackberry";if(ab(t))return"Webos";if(eb(t))return"Safari";if((t.includes("chrome/")||tb(t))&&!t.includes("edge/"))return"Chrome";if(rb(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Zg(e=Et()){return/firefox\//i.test(e)}function eb(e=Et()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tb(e=Et()){return/crios\//i.test(e)}function sb(e=Et()){return/iemobile/i.test(e)}function rb(e=Et()){return/android/i.test(e)}function nb(e=Et()){return/blackberry/i.test(e)}function ab(e=Et()){return/webos/i.test(e)}function Om(e=Et()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jS(e=Et()){var t;return Om(e)&&!!((t=window.navigator)!=null&&t.standalone)}function wS(){return L1()&&document.documentMode===10}function lb(e=Et()){return Om(e)||rb(e)||ab(e)||nb(e)||/windows phone/i.test(e)||sb(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(e,t=[]){let r;switch(e){case"Browser":r=Ux(Et());break;case"Worker":r=`${Ux(Et())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Tl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=l=>new Promise((i,o)=>{try{const c=t(l);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(e,t={}){return ir(e,"GET","/v2/passwordPolicy",lr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=6;class CS{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??kS,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $x(this),this.idTokenSubscription=new $x(this),this.beforeStateQueue=new NS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Ws(r)),this._initializationPromise=this.queue(async()=>{var n,a,l;if(!this._deleted&&(this.persistenceManager=await Gn.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await xo(this,{idToken:t}),n=await hs._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var l;if(es(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(l=this.redirectUser)==null?void 0:l._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await fo(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=aS()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(es(this.app))return Promise.reject(Ks(this));const r=t?ar(t):null;return r&&he(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&he(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return es(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return es(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ws(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SS(this),r=new CS(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Pl("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await yS(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Ws(t)||this._popupRedirectResolver;he(r,this,"argument-error"),this.redirectPersistenceManager=await Gn.create(this,[Ws(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const l=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(o,this,"internal-error"),o.then(()=>{i||l(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(es(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&tS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Gr(e){return ar(e)}class $x{constructor(t){this.auth=t,this.observer=null,this.addObserver=$1(r=>this.observer=r)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ES(e){Jo=e}function ob(e){return Jo.loadJS(e)}function PS(){return Jo.recaptchaEnterpriseScript}function IS(){return Jo.gapiScript}function TS(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class AS{constructor(){this.enterprise=new LS}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class LS{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const DS="recaptcha-enterprise",cb="NO_RECAPTCHA";class RS{constructor(t){this.type=DS,this.auth=Gr(t)}async verify(t="verify",r=!1){async function n(l){if(!r){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(i,o)=>{mS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const d=new uS(c);return l.tenantId==null?l._agentRecaptchaConfig=d:l._tenantRecaptchaConfigs[l.tenantId]=d,i(d.siteKey)}}).catch(c=>{o(c)})})}function a(l,i,o){const c=window.grecaptcha;Rx(c)?c.enterprise.ready(()=>{c.enterprise.execute(l,{action:t}).then(d=>{i(d)}).catch(()=>{i(cb)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AS().execute("siteKey",{action:"verify"}):new Promise((l,i)=>{n(this.auth).then(o=>{if(!r&&Rx(window.grecaptcha))a(o,l,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=PS();c.length!==0&&(c+=o),ob(c).then(()=>{a(o,l,i)}).catch(d=>{i(d)})}}).catch(o=>{i(o)})})}}async function zx(e,t,r,n=!1,a=!1){const l=new RS(e);let i;if(a)i=cb;else try{i=await l.verify(r)}catch{i=await l.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function xu(e,t,r,n,a){var l;if((l=e._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await zx(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await zx(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(e,t){const r=Bg(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),l=r.getOptions();if(aa(l,t??{}))return a;as(a,"already-initialized")}return r.initialize({options:t})}function MS(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ws);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function FS(e,t,r){const n=Gr(e);he(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,l=db(t),{host:i,port:o}=US(t),c=o===null?"":`:${o}`,d={url:`${l}//${i}${c}/`},m=Object.freeze({host:i,port:o,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){he(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),he(aa(d,n.config.emulator)&&aa(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,Qo(i)?(k1(`${l}//${i}${c}`),E1("Auth",!0)):$S()}function db(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function US(e){const t=db(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const l=a[1];return{host:l,port:Bx(n.substr(l.length+1))}}else{const[l,i]=n.split(":");return{host:l,port:Bx(i)}}}function Bx(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function $S(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Vs("not implemented")}_getIdTokenResponse(t){return Vs("not implemented")}_linkToIdToken(t,r){return Vs("not implemented")}_getReauthenticationResolver(t){return Vs("not implemented")}}async function zS(e,t){return ir(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(e,t){return Ll(e,"POST","/v1/accounts:signInWithPassword",lr(e,t))}async function HS(e,t){return ir(e,"POST","/v1/accounts:sendOobCode",lr(e,t))}async function VS(e,t){return HS(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(e,t){return Ll(e,"POST","/v1/accounts:signInWithEmailLink",lr(e,t))}async function qS(e,t){return Ll(e,"POST","/v1/accounts:signInWithEmailLink",lr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Mm{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new fl(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new fl(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xu(t,r,"signInWithPassword",BS);case"emailLink":return WS(t,{email:this._email,oobCode:this._password});default:as(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xu(t,n,"signUpPassword",zS);case"emailLink":return qS(t,{idToken:r,email:this._email,oobCode:this._password});default:as(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kn(e,t){return Ll(e,"POST","/v1/accounts:signInWithIdp",lr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="http://localhost";class fn extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new fn(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):as("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...l}=r;if(!n||!a)return null;const i=new fn(n,a);return i.idToken=l.idToken||void 0,i.accessToken=l.accessToken||void 0,i.secret=l.secret,i.nonce=l.nonce,i.pendingToken=l.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return Kn(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Kn(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Kn(t,r)}buildRequest(){const t={requestUri:GS,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Il(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YS(e){const t=Aa(La(e)).link,r=t?Aa(La(t)).deep_link_id:null,n=Aa(La(e)).deep_link_id;return(n?Aa(La(n)).link:null)||n||r||t||e}class Fm{constructor(t){const r=Aa(La(t)),n=r.apiKey??null,a=r.oobCode??null,l=KS(r.mode??null);he(n&&a&&l,"argument-error"),this.apiKey=n,this.operation=l,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=YS(t);try{return new Fm(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.providerId=xa.PROVIDER_ID}static credential(t,r){return fl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=Fm.parseLink(r);return he(n,"argument-error"),fl._fromEmailAndCode(t,n.code,n.tenantId)}}xa.PROVIDER_ID="password";xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Um{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Dl{constructor(){super("facebook.com")}static credential(t){return fn._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vr.credential(t.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return fn._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return zs.credentialFromTaggedObject(t)}static credentialFromError(t){return zs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return zs.credential(r,n)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Dl{constructor(){super("github.com")}static credential(t){return fn._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return yr.credentialFromTaggedObject(t)}static credentialFromError(t){return yr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return yr.credential(t.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Dl{constructor(){super("twitter.com")}static credential(t,r){return fn._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return jr.credentialFromTaggedObject(t)}static credentialFromError(t){return jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return jr.credential(r,n)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(e,t){return Ll(e,"POST","/v1/accounts:signUp",lr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const l=await hs._fromIdTokenResponse(t,n,a),i=Hx(n);return new pn({user:l,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=Hx(n);return new pn({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function Hx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends qr{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,po.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new po(t,r,n,a)}}function ub(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?po._fromErrorAndOperation(e,l,t,n):l})}async function JS(e,t,r=!1){const n=await xl(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return pn._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(e,t,r=!1){const{auth:n}=e;if(es(n.app))return Promise.reject(Ks(n));const a="reauthenticate";try{const l=await xl(e,ub(n,a,t,e),r);he(l.idToken,n,"internal-error");const i=Rm(l.idToken);he(i,n,"internal-error");const{sub:o}=i;return he(e.uid===o,n,"user-mismatch"),pn._forOperation(e,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&as(n,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mb(e,t,r=!1){if(es(e.app))return Promise.reject(Ks(e));const n="signIn",a=await ub(e,n,t),l=await pn._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(l.user),l}async function ZS(e,t){return mb(Gr(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(e){const t=Gr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function e4(e,t,r){if(es(e.app))return Promise.reject(Ks(e));const n=Gr(e),i=await xu(n,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QS).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&hb(e),c}),o=await pn._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(o.user),o}function t4(e,t,r){return es(e.app)?Promise.reject(Ks(e)):ZS(ar(e),xa.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&hb(e),n})}async function Vx(e,t){const r=ar(e),a={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()},{email:l}=await VS(r.auth,a);l!==e.email&&await e.reload()}function s4(e,t,r,n){return ar(e).onIdTokenChanged(t,r,n)}function r4(e,t,r){return ar(e).beforeAuthStateChanged(t,r)}function Vc(e){return ar(e).signOut()}const go="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(go,"1"),this.storage.removeItem(go),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=1e3,a4=10;class fb extends xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},l=this.storage.getItem(n);wS()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,a4):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},n4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}fb.type="LOCAL";const l4=fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}pb.type="SESSION";const gb=pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new Xo(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:l}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async d=>d(r.origin,l)),c=await i4(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,i;return new Promise((o,c)=>{const d=$m("",20);a.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(m),l=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),o(p.data.response);break;default:clearTimeout(m),clearTimeout(l),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:d,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(){return window}function c4(e){As().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){return typeof As().WorkerGlobalScope<"u"&&typeof As().importScripts=="function"}async function d4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u4(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function m4(){return bb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="firebaseLocalStorageDb",h4=1,bo="firebaseLocalStorage",yb="fbase_key";class Rl{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Zo(e,t){return e.transaction([bo],t?"readwrite":"readonly").objectStore(bo)}function x4(){const e=indexedDB.deleteDatabase(vb);return new Rl(e).toPromise()}function fu(){const e=indexedDB.open(vb,h4);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(bo,{keyPath:yb})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(bo)?t(n):(n.close(),await x4(),t(await fu()))})})}async function Wx(e,t,r){const n=Zo(e,!0).put({[yb]:t,value:r});return new Rl(n).toPromise()}async function f4(e,t){const r=Zo(e,!1).get(t),n=await new Rl(r).toPromise();return n===void 0?null:n.value}function qx(e,t){const r=Zo(e,!0).delete(t);return new Rl(r).toPromise()}const p4=800,g4=3;class jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fu(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>g4)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xo._getInstance(m4()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await d4(),!this.activeServiceWorker)return;this.sender=new o4(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||u4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await fu();return await Wx(t,go,"1"),await qx(t,go),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wx(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>f4(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Zo(a,!1).getAll();return new Rl(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),p4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jb.type="LOCAL";const b4=jb;new Al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(e,t){return t?Ws(t):(he(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends Mm{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Kn(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Kn(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Kn(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function v4(e){return mb(e.auth,new zm(e),e.bypassAuthState)}function y4(e){const{auth:t,user:r}=e;return he(r,t,"internal-error"),XS(r,new zm(e),e.bypassAuthState)}async function j4(e){const{auth:t,user:r}=e;return he(r,t,"internal-error"),JS(r,new zm(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(t,r,n,a,l=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:l,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return v4;case"linkViaPopup":case"linkViaRedirect":return j4;case"reauthViaPopup":case"reauthViaRedirect":return y4;default:as(this.auth,"internal-error")}}resolve(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=new Al(2e3,1e4);async function N4(e,t,r){if(es(e.app))return Promise.reject(ps(e,"operation-not-supported-in-this-environment"));const n=Gr(e);sS(e,t,Um);const a=wb(n,r);return new nn(n,"signInViaPopup",t,a).executeNotNull()}class nn extends Nb{constructor(t,r,n,a,l){super(t,r,a,l),this.provider=n,this.authWindow=null,this.pollId=null,nn.currentPopupAction&&nn.currentPopupAction.cancel(),nn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return he(t,this.auth,"internal-error"),t}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const t=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,w4.get())};t()}}nn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="pendingRedirect",Di=new Map;class k4 extends Nb{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=Di.get(this.auth._key());if(!t){try{const n=await C4(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}Di.set(this.auth._key(),t)}return this.bypassAuthState||Di.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C4(e,t){const r=P4(t),n=E4(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function _4(e,t){Di.set(e._key(),t)}function E4(e){return Ws(e._redirectPersistence)}function P4(e){return Li(S4,e.config.apiKey,e.name)}async function I4(e,t,r=!1){if(es(e.app))return Promise.reject(Ks(e));const n=Gr(e),a=wb(n,t),i=await new k4(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=10*60*1e3;class A4{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!L4(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!Sb(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(ps(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=T4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gx(t))}saveEventToCache(t){this.cachedEventUids.add(Gx(t)),this.lastProcessedEventTime=Date.now()}}function Gx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Sb({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function L4(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sb(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(e,t={}){return ir(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O4=/^https?/;async function M4(e){if(e.config.emulator)return;const{authorizedDomains:t}=await D4(e);for(const r of t)try{if(F4(r))return}catch{}as(e,"unauthorized-domain")}function F4(e){const t=mu(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!O4.test(r))return!1;if(R4.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=new Al(3e4,6e4);function Kx(){const e=As().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function $4(e){return new Promise((t,r)=>{var a,l,i;function n(){Kx(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Kx(),r(ps(e,"network-request-failed"))},timeout:U4.get()})}if((l=(a=As().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)t(gapi.iframes.getContext());else if((i=As().gapi)!=null&&i.load)n();else{const o=TS("iframefcb");return As()[o]=()=>{gapi.load?n():r(ps(e,"network-request-failed"))},ob(`${IS()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw Ri=null,t})}let Ri=null;function z4(e){return Ri=Ri||$4(e),Ri}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new Al(5e3,15e3),H4="__/auth/iframe",V4="emulator/auth/iframe",W4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G4(e){const t=e.config;he(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?Dm(t,V4):`https://${e.config.authDomain}/${H4}`,n={apiKey:t.apiKey,appName:e.name,v:Tl},a=q4.get(e.config.apiHost);a&&(n.eid=a);const l=e._getFrameworks();return l.length&&(n.fw=l.join(",")),`${r}?${Il(n).slice(1)}`}async function K4(e){const t=await z4(e),r=As().gapi;return he(r,e,"internal-error"),t.open({where:document.body,url:G4(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W4,dontclear:!0},n=>new Promise(async(a,l)=>{await n.restyle({setHideOnLeave:!1});const i=ps(e,"network-request-failed"),o=As().setTimeout(()=>{l(i)},B4.get());function c(){As().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{l(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q4=500,J4=600,X4="_blank",Z4="http://localhost";class Yx{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e5(e,t,r,n=Q4,a=J4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...Y4,width:n.toString(),height:a.toString(),top:l,left:i},d=Et().toLowerCase();r&&(o=tb(d)?X4:r),Zg(d)&&(t=t||Z4,c.scrollbars="yes");const m=Object.entries(c).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(jS(d)&&o!=="_self")return t5(t||"",o),new Yx(null);const f=window.open(t||"",o,m);he(f,e,"popup-blocked");try{f.focus()}catch{}return new Yx(f)}function t5(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="__/auth/handler",r5="emulator/auth/handler",n5=encodeURIComponent("fac");async function Qx(e,t,r,n,a,l){he(e.config.authDomain,e,"auth-domain-config-required"),he(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Tl,eventId:a};if(t instanceof Um){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",U1(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,f]of Object.entries({}))i[m]=f}if(t instanceof Dl){const m=t.getScopes().filter(f=>f!=="");m.length>0&&(i.scopes=m.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const m of Object.keys(o))o[m]===void 0&&delete o[m];const c=await e._getAppCheckToken(),d=c?`#${n5}=${encodeURIComponent(c)}`:"";return`${a5(e)}?${Il(o).slice(1)}${d}`}function a5({config:e}){return e.emulator?Dm(e,r5):`https://${e.authDomain}/${s5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="webStorageSupport";class l5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gb,this._completeRedirectFn=I4,this._overrideRedirectResult=_4}async _openPopup(t,r,n,a){var i;tr((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const l=await Qx(t,r,n,mu(),a);return e5(t,l,$m())}async _openRedirect(t,r,n,a){await this._originValidation(t);const l=await Qx(t,r,n,mu(),a);return c4(l),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:l}=this.eventManagers[r];return a?Promise.resolve(a):(tr(l,"If manager is not set, promise should be"),l)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await K4(t),n=new A4(t);return r.register("authEvent",a=>(he(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Wc,{type:Wc},a=>{var i;const l=(i=a==null?void 0:a[0])==null?void 0:i[Wc];l!==void 0&&r(!!l),as(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=M4(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return lb()||eb()||Om()}}const i5=l5;var Jx="@firebase/auth",Xx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d5(e){ml(new la("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;he(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ib(e)},d=new _S(n,a,l,c);return MS(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),ml(new la("auth-internal",t=>{const r=Gr(t.getProvider("auth").getImmediate());return(n=>new o5(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(Jx,Xx,c5(e)),Wn(Jx,Xx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=5*60,m5=Fg("authIdTokenMaxAge")||u5;let Zx=null;const h5=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>m5)return;const a=r==null?void 0:r.token;Zx!==a&&(Zx=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function x5(e=z2()){const t=Bg(e,"auth");if(t.isInitialized())return t.getImmediate();const r=OS(e,{popupRedirectResolver:i5,persistence:[b4,l4,gb]}),n=Fg("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(n,location.origin);if(location.origin===l.origin){const i=h5(l.toString());r4(r,i,()=>i(r.currentUser)),s4(r,o=>i(o))}}const a=N1("auth");return a&&FS(r,`http://${a}`),r}function f5(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}ES({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const l=ps("internal-error");l.customData=a,r(l)},n.type="text/javascript",n.charset="UTF-8",f5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d5("Browser");const p5={apiKey:"AIzaSyCsdSxrDeN0Z9QDycW5VpcluxSlEH6qaxc",authDomain:"dainggrader-auth.firebaseapp.com",projectId:"dainggrader-auth",storageBucket:"dainggrader-auth.firebasestorage.app",messagingSenderId:"1086621509748",appId:"1:1086621509748:web:380a81b3b561690e920921"},g5=Hg(p5),Zr=x5(g5),b5="http://localhost:8000",X=Xe.create({baseURL:b5,headers:{"Content-Type":"application/json"}});X.interceptors.request.use(async e=>{const t=Zr.currentUser;if(t){const r=await t.getIdToken();e.headers.Authorization=`Bearer ${r}`}else{const r=localStorage.getItem("token");r&&(e.headers.Authorization=`Bearer ${r}`)}return e.data instanceof FormData&&delete e.headers["Content-Type"],e});X.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.pathname!=="/login"&&(window.location.href="/login")),Promise.reject(e)});async function v5(e){const t=await X.get("/history",{signal:e});return t.data.status!=="success"||!Array.isArray(t.data.entries)?[]:t.data.entries}async function y5(e){const t=await X.get("/history/detailed",{signal:e});return t.data.status!=="success"?{status:"error",entries:[],fish_types:[]}:t.data}async function kb(e=1,t=10){return(await X.get("/admin/scans",{params:{page:e,page_size:t}})).data}async function j5(e){return(await X.get("/admin/scans/summary",{params:{year:e}})).data}async function w5(){return(await X.get("/admin/scans/stats")).data}async function Cb(e={}){return(await X.get("/admin/audit-logs",{params:e})).data}async function N5(e=1,t=10){return(await X.get("/activity/me",{params:{page:e,page_size:t}})).data}async function S5(e,t){return(await X.post(`/admin/scans/${e}/disable`,null,{params:{reason:t||""}})).data}async function k5(e){return(await X.delete(`/admin/scans/${e}`)).data}async function C5(e){return(await X.post("/contact",e)).data}async function _5(e){const t=new FormData;return t.append("file",e),(await X.post("/analyze",t,{responseType:"blob"})).data}async function E5(){return(await X.get("/categories")).data}async function P5(e){return(await X.post("/categories",e)).data}async function I5(e,t){return(await X.patch(`/categories/${e}`,t)).data}async function T5(e){return(await X.delete(`/categories/${e}`)).data}async function _b(e={}){return(await X.get("/seller/products",{params:e})).data}async function A5(e){return(await X.post("/seller/products",e)).data}async function qc(e,t){return(await X.patch(`/seller/products/${e}`,t)).data}async function ef(e,t){return(await X.post(`/seller/products/${e}/disable`,{disabled:t})).data}async function tf(e){return(await X.delete(`/seller/products/${e}`)).data}async function L5(e,t,r){const n=new FormData;return t.forEach(l=>n.append("images",l)),typeof r=="number"&&n.append("main_index",String(r)),(await X.post(`/seller/products/${e}/images`,n)).data}async function D5(e,t){return(await X.delete(`/seller/products/${e}/images/${t}`)).data}async function Yn(e,t=1,r=5){return(await X.get(`/catalog/products/${e}/reviews`,{params:{page:t,page_size:r}})).data}async function R5(e){return(await X.get(`/products/${e}/reviews/me`)).data}async function O5(e,t){return(await X.post(`/products/${e}/reviews`,t)).data}async function M5(e,t){return(await X.patch(`/products/${e}/reviews/me`,t)).data}async function F5(e){return(await X.delete(`/products/${e}/reviews/me`)).data}async function Eb(){return(await X.get("/catalog/categories")).data}async function Pb(e,t=1){return(await X.post("/cart/add",{product_id:e,qty:t})).data}async function Bm(){return(await X.get("/cart")).data}async function U5(e,t){return(await X.patch(`/cart/${e}`,{qty:t})).data}async function $5(e){return(await X.delete(`/cart/${e}`)).data}async function z5(e){return(await X.post("/orders/checkout",e)).data}async function Ib(e=1,t=10){return(await X.get("/orders",{params:{page:e,page_size:t}})).data}async function Tb(e=1,t=10){return(await X.get("/orders/seller",{params:{page:e,page_size:t}})).data}async function B5(e){return(await X.get(`/orders/${e}`)).data}async function Ab(e){var l;const t=await X.get(`/orders/${e}/receipt.pdf`,{responseType:"blob"}),r=((l=t.headers)==null?void 0:l["content-disposition"])||"",n=/filename="?([^";]+)"?/i.exec(r),a=(n==null?void 0:n[1])||`receipt-${e}.pdf`;return{blob:t.data,filename:a}}async function H5(e,t){return(await X.patch(`/orders/${e}/status`,{status:t})).data}async function V5(e){return(await X.patch(`/orders/${e}/mark-delivered`)).data}async function W5(e){return(await X.put(`/orders/${e}/cancel`)).data}async function Lb(){return(await X.get("/catalog/sellers")).data}async function q5(e){return(await X.get(`/catalog/sellers/${e}`)).data}async function Wa(e={}){return(await X.get("/catalog/products",{params:e})).data}async function G5(e){const t=new FormData;return t.append("file",e),(await X.post("/seller/products/import-csv",t)).data}async function Db(e=1,t=12,r="All",n=""){return(await X.get("/community/posts",{params:{page:e,page_size:t,category:r,search:n}})).data}async function K5(e=1,t=10){return(await X.get("/community/posts/me",{params:{page:e,page_size:t}})).data}async function Y5(e=6){return(await X.get("/community/posts/featured",{params:{limit:e}})).data}async function Rb(e=7){return(await X.get("/community/posts/top/liked",{params:{limit:e}})).data}async function Q5(e,t=7){return(await X.get(`/community/posts/by-category/${encodeURIComponent(e)}`,{params:{limit:t}})).data}async function J5(){return(await X.get("/community/stats")).data}async function X5(e,t,r,n){const a=new FormData;return a.append("title",e),a.append("description",t),a.append("category",r),n.forEach(i=>a.append("images",i)),(await X.post("/community/posts",a)).data}async function Z5(e){return(await X.post(`/community/posts/${e}/like`)).data}async function ek(e){return(await X.delete(`/community/posts/${e}`)).data}async function tk(e,t,r,n){const a=new FormData;return a.append("title",t),a.append("description",r),a.append("category",n),(await X.put(`/community/posts/${e}`,a)).data}async function sk(e){return(await X.get(`/community/posts/${e}`)).data}async function rk(e,t){const r=new FormData;return r.append("text",t),(await X.post(`/community/posts/${e}/comments`,r)).data}async function nk(e){return(await X.delete(`/community/comments/${e}`)).data}async function ak(e=1,t=20,r="all",n="all",a=""){return(await X.get("/admin/users",{params:{page:e,page_size:t,role:r,status:n,search:a}})).data}async function lk(){return(await X.get("/admin/users/stats")).data}async function ik(e,t){return(await X.put(`/admin/users/${e}/toggle-status`,{reason:t})).data}async function ok(e){return(await X.get(`/admin/users/${e}`)).data}async function ck(e=1,t=20,r="all",n="",a="all"){return(await X.get("/admin/posts",{params:{page:e,page_size:t,status:r,search:n,category:a}})).data}async function dk(){return(await X.get("/admin/posts/stats")).data}async function sf(e,t){return(await X.put(`/admin/posts/${e}/toggle-status`,{reason:t})).data}async function rf(e){return(await X.get(`/admin/posts/${e}/comments`)).data}async function uk(e,t){return(await X.put(`/admin/comments/${e}/toggle-status`,{reason:t})).data}async function mk(e){return(await X.get(`/catalog/products/${e}`)).data}async function Ob(){return(await X.get("/wishlist")).data}async function ec(e){return(await X.post(`/wishlist/${e}`)).data}async function hk(e){return(await X.get(`/wishlist/check/${e}`)).data}async function Mb(){return(await X.get("/wishlist/ids")).data}async function xk(){return(await X.get("/seller/analytics/kpis")).data}async function fk(e=3){return(await X.get("/seller/analytics/orders/recent",{params:{limit:e}})).data}async function nf(e=1,t=4){return(await X.get("/seller/analytics/products/top",{params:{page:e,page_size:t}})).data}async function pk(){return(await X.get("/seller/analytics/sales/categories")).data}async function gk(e,t){return(await X.get("/seller/analytics/sales/overview",{params:{year:e,half:t}})).data}async function bk(e,t){return(await X.get("/admin/orders/by-time",{params:{year:e,month:t}})).data}async function vk(e=1,t=20,r="all",n="all",a="all",l=""){return(await X.get("/admin/orders",{params:{page:e,page_size:t,status:r,seller:n,category:a,search:l}})).data}async function Fb(){return(await X.get("/admin/orders/stats")).data}async function yk(e){return(await X.get(`/admin/orders/${e}`)).data}async function Ub(e="all",t){return(await X.get("/api/vouchers",{params:{filter_by:e,seller_id:t}})).data}async function jk(e){return(await X.post("/api/vouchers",e)).data}async function wk(e,t){return(await X.put(`/api/vouchers/${e}`,t)).data}async function $b(e){return(await X.delete(`/api/vouchers/${e}`)).data}async function Nk(e,t){return(await X.post("/api/vouchers/validate",{code:e,order_total:t})).data}const Ys={async login(e,t,r){r&&console.warn("Admin code is ignored for login.");const a=(await t4(Zr,e,t)).user;if(!a.emailVerified)throw await Vx(a),await Vc(Zr),new Error("Please verify your email first. A new verification email was sent.");const l=await a.getIdToken();localStorage.setItem("token",l);const i=await X.get("/auth/me");return{token:l,user:i.data}},async signInWithGoogle(){var a,l,i;const e=new zs,r=(await N4(Zr,e)).user,n=await r.getIdToken();localStorage.setItem("token",n);try{const o=await X.get("/auth/me");return{token:n,user:o.data}}catch(o){if(((a=o.response)==null?void 0:a.status)===401||((l=o.response)==null?void 0:l.status)===404){const c=r.displayName||((i=r.email)==null?void 0:i.split("@")[0])||"User",d=await X.post("/auth/register-firebase",{name:c,email:r.email,role:"user"});return{token:n,user:d.data}}throw o}},async register(e){const r=(await e4(Zr,e.email,e.password)).user;await Vx(r);const n=await r.getIdToken();localStorage.setItem("token",n);const a=await X.post("/auth/register-firebase",{name:e.name,email:e.email,role:e.role,admin_code:e.admin_code});return await Vc(Zr),localStorage.removeItem("token"),{token:null,user:a.data,requiresVerification:!0}},logout(){Vc(Zr).catch(()=>{}),localStorage.removeItem("token"),localStorage.removeItem("rememberEmail")},async getCurrentUser(){return(await X.get("/auth/me")).data},async updateProfile(e){return(await X.patch("/auth/profile",e)).data},async uploadProfileAvatar(e){const t=new FormData;return t.append("file",e),(await X.post("/auth/profile/avatar",t)).data}},zb=u.createContext(null);function Sk({children:e}){const[t,r]=u.useState(()=>localStorage.getItem("token")),[n,a]=u.useState(null),[l,i]=u.useState(!0);u.useEffect(()=>{const m=localStorage.getItem("token");if(r(m),!m){a(null),i(!1);return}i(!0),Ys.getCurrentUser().then(f=>{a({id:f.id,name:f.name||"",email:f.email||"",avatar_url:f.avatar_url??null,role:f.role??"user"})}).catch(()=>a(null)).finally(()=>i(!1))},[t]);const o=u.useCallback((m,f)=>{localStorage.setItem("token",m),r(m),f&&a(f)},[]),c=u.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("rememberEmail"),r(null),a(null)},[]),d={isLoggedIn:!!t,isLoading:l,user:n,login:o,logout:c,setUser:a};return s.jsx(zb.Provider,{value:d,children:e})}function rt(){const e=u.useContext(zb);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Bb=u.createContext(null);function kk({children:e}){const[t,r]=u.useState(null),n=u.useCallback(l=>{r(l||null)},[]),a=u.useCallback(()=>r(null),[]);return u.useEffect(()=>{if(!t)return;const l=setTimeout(()=>r(null),4e3);return()=>clearTimeout(l)},[t]),s.jsxs(Bb.Provider,{value:{showToast:n,hideToast:a},children:[e,t!=null&&s.jsx("div",{role:"alert",className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[100] px-6 py-3 rounded-xl bg-slate-800 text-white text-sm font-medium shadow-lg",style:{animation:"fadeIn 0.2s ease-out"},children:t})]})}function ht(){const e=u.useContext(Bb);return e||{showToast:()=>{},hideToast:()=>{}}}var Ck={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _k=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),te=(e,t)=>{const r=u.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,children:o,...c},d)=>u.createElement("svg",{ref:d,...Ck,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:`lucide lucide-${_k(e)}`,...c},[...t.map(([m,f])=>u.createElement(m,f)),...(Array.isArray(o)?o:[o])||[]]));return r.displayName=`${e}`,r},Pt=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ek=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),sr=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),af=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),lf=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),vo=te("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),of=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),qa=te("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),pu=te("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Pk=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),_t=te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),gu=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Gt=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),tc=te("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ct=te("ChevronDown",[["polyline",{points:"6 9 12 15 18 9",key:"1do0m2"}]]),tt=te("ChevronLeft",[["polyline",{points:"15 18 9 12 15 6",key:"kvxz59"}]]),st=te("ChevronRight",[["polyline",{points:"9 18 15 12 9 6",key:"1rtp27"}]]),qs=te("ChevronUp",[["polyline",{points:"18 15 12 9 6 15",key:"1uugdp"}]]),Ik=te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Hm=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Hb=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),bu=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),wn=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ol=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),yo=te("Edit2",[["path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z",key:"2s2c1q"}]]),Tk=te("Edit3",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z",key:"18w55b"}]]),Vb=te("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Ak=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Nn=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Lk=te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Qn=te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),or=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),jo=te("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]),Dk=te("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Vm=te("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),Wb=te("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),Rk=te("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Je=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),cf=te("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),wo=te("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Ok=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Mk=te("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]),Ur=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),vu=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Fk=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),No=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),qb=te("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Gb=te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Uk=te("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),Kb=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Or=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),gs=te("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),yu=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),ju=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ml=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),$r=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),pl=te("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),$k=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ms=te("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),So=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ye=te("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Gc=te("Pencil",[["line",{x1:"18",x2:"22",y1:"2",y2:"6",key:"1e96e7"}],["path",{d:"M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z",key:"12iwkt"}]]),zk=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),fa=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Bk=te("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),ia=te("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),sc=te("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Hk=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Vk=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Yb=te("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["line",{x1:"7",x2:"17",y1:"12",y2:"12",key:"197423"}]]),zt=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Wk=te("Send",[["line",{x1:"22",x2:"11",y1:"2",y2:"13",key:"2qtwb"}],["polygon",{points:"22 2 15 22 11 13 2 9 22 2",key:"12uapv"}]]),df=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wu=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),qk=te("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),zr=te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z",key:"14a4hr"}],["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),lt=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Gk=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ls=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Ds=te("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),Qb=te("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Wt=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),rc=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Br=te("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Jb=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),uf=te("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Kk=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),bs=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ko=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Yk=te("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]),gl=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Pe=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mf="/assets/logos/dainggrader-logo.png",Qk=[{to:"/admin",label:"Dashboard",icon:No,roles:["admin"]},{to:"/",label:"Home",icon:Ok},{to:"/grade",label:"Grade",icon:Yb},{to:"/history",label:"History",icon:wo},{to:"/profile",label:"Profile",icon:bs}],Jk=[{to:"/catalog",label:"Product Catalog",icon:Rk},{to:"/sellers",label:"Stores",icon:Ds},{to:"/wishlist",label:"Wishlist",icon:Je,roles:["user"]},{to:"/orders",label:"Orders",icon:Br,roles:["user"]},{to:"/cart",label:"Cart",icon:zr,roles:["user"]}],Xk=[{to:"/about-daing/espada",label:"Espada"},{to:"/about-daing/danggit",label:"Danggit"},{to:"/about-daing/dalagang-bukid",label:"Dalagang Bukid"},{to:"/about-daing/flying-fish",label:"Flying Fish"},{to:"/about-daing/bisugo",label:"Bisugo"}],Zk=[{to:"/publications/local",label:"Local"},{to:"/publications/foreign",label:"Foreign"}],eC=[{to:"/about",label:"About Us",icon:ko},{to:"/contact",label:"Contact Us",icon:Ml},{to:"/forum",label:"Community Forum",icon:ms}],tC=[{to:"/seller/dashboard",label:"Dashboard",icon:No},{to:"/seller/products",label:"Products",icon:ye},{to:"/seller/orders",label:"Orders",icon:Ik},{to:"/seller/reviews",label:"Reviews",icon:Ls},{to:"/seller/discounts",label:"Vouchers",icon:Vm},{to:"/seller/earnings",label:"Earnings",icon:wn}],sC=[{to:"/admin/users",label:"Users"},{to:"/admin/posts",label:"Community Posts"},{to:"/admin/scans",label:"Scans"},{to:"/admin/audit-logs",label:"Audit Logs"},{to:"/admin/orders",label:"Orders"},{to:"/admin/discounts",label:"Vouchers"},{to:"/admin/payouts",label:"Payouts"}];function rC({open:e,onOpenChange:t}){const{isLoggedIn:r,logout:n,user:a}=rt(),l=mt(),[i,o]=u.useState(!1),[c,d]=u.useState(!1),[m,f]=u.useState(!1),[p,g]=u.useState(!1),[v,y]=u.useState(!1),[j,b]=u.useState(!1),[h,x]=u.useState(!1),S=(a==null?void 0:a.role)??"user",E=Qk.filter(N=>!N.roles||N.roles.includes(S)),w=Jk.filter(N=>!N.roles||N.roles.includes(S)),k=N=>{switch(["aboutDaing","publications"].includes(N)?(o(!1),f(!1),b(!1),x(!1),N!=="aboutDaing"&&g(!1),N!=="publications"&&y(!1)):(N!=="market"&&o(!1),N!=="info"&&d(!1),N!=="support"&&f(!1),N!=="management"&&b(!1),N!=="sellerPanel"&&x(!1)),N){case"market":o(!i);break;case"info":d(!c);break;case"support":f(!m);break;case"aboutDaing":g(!p);break;case"publications":y(!v);break;case"management":b(!j);break;case"sellerPanel":x(!h);break}},D=N=>{N.stopPropagation(),n(),t(!1),l("/")},q=N=>{N.stopPropagation(),e||t(!0)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/40 z-40 lg:hidden transition-opacity duration-200",style:{opacity:e?1:0,pointerEvents:e?"auto":"none"},onClick:()=>t(!1),"aria-hidden":"true"}),s.jsx("aside",{onClick:q,className:`
          fixed top-0 left-0 z-50 flex h-screen cursor-pointer lg:cursor-default
          bg-sidebar text-white
          transition-all duration-300 ease-in-out
          lg:translate-x-0
          ${e?"translate-x-0 w-64 lg:w-64":"-translate-x-full lg:translate-x-0 lg:w-16"}
        `,children:s.jsxs("div",{className:"flex flex-col min-h-screen flex-1 min-w-0 w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 lg:border-0 shrink-0",children:[e?s.jsxs(ae,{to:"/",className:"flex items-center gap-3 min-w-0",onClick:N=>{N.stopPropagation(),t(!1)},children:[s.jsx("img",{src:mf,alt:"DaingGrader",className:"h-10 w-10 object-contain shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-lg font-semibold truncate",children:"DaingGrader"}),s.jsx("div",{className:"text-xs text-white/70 truncate",children:"Dried Fish Quality Grader"})]})]}):s.jsx(ae,{to:"/",className:"mx-auto flex items-center justify-center w-full py-3 rounded-lg transition-all duration-200 hover:bg-white/10 hover:shadow-md",onClick:N=>{N.stopPropagation(),t(!0)},title:"DaingGrader - click to open menu",children:s.jsx("img",{src:mf,alt:"DaingGrader",className:"h-10 w-10 object-contain"})}),s.jsx("button",{className:"p-2 rounded-lg hover:bg-sidebar-hover transition-colors lg:hidden shrink-0",onClick:N=>{N.stopPropagation(),t(!1)},"aria-label":"Close menu",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),e&&s.jsx("nav",{className:"flex-1 overflow-y-auto py-4 overflow-x-hidden",onClick:N=>N.stopPropagation(),children:s.jsxs("div",{className:"px-3 space-y-0.5",children:[E.map(({to:N,label:_,icon:I})=>s.jsxs(Lt,{to:N,onClick:()=>t(!1),className:({isActive:L})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200
                      ${L?"bg-sidebar-active-bg text-white border-l-2 border-sidebar-active":"text-white/90 hover:bg-sidebar-hover hover:text-white"}`,children:[s.jsx(I,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{children:_})]},N)),w.length>0&&s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{onClick:()=>k("market"),className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white",children:[s.jsx(zr,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"Market"}),s.jsx(ct,{className:`w-4 h-4 transition-transform duration-200 ${i?"":"-rotate-90"}`})]}),i&&s.jsx("div",{className:"mt-1 ml-4 space-y-0.5 border-l border-white/20 pl-3",children:w.map(({to:N,label:_,icon:I})=>s.jsxs(Lt,{to:N,onClick:()=>t(!1),className:({isActive:L})=>`flex items-center gap-2 px-2 py-2 rounded-lg text-sm transition-all duration-200
                              ${L?"bg-sidebar-active-bg text-white":"text-white/85 hover:bg-sidebar-hover"}`,children:[s.jsx(I,{className:"w-4 h-4 shrink-0 opacity-90"}),_]},N))})]}),s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{onClick:()=>k("info"),className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white",children:[s.jsx(vu,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"Information"}),s.jsx(ct,{className:`w-4 h-4 transition-transform duration-200 ${c?"":"-rotate-90"}`})]}),c&&s.jsxs("div",{className:"mt-1 ml-4 space-y-1",children:[s.jsxs("button",{onClick:()=>k("aboutDaing"),className:"flex items-center gap-2 w-full px-2 py-2 rounded-lg text-sm transition-all duration-200 text-white/85 hover:bg-sidebar-hover",children:[s.jsx(Pk,{className:"w-4 h-4 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"About Daing"}),s.jsx(ct,{className:`w-3 h-3 transition-transform duration-200 ${p?"":"-rotate-90"}`})]}),p&&s.jsx("div",{className:"ml-4 space-y-0.5 border-l border-white/20 pl-3",children:Xk.map(({to:N,label:_})=>s.jsx(Lt,{to:N,onClick:()=>t(!1),className:({isActive:I})=>`block px-2 py-1.5 rounded-lg text-sm transition-all duration-200
                                ${I?"bg-sidebar-active-bg text-white":"text-white/85 hover:bg-sidebar-hover"}`,children:_},N))}),s.jsxs("button",{onClick:()=>k("publications"),className:"flex items-center gap-2 w-full px-2 py-2 rounded-lg text-sm transition-all duration-200 text-white/85 hover:bg-sidebar-hover",children:[s.jsx(Qn,{className:"w-4 h-4 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"Publications"}),s.jsx(ct,{className:`w-3 h-3 transition-transform duration-200 ${v?"":"-rotate-90"}`})]}),v&&s.jsx("div",{className:"ml-4 space-y-0.5 border-l border-white/20 pl-3",children:Zk.map(({to:N,label:_})=>s.jsx(Lt,{to:N,onClick:()=>t(!1),className:({isActive:I})=>`block px-2 py-1.5 rounded-lg text-sm transition-all duration-200
                                ${I?"bg-sidebar-active-bg text-white":"text-white/85 hover:bg-sidebar-hover"}`,children:_},N))})]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{onClick:()=>k("support"),className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white",children:[s.jsx(cf,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"Support"}),s.jsx(ct,{className:`w-4 h-4 transition-transform duration-200 ${m?"":"-rotate-90"}`})]}),m&&s.jsx("div",{className:"mt-1 ml-4 space-y-0.5 border-l border-white/20 pl-3",children:eC.map(({to:N,label:_,icon:I})=>s.jsxs(Lt,{to:N,onClick:()=>t(!1),className:({isActive:L})=>`flex items-center gap-2 px-2 py-2 rounded-lg text-sm transition-all duration-200
                            ${L?"bg-sidebar-active-bg text-white":"text-white/85 hover:bg-sidebar-hover"}`,children:[s.jsx(I,{className:"w-4 h-4 shrink-0 opacity-90"}),_]},N))})]}),S==="seller"&&s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{onClick:()=>k("sellerPanel"),className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white",children:[s.jsx(No,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"Seller Panel"}),s.jsx(ct,{className:`w-4 h-4 transition-transform duration-200 ${h?"":"-rotate-90"}`})]}),h&&s.jsx("div",{className:"mt-1 ml-4 space-y-0.5 border-l border-white/20 pl-3",children:tC.map(({to:N,label:_,icon:I})=>s.jsxs(Lt,{to:N,onClick:()=>t(!1),className:({isActive:L})=>`flex items-center gap-2 px-2 py-2 rounded-lg text-sm transition-all duration-200
                              ${L?"bg-sidebar-active-bg text-white":"text-white/85 hover:bg-sidebar-hover"}`,children:[s.jsx(I,{className:"w-4 h-4 shrink-0 opacity-90"}),_]},N))})]}),S==="admin"&&s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{onClick:()=>k("management"),className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white",children:[s.jsx(df,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{className:"flex-1 text-left",children:"Management"}),s.jsx(ct,{className:`w-4 h-4 transition-transform duration-200 ${j?"":"-rotate-90"}`})]}),j&&s.jsx("div",{className:"mt-1 ml-4 space-y-0.5 border-l border-white/20 pl-3",children:sC.map(({to:N,label:_})=>s.jsx(Lt,{to:N,onClick:()=>t(!1),className:({isActive:I})=>`flex items-center gap-2 px-2 py-2 rounded-lg text-sm transition-all duration-200
                              ${I?"bg-sidebar-active-bg text-white":"text-white/85 hover:bg-sidebar-hover"}`,children:_},N))})]})]})}),!e&&s.jsxs("nav",{className:"hidden lg:flex flex-1 flex-col items-center py-4 gap-1",children:[E.map(({to:N,label:_,icon:I})=>s.jsx(ae,{to:N,onClick:L=>{L.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg text-sm font-medium transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white hover:scale-110",title:_,children:s.jsx(I,{className:"w-5 h-5 shrink-0 opacity-90"})},N)),w.length>0&&s.jsx(ae,{to:"/catalog",onClick:N=>{N.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white hover:scale-110",title:"Market",children:s.jsx(zr,{className:"w-5 h-5 shrink-0 opacity-90"})}),s.jsx(ae,{to:"/about-daing/espada",onClick:N=>{N.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white hover:scale-110",title:"Information",children:s.jsx(vu,{className:"w-5 h-5 shrink-0 opacity-90"})}),s.jsx(ae,{to:"/about",onClick:N=>{N.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white hover:scale-110",title:"Support",children:s.jsx(cf,{className:"w-5 h-5 shrink-0 opacity-90"})}),S==="seller"&&s.jsx(ae,{to:"/seller/dashboard",onClick:N=>{N.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white hover:scale-110",title:"Seller Panel",children:s.jsx(No,{className:"w-5 h-5 shrink-0 opacity-90"})}),S==="admin"&&s.jsx(ae,{to:"/admin/users",onClick:N=>{N.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200 text-white/90 hover:bg-sidebar-hover hover:text-white hover:scale-110",title:"Management",children:s.jsx(df,{className:"w-5 h-5 shrink-0 opacity-90"})})]}),s.jsx("div",{className:"border-t border-white/10 pt-3 mt-auto shrink-0",onClick:N=>N.stopPropagation(),children:e?r?s.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-3 w-full px-3 py-2.5 rounded-lg text-sm font-medium text-white/90 hover:bg-sidebar-hover hover:text-white transition-all duration-200",children:[s.jsx(ju,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{children:"Logout"})]}):s.jsxs(Lt,{to:"/login",onClick:()=>t(!1),className:({isActive:N})=>`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200
                    ${N?"bg-sidebar-active-bg text-white":"text-white/90 hover:bg-sidebar-hover hover:text-white"}`,children:[s.jsx(yu,{className:"w-5 h-5 shrink-0 opacity-90"}),s.jsx("span",{children:"Login"})]}):r?s.jsx("button",{type:"button",onClick:D,className:"flex items-center justify-center w-10 h-10 rounded-lg text-white/90 hover:bg-sidebar-hover hover:text-white transition-all duration-200 mx-auto",title:"Logout",children:s.jsx(ju,{className:"w-5 h-5 shrink-0 opacity-90"})}):s.jsx(ae,{to:"/login",onClick:N=>{N.stopPropagation(),t(!0)},className:"flex items-center justify-center w-10 h-10 rounded-lg text-white/90 hover:bg-sidebar-hover hover:text-white transition-all duration-200 mx-auto",title:"Login",children:s.jsx(yu,{className:"w-5 h-5 shrink-0 opacity-90"})})})]})}),s.jsx("button",{className:"fixed top-4 left-4 z-30 p-2 rounded-lg bg-sidebar text-white shadow-soft lg:hidden",onClick:()=>t(!0),"aria-label":"Open menu",children:s.jsx($k,{className:"w-5 h-5"})})]})}function nC(){var o,c;const{isLoggedIn:e,user:t,logout:r}=rt(),{showToast:n}=ht(),a=mt(),l=(t==null?void 0:t.role)??"user",i=d=>{d.preventDefault(),n("Logging out..."),r(),a("/")};return s.jsx("header",{className:"bg-surface border-b border-slate-200/80 sticky top-0 z-20 shadow-soft",children:s.jsxs("div",{className:"flex items-end justify-between h-14 pl-14 pr-4 lg:pl-6 pb-1",children:[s.jsx("a",{href:"https://www.tup.edu.ph",target:"_blank",rel:"noopener noreferrer",className:"flex items-end shrink-0",title:"Visit TUP website",children:s.jsx("img",{src:"/assets/logos/tup-t-logo.png",alt:"TUP-T",className:"h-10 w-auto"})}),s.jsxs(ae,{to:"/",className:"flex items-end gap-4 shrink-0 ml-4",children:[s.jsx("img",{src:"/assets/logos/dainggrader-logo.png",alt:"DaingGrader",className:"h-10 w-auto"}),s.jsxs("div",{className:"hidden sm:block border-l border-slate-300 pl-4",children:[s.jsx("div",{className:"text-lg font-semibold text-slate-800",children:"DaingGrader"}),s.jsx("div",{className:"text-xs text-slate-500",children:"Dried Fish Quality Grader"})]})]}),s.jsx("div",{className:"flex-1 min-w-0"}),s.jsxs("div",{className:"flex items-center gap-2",children:[e?s.jsxs(s.Fragment,{children:[l==="user"&&s.jsxs(s.Fragment,{children:[s.jsxs(Lt,{to:"/wishlist",className:({isActive:d})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border
                      ${d?"text-white bg-blue-600 border-blue-600 shadow-md":"text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,title:"Wishlist",children:[s.jsx(Je,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Wishlist"})]}),s.jsxs(Lt,{to:"/orders",className:({isActive:d})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border
                      ${d?"text-white bg-blue-600 border-blue-600 shadow-md":"text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,title:"My Orders",children:[s.jsx(Br,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Orders"})]}),s.jsxs(Lt,{to:"/cart",className:({isActive:d})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border
                      ${d?"text-white bg-blue-600 border-blue-600 shadow-md":"text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,title:"Shopping cart",children:[s.jsx(lt,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Cart"})]})]}),s.jsxs("button",{type:"button",onClick:i,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm",children:[s.jsx(ju,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(Lt,{to:"/login",className:({isActive:d})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border
                  ${d?"text-white bg-blue-600 border-blue-600 shadow-md":"text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,children:[s.jsx(yu,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Login"})]}),s.jsxs(Lt,{to:"/login",className:({isActive:d})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border
                  ${d?"text-white bg-blue-600 border-blue-600 shadow-md":"text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,children:[s.jsx(Kk,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Sign Up"})]})]}),s.jsxs(Lt,{to:"/profile",className:({isActive:d})=>`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 border
              ${d?"text-white bg-blue-600 border-blue-600 shadow-md":"text-slate-600 border-slate-200 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 hover:shadow-sm"}`,children:[s.jsx(bs,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e&&(t==null?void 0:t.role)&&t.role!=="user"&&s.jsx("span",{className:"hidden sm:inline-flex items-center px-2.5 py-1 border border-black/20 bg-white text-xs font-semibold uppercase tracking-wide shadow-sm",children:t.role==="admin"?s.jsx("span",{className:"text-red-600",children:"Admin"}):s.jsx("span",{className:"text-blue-600",children:"Seller"})}),s.jsx("div",{className:"w-9 h-9 rounded-full bg-primary/20 text-primary flex items-center justify-center font-semibold text-sm border border-primary/30 overflow-hidden flex-shrink-0",title:"User avatar",children:e&&(t!=null&&t.avatar_url)?s.jsx("img",{src:t.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):s.jsx("span",{children:e?((c=(o=t==null?void 0:t.name)==null?void 0:o.charAt(0))==null?void 0:c.toUpperCase())||"U":"?"})})]})]})]})})}function aC(){return s.jsxs("footer",{className:"bg-sidebar text-white mt-auto",children:[s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:"DaingGrader"}),s.jsx("p",{className:"text-sm text-white/70 mt-2",children:"An AI-powered dried fish quality grading platform developed for classification, quality assessment, and dataset management."}),s.jsx("p",{className:"text-sm text-white/70 mt-3",children:"Built as a thesis project at the Technological University of the Philippines - Taguig, our mission is to revolutionize dried fish quality control using machine learning."})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white/90",children:"Quick Links"}),s.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-white/70",children:[s.jsx("li",{children:s.jsx(ae,{to:"/",className:"hover:text-white transition-colors duration-200",children:"Home"})}),s.jsx("li",{children:s.jsx(ae,{to:"/grade",className:"hover:text-white transition-colors duration-200",children:"Grade"})}),s.jsx("li",{children:s.jsx(ae,{to:"/history",className:"hover:text-white transition-colors duration-200",children:"History"})}),s.jsx("li",{children:s.jsx(ae,{to:"/about",className:"hover:text-white transition-colors duration-200",children:"About Us"})}),s.jsx("li",{children:s.jsx(ae,{to:"/contact",className:"hover:text-white transition-colors duration-200",children:"Contact Us"})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-white/90 flex items-center gap-2",children:[s.jsx(jo,{className:"w-4 h-4"}),"About Daing"]}),s.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-white/70",children:[s.jsx("li",{children:s.jsx(ae,{to:"/about-daing/espada",className:"hover:text-white transition-colors duration-200",children:"Espada"})}),s.jsx("li",{children:s.jsx(ae,{to:"/about-daing/danggit",className:"hover:text-white transition-colors duration-200",children:"Danggit"})}),s.jsx("li",{children:s.jsx(ae,{to:"/about-daing/dalagang-bukid",className:"hover:text-white transition-colors duration-200",children:"Dalagang Bukid"})}),s.jsx("li",{children:s.jsx(ae,{to:"/about-daing/flying-fish",className:"hover:text-white transition-colors duration-200",children:"Flying Fish"})}),s.jsx("li",{children:s.jsx(ae,{to:"/about-daing/bisugo",className:"hover:text-white transition-colors duration-200",children:"Bisugo"})})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-white/90",children:"Contact"}),s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-white/70",children:[s.jsx(Ml,{className:"w-4 h-4 shrink-0"}),s.jsx("a",{href:"mailto:shathesisgroup@gmail.com",className:"hover:text-white transition-colors duration-200",children:"shathesisgroup@gmail.com"})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-white/70",children:[s.jsx(fa,{className:"w-4 h-4 shrink-0"}),s.jsx("a",{href:"tel:09611676764",className:"hover:text-white transition-colors duration-200",children:"09611676764"})]}),s.jsxs("div",{className:"mt-3 flex gap-3",children:[s.jsx("a",{href:"#",className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors duration-200","aria-label":"GitHub",children:s.jsx(Wb,{className:"w-4 h-4"})}),s.jsx("a",{href:"#",className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors duration-200","aria-label":"LinkedIn",children:s.jsx(Uk,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"border-t border-white/10 text-center text-sm py-4 text-white/60",children:[" ",new Date().getFullYear()," DaingGrader  Technological University of the Philippines - Taguig"]})]})}const ve=({children:e})=>{const[t,r]=u.useState(!1);return s.jsx("div",{className:"min-h-screen flex flex-col bg-[var(--bg)]",children:s.jsxs("div",{className:"flex flex-1 min-h-0",children:[s.jsx(rC,{open:t,onOpenChange:r}),s.jsxs("div",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ${t?"lg:ml-64":"lg:ml-16"}`,onClick:()=>r(!1),role:"main",children:[s.jsx(nC,{}),s.jsx("main",{className:"flex-1 px-4 py-6 lg:px-6 overflow-x-clip",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:e})}),s.jsx(aC,{})]})]})})},di=[{title:"Daing",description:"Dried fish (daing)  commonly used in Philippine cuisine and grading studies.",placeholderColor:"#dc2626",imageSrc:"/assets/carousel/slide1.jpg"},{title:"Fish Grading",description:"Quality classification and grading criteria for dried fish products.",placeholderColor:"#2563eb",imageSrc:"/assets/carousel/slide2.jpg"},{title:"Dataset",description:"Curated image dataset for training and evaluating grading models.",placeholderColor:"#16a34a",imageSrc:"/assets/carousel/slide3.jpg"},{title:"DaingGrader",description:"Educational system for fish grading and classification.",placeholderColor:"#ca8a04",imageSrc:"/assets/carousel/slide4.jpg"}],lC=5e3;function iC(){const[e,t]=u.useState(0);u.useEffect(()=>{const a=setInterval(()=>{t(l=>(l+1)%di.length)},lC);return()=>clearInterval(a)},[]);const r=a=>t(a),n=di[e];return s.jsxs("div",{className:"relative w-full overflow-hidden",style:{aspectRatio:"1920/600",minHeight:"320px",maxHeight:"70vh"},children:[di.map((a,l)=>s.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{opacity:l===e?1:0,zIndex:l===e?1:0},children:a.imageSrc?s.jsx("img",{src:a.imageSrc,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full",style:{backgroundColor:a.placeholderColor}})},l)),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10 p-6 md:p-8",children:s.jsxs("div",{className:"max-w-3xl bg-slate-900/80 backdrop-blur-sm rounded-lg px-6 py-5 shadow-xl",children:[s.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-white",children:n.title}),s.jsx("p",{className:"text-sm md:text-base text-white/90 mt-2",children:n.description}),s.jsx("div",{className:"flex gap-2 mt-4",children:di.map((a,l)=>s.jsx("button",{onClick:()=>r(l),className:`w-2.5 h-2.5 rounded-full transition-all ${l===e?"bg-white scale-110":"bg-white/50 hover:bg-white/70"}`,"aria-label":`Go to slide ${l+1}`},l))})]})})]})}const Xb=[{id:"for-agg-2024",type:"foreign",title:"Detection of mycotoxin contamination in foods using artificial intelligence: A review",authors:"Aggarwal, A., Mishra, A., Tabassum, N., Kim, Y., & Khan, F.",publication:"Foods",year:"2024",volume:"13(20)",pages:"3339",reference:"Aggarwal A., Mishra A., Tabassum N., Kim Y., & Khan F. (2024). Detection of mycotoxin contamination in foods using artificial intelligence: A review. Foods, 13(20), 3339.",url:"https://www.mdpi.com/2304-8158/13/20/3339"},{id:"for-nawaz-2022",type:"foreign",title:"A comprehensive review on color changes in dried fish products",authors:"Nawaz, A., Xiong, Z., Irshad, S., Xiong, H., Li, Q., & Chen, L.",publication:"Food Chemistry / related color analysis work (as cited in thesis)",year:"2022",reference:"Nawaz A., Xiong Z., Irshad S., Xiong H., Li Q., & Chen L. (2022). Work on CIELAB color parameters and color changes in dried fish, supporting quantitative color analysis for grading systems.",url:"https://doi.org/ (see thesis reference [9])"},{id:"for-liakos-2025",type:"foreign",title:"Machine Learning for Quality Control in the Food Industry: A Review",authors:"Liakos, K. G., Athanasiadis, V., Bozinou, E., & Lalas, S. I.",publication:"Foods",year:"2025",volume:"14(19)",pages:"3424",reference:"Liakos K. G., Athanasiadis V., Bozinou E., & Lalas S. I. (2025). Machine Learning for Quality Control in the Food Industry: A Review. Foods, 14(19), 3424.",url:"https://doi.org/10.3390/foods14193424"},{id:"for-xia-2024",type:"foreign",title:"Early Detection of Surface Mildew in Maize Kernels Using Machine Vision Coupled with Improved YOLOv5 Deep Learning Model",authors:"Xia, Y., Shen, A., Che, T., Liu, W., Kang, J., & Tang, W.",publication:"Applied Sciences",year:"2024",volume:"14(22)",pages:"10489",reference:"Xia Y., Shen A., Che T., Liu W., Kang J., & Tang W. (2024). Early Detection of Surface Mildew in Maize Kernels Using Machine Vision Coupled with Improved YOLOv5 Deep Learning Model. Applied Sciences, 14(22), 10489.",url:"https://www.mdpi.com/2076-3417/14/22/10489"},{id:"for-kumari-2025",type:"foreign",title:"How AI is transforming food safety & quality in 2025",authors:"Kumari, A.",publication:"BCC Research (industry analysis)",year:"2025",reference:"Kumari A. (2025). How AI is transforming food safety & quality in 2025. BCC Research blog post cited as [5] in the thesis.",url:"https://blog.bccresearch.com/how-ai-is-transforming-food-safety-quality-control-in-2025"},{id:"for-bowman-2025",type:"foreign",title:"Top 5 ways AI is revolutionizing food safety inspections",authors:"Bowman, C., & Sammer, H.",publication:"Food Regulation Canada",year:"2025",reference:"Bowman C., & Sammer H. (2025). Top 5 ways AI is revolutionizing food safety inspections. Food Regulation Canada blog cited as [6].",url:"https://www.foodregulationcanada.com/top-5-ways-ai-is-revolutionizing-food-safety-inspections-blog-post/"},{id:"for-dhal-2025",type:"foreign",title:"Leveraging artificial intelligence and advanced food processing techniques for enhanced food safety, quality, and security: A comprehensive review",authors:"Dhal, S. B., & Kar, D.",publication:"Discover Applied Sciences",year:"2025",volume:"7",pages:"75",reference:"Dhal S. B., & Kar D. (2025). Leveraging artificial intelligence and advanced food processing techniques for enhanced food safety, quality, and security: A comprehensive review. Discover Applied Sciences, 7, 75.",url:"https://doi.org/10.1007/s42452-025-06472-w"},{id:"for-jubayer-2021",type:"foreign",title:"YOLOv5-based mold detection on food surfaces",authors:"Jubayer et al.",publication:"Study on using YOLOv5 for mold detection (as cited in thesis, [11])",year:"2021",reference:"Jubayer et al. (2021). Experiments on locating mold on different surfaces of food using YOLOv5, demonstrating faster and more accurate detection than traditional CNNs.",url:"https://doi.org/ (see thesis reference [11])"},{id:"loc-daet-2025",type:"local",title:"Knowledge and Good Manufacturing Practices of Fish Drying Processor in Camarines Sur, Philippines",authors:"Daet, I. P., Bigueja, M. C., & Sales, G. S.",publication:"International Journal of Innovative Science and Research Technology",year:"2025",reference:"Daet I. P., Bigueja M. C., & Sales G. S. (2025). Knowledge and Good Manufacturing Practices of Fish Drying Processor in Camarines Sur, Philippines. International Journal of Innovative Science and Research Technology.",url:"https://doi.org/10.38124/ijisrt/25nov1198"},{id:"loc-rustia-2022",type:"local",title:"Risk profiling of methylmercury in the consumption of dried Tamban (Sardinella lemuru) by the Filipino consuming population",authors:"Rustia, A. S., de Guzman, V. C. L., Salem, A. M. T., Bautista, K. A. D., Villarino, C. B. J., Ledda, W. E., Barrios, E. B., Capanzana, M. V., & Mahoney, D.",publication:"Philippine Journal of Science",year:"2022",volume:"151(1)",pages:"449463",reference:"Rustia A. S., de Guzman V. C. L., Salem A. M. T., Bautista K. A. D., Villarino C. B. J., et al. (2022). Risk profiling of methylmercury in the consumption of dried Tamban (Sardinella lemuru) by the Filipino consuming population. Philippine Journal of Science, 151(1), 449463.",url:"https://philjournalsci.dost.gov.ph/risk-profiling-of-methylmercury-in-the-consumption-of-dried-tamban-sardinella-lemuru-by-the-filipino-consuming-population/"},{id:"loc-glenwood-2024",type:"local",title:"Food Safety Trends in the Philippines",authors:"Glenwood Technologies",publication:"Glenwood Technologies Asia",year:"2024",reference:"Glenwood Technologies (2024). Food Safety Trends in the Philippines. Article emphasizing monitoring environment and hygiene in wet markets.",url:"https://www.glenwood.ph/ (see thesis reference [16])"},{id:"loc-oceana-2023",type:"local",title:"Post-harvest fish loss and the National Sardines Management Plan",authors:"Oceana Philippines",publication:"Oceana Philippines report",year:"2023",reference:"Oceana Philippines (2023). Report on post-harvest fish loss and the National Sardines Management Plan, estimating spoilage rates of fish in the country at 2540%.",url:"https://ph.oceana.org/ (see thesis reference [18])"},{id:"loc-ching-2024",type:"local",title:"Post-harvest fish handling practices of small-scale fisherfolk in Rosario, Cavite",authors:"Ching et al.",publication:"Study on dried fish safety in Rosario, Cavite",year:"2024",reference:"Ching et al. (2024). Study on post-harvest processing of Tuyo (dried Sardinella) in Rosario, Cavite, showing early mold growth due to inadequate hygienic standards.",url:"https://doi.org/ (see thesis reference [20])"},{id:"loc-magallanes-2024",type:"local",title:"Microbial quality of fish products and contact surfaces in Philippine wet markets",authors:"Magallanes & Aguanza",publication:"Local microbiological quality assessment study",year:"2024",reference:"Magallanes & Aguanza (2024). Assessment of microbial quality of fish products and contact surfaces in wet markets in the Philippines, highlighting high microbial counts and cross-contamination risks.",url:"https://doi.org/ (see thesis reference [21])"}];function oC(e){return Xb.filter(t=>t.type===e)}const cC=5,dC=5,uC=6;function mC(){const[e,t]=u.useState([]),[r,n]=u.useState(!0),[a,l]=u.useState([]),[i,o]=u.useState(!0),[c,d]=u.useState([]),[m,f]=u.useState(!0);u.useEffect(()=>{v5().then(v=>t(v.slice(0,cC))).catch(()=>t([])).finally(()=>n(!1)),Db(1,3).then(v=>l(v.posts||[])).catch(()=>l([])).finally(()=>o(!1)),(async()=>{f(!0);try{const v=await Wa({sort:"latest",page:1,page_size:uC});d(v.products||[])}catch{d([])}finally{f(!1)}})()},[]);const p=Xb.slice(0,dC);return s.jsxs("div",{className:"space-y-10",children:[s.jsx("div",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]",children:s.jsx(iC,{})}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 border-b-2 border-primary pb-2 w-fit",children:"Recent Scans"}),r?s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-8",children:[s.jsx(Or,{className:"w-5 h-5 animate-spin"}),"Loading"]}):e.length===0?s.jsx("p",{className:"text-slate-500 py-8",children:"No scans yet. Grade a dried fish image to see your recent scans here."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:e.map(g=>s.jsxs(ae,{to:"/history",className:"group block border border-blue-200 overflow-hidden bg-gradient-to-br from-white to-blue-50 shadow-md hover:shadow-lg hover:border-blue-400 transition-all rounded-lg",children:[s.jsx("div",{className:"aspect-square flex items-center justify-center bg-blue-100",children:s.jsx("img",{src:g.url,alt:`Scan ${g.timestamp}`,className:"w-full h-full object-cover"})}),s.jsx("div",{className:"p-2 bg-gradient-to-b from-white to-blue-50",children:s.jsx("p",{className:"text-xs text-slate-600 truncate",title:new Date(g.timestamp).toLocaleString(),children:new Date(g.timestamp).toLocaleDateString()})})]},g.id))}),s.jsx("p",{className:"text-sm text-slate-500",children:s.jsx(ae,{to:"/history",className:"text-primary font-medium hover:underline",children:"View all history "})})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 border-b-2 border-primary pb-2 w-fit",children:"Featured Publications"}),s.jsx("div",{className:"space-y-0 divide-y divide-slate-200",children:p.map(g=>s.jsxs("div",{className:"py-4 first:pt-0",children:[s.jsx("h3",{className:"font-semibold text-slate-900 text-base",children:g.title}),g.authors&&s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:g.authors}),s.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[g.publication,g.year&&` (${g.year})`]}),s.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary font-medium mt-2 hover:underline",children:["Read more ",s.jsx(Vb,{className:"w-3.5 h-3.5"})]})]},g.id))}),s.jsxs("p",{className:"text-sm text-slate-500",children:[s.jsx(ae,{to:"/publications/local",className:"text-primary font-medium hover:underline",children:"Local publications"}),"  ",s.jsx(ae,{to:"/publications/foreign",className:"text-primary font-medium hover:underline",children:"Foreign publications"})]})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 border-b-2 border-primary pb-2",children:"Community Posts"}),s.jsxs(ae,{to:"/community",className:"flex items-center gap-1 text-primary font-medium hover:underline text-sm",children:["View all ",s.jsx(af,{className:"w-4 h-4"})]})]}),i?s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-8",children:[s.jsx(Or,{className:"w-5 h-5 animate-spin"}),"Loading"]}):a.length===0?s.jsx("p",{className:"text-slate-500 py-8",children:"No community posts yet. Be the first to share!"}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:a.map(g=>s.jsxs(ae,{to:"/community",className:"group block border border-blue-200 overflow-hidden bg-gradient-to-br from-white to-blue-50 shadow-md hover:shadow-lg hover:border-blue-400 transition-all rounded-lg",children:[s.jsx("div",{className:"aspect-video bg-blue-100 overflow-hidden",children:g.images&&g.images.length>0?s.jsx("img",{src:g.images[0],alt:g.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ur,{className:"w-12 h-12 text-slate-300"})})}),s.jsxs("div",{className:"p-4 bg-gradient-to-b from-white to-blue-50",children:[s.jsx("span",{className:"inline-block px-2 py-0.5 bg-blue-600 text-white text-xs font-semibold mb-2 rounded",children:g.category}),s.jsx("h3",{className:"font-semibold text-slate-900 text-sm line-clamp-1",children:g.title}),s.jsx("p",{className:"text-xs text-slate-600 mt-1 line-clamp-2",children:g.description}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-blue-200",children:[s.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:s.jsx("span",{children:g.author_name})}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Je,{className:"w-3.5 h-3.5"})," ",g.likes]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ms,{className:"w-3.5 h-3.5"})," ",g.comments_count]})]})]})]})]},g.id))})]}),s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 border-b-2 border-primary pb-2",children:"Marketplace Products"}),s.jsxs(ae,{to:"/catalog",className:"flex items-center gap-1 text-primary font-medium hover:underline text-sm",children:["View all ",s.jsx(af,{className:"w-4 h-4"})]})]}),m?s.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-8",children:[s.jsx(Or,{className:"w-5 h-5 animate-spin"}),"Loading products..."]}):c.length===0?s.jsx("p",{className:"text-slate-500 py-8",children:"No products available yet."}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(g=>{var y,j,b,h;const v=((j=(y=g.images)==null?void 0:y[g.main_image_index])==null?void 0:j.url)||((h=(b=g.images)==null?void 0:b[0])==null?void 0:h.url)||"";return s.jsxs(ae,{to:`/catalog/${g.id}`,className:"group block border border-blue-200 overflow-hidden bg-gradient-to-br from-white to-blue-50 shadow-md hover:shadow-lg hover:border-blue-400 transition-all rounded-lg",children:[s.jsx("div",{className:"aspect-square bg-blue-100 overflow-hidden",children:v?s.jsx("img",{src:v,alt:g.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-blue-200",children:s.jsx(zr,{className:"w-16 h-16 text-blue-300"})})}),s.jsxs("div",{className:"p-4 bg-gradient-to-b from-white to-blue-50",children:[s.jsx("h3",{className:"font-semibold text-slate-900 text-sm line-clamp-1",children:g.name}),s.jsxs("p",{className:"text-lg font-bold text-primary mt-1",children:["",g.price.toLocaleString()]}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-blue-200",children:[s.jsx("span",{className:"text-xs text-slate-500",children:g.seller_name||"Marketplace Seller"}),s.jsx("span",{className:"text-xs text-blue-600 font-medium",children:g.stock_qty>0?"In stock":"Out of stock"})]})]})]},g.id)})})]})]})}function hC({onSearchChange:e,onFilterChange:t,showAnnotations:r,onToggleAnnotations:n,viewMode:a,onViewModeChange:l,selectedCount:i}){const[o,c]=u.useState(""),[d,m]=u.useState({filename:"",split:"",classes:"",tags:"",sortBy:"newest"}),f=g=>{const v=g.target.value;c(v),e==null||e(v)},p=(g,v)=>{const y={...d,[g]:v};m(y),t==null||t(y)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search images",value:o,onChange:f,className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 transition-all"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("input",{type:"text",placeholder:"Filter by filename",value:d.filename,onChange:g=>p("filename",g.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 text-sm"}),s.jsxs("select",{value:d.split,onChange:g=>p("split",g.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 text-sm bg-white",children:[s.jsx("option",{value:"",children:"Split"}),s.jsx("option",{value:"train",children:"Train"}),s.jsx("option",{value:"val",children:"Validation"}),s.jsx("option",{value:"test",children:"Test"})]}),s.jsxs("select",{value:d.classes,onChange:g=>p("classes",g.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 text-sm bg-white",children:[s.jsx("option",{value:"",children:"Classes"}),s.jsx("option",{value:"danggit",children:"Danggit"}),s.jsx("option",{value:"tuyo",children:"Tuyo"}),s.jsx("option",{value:"daing",children:"Daing"})]}),s.jsxs("select",{value:d.tags,onChange:g=>p("tags",g.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 text-sm bg-white",children:[s.jsx("option",{value:"",children:"Tags"}),s.jsx("option",{value:"fresh",children:"Fresh"}),s.jsx("option",{value:"dried",children:"Dried"}),s.jsx("option",{value:"graded",children:"Graded"})]}),s.jsxs("select",{value:d.sortBy,onChange:g=>p("sortBy",g.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500 text-sm bg-white",children:[s.jsx("option",{value:"newest",children:"Sort By Newest"}),s.jsx("option",{value:"oldest",children:"Sort By Oldest"}),s.jsx("option",{value:"name",children:"Sort By Name"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:[s.jsx(Ur,{className:"w-4 h-4"}),"Search by Image"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i>0,onChange:g=>{const v=new CustomEvent("selectAll",{detail:g.target.checked});window.dispatchEvent(v)},className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),s.jsxs("span",{className:"text-sm text-slate-600",children:[i," images selected"]})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",checked:r,onChange:n,className:"sr-only"}),s.jsx("div",{className:`w-11 h-6 rounded-full transition-colors duration-200 ${r?"bg-purple-600":"bg-slate-300"}`,children:s.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform duration-200 ${r?"translate-x-5":"translate-x-0.5"} mt-0.5`})})]}),s.jsx("span",{className:"text-sm text-slate-600",children:"Show annotations"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 border border-slate-200 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>l("list"),className:`p-1.5 rounded transition-colors ${a==="list"?"bg-purple-100 text-purple-600":"text-slate-400 hover:text-slate-600"}`,children:s.jsx(Kb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>l("grid"),className:`p-1.5 rounded transition-colors ${a==="grid"?"bg-purple-100 text-purple-600":"text-slate-400 hover:text-slate-600"}`,children:s.jsx(qb,{className:"w-4 h-4"})})]})]})]})}function xC({images:e,showAnnotations:t,selectedIds:r,onSelect:n,onImageClick:a}){const[l,i]=u.useState(null);return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:e.map(o=>{var m;const c=r.has(o.id),d=l===o.id;return s.jsxs("div",{className:"group relative bg-white rounded-lg border border-slate-200 overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-[1.02] hover:border-purple-300",onMouseEnter:()=>i(o.id),onMouseLeave:()=>i(null),onClick:()=>a==null?void 0:a(o.id),children:[s.jsx("div",{className:"absolute top-2 left-2 z-10",children:s.jsx("input",{type:"checkbox",checked:c,onChange:f=>{f.stopPropagation(),n(o.id,f.target.checked)},className:"w-5 h-5 rounded border-slate-300 text-purple-600 focus:ring-purple-500 cursor-pointer"})}),s.jsxs("div",{className:"relative aspect-square bg-slate-100 overflow-hidden",children:[o.url?s.jsx("img",{src:o.url,alt:o.filename,className:"w-full h-full object-cover transition-all duration-200 group-hover:scale-105 group-hover:shadow-md"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-slate-400",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-lg mx-auto mb-2 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("div",{className:"text-xs",children:"600x400"})]})}),t&&o.hasAnnotations&&s.jsx("div",{className:"absolute inset-2 border-2 border-orange-500 rounded pointer-events-none",children:(m=o.annotations)==null?void 0:m.map((f,p)=>s.jsx("div",{className:"absolute border-2 border-orange-500 rounded",style:{left:`${f.x}%`,top:`${f.y}%`,width:`${f.width}%`,height:`${f.height}%`}},p))}),o.hasAnnotations&&s.jsx("div",{className:"absolute bottom-2 left-2 w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center shadow-sm",children:s.jsx(bs,{className:"w-3 h-3 text-white"})}),d&&s.jsx("div",{className:"absolute inset-0 bg-black/10 flex items-center justify-center",children:s.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-3 py-1.5 rounded-lg text-xs font-medium text-slate-700",children:"View Details"})})]}),s.jsx("div",{className:"p-2",children:s.jsx("div",{className:"text-xs text-slate-600 truncate font-mono",children:o.filename})})]},o.id)})})}const Cn=Array.from({length:50},(e,t)=>({id:`img-${t+1}`,filename:`PXL_20260125_163309686_${String(t+1).padStart(3,"0")}.jpg`,url:`/assets/dataset/img-${t+1}.jpg`,hasAnnotations:t%3!==0,annotations:t%3!==0?[{x:10,y:10,width:30,height:40},...t%5===0?[{x:50,y:20,width:25,height:35}]:[]]:void 0,category:["Danggit","Tuyo","Daing","Bagoong","Other"][t%5],dimensions:{width:600,height:400},dateAdded:`2025-${String(t%12+1).padStart(2,"0")}-${String(t%28+1).padStart(2,"0")}`,description:`Sample image ${t+1} from the DaingGrader dataset for fish grading classification.`}));function fC(e){return Cn.find(t=>t.id===e)}function pC(){const e=mt(),[t,r]=u.useState(!0),[n,a]=u.useState("grid"),[l,i]=u.useState(new Set),[o,c]=u.useState(1),d=50,m=(b,h)=>{const x=new Set(l);h?x.add(b):x.delete(b),i(x)},f=(o-1)*d,p=f+d,g=Cn.slice(f,p),v=Math.ceil(Cn.length/d),y=b=>{i(b?new Set(g.map(h=>h.id)):new Set)};Rs.useEffect(()=>{const b=h=>y(h.detail);return window.addEventListener("selectAll",b),()=>window.removeEventListener("selectAll",b)},[o,g.length]);const j=b=>{e(`/dataset/${b}`)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"Dataset"}),s.jsxs("p",{className:"text-sm text-slate-500",children:[Cn.length," images"]})]}),s.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-card",children:s.jsx(hC,{showAnnotations:t,onToggleAnnotations:()=>r(!t),viewMode:n,onViewModeChange:a,selectedCount:l.size})}),s.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-card",children:n==="grid"?s.jsx(xC,{images:g,showAnnotations:t,selectedIds:l,onSelect:m,onImageClick:j}):s.jsx("div",{className:"text-center py-12 text-slate-400",children:"List view coming soon."})}),s.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border border-slate-200 px-6 py-4 shadow-card",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Images per page:"}),s.jsxs("select",{value:d,className:"px-2 py-1 border border-slate-200 rounded text-sm focus:outline-none focus:ring-2 focus:ring-primary/20",children:[s.jsx("option",{value:25,children:"25"}),s.jsx("option",{value:50,children:"50"}),s.jsx("option",{value:100,children:"100"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>c(b=>Math.max(1,b-1)),disabled:o===1,className:"px-3 py-1.5 border border-slate-200 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:"<"}),s.jsxs("span",{className:"text-sm text-slate-600 px-2",children:[f+1,"-",Math.min(p,Cn.length)," of ",Cn.length]}),s.jsx("button",{onClick:()=>c(b=>Math.min(v,b+1)),disabled:o===v,className:"px-3 py-1.5 border border-slate-200 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:">"})]})]})]})}function gC(){var n;const{id:e}=Nl(),t=mt(),r=e?fC(e):void 0;return r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("button",{onClick:()=>t("/dataset"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors",children:[s.jsx(sr,{className:"w-4 h-4"}),"Back to Dataset"]}),s.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-card overflow-hidden",children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 p-6",children:[s.jsxs("div",{className:"relative aspect-square bg-slate-100 rounded-lg overflow-hidden",children:[r.url?s.jsx("img",{src:r.url,alt:r.filename,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-slate-200 rounded-lg mx-auto mb-2 flex items-center justify-center",children:s.jsx("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("span",{className:"text-sm",children:"Image placeholder"})]})}),r.hasAnnotations&&((n=r.annotations)==null?void 0:n.length)&&s.jsx("div",{className:"absolute inset-2 border-2 border-orange-500 rounded pointer-events-none"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 truncate",title:r.filename,children:r.filename}),s.jsxs("dl",{className:"space-y-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-slate-500 font-medium",children:"Category / Class"}),s.jsx("dd",{className:"text-slate-900 mt-0.5",children:r.category??""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-slate-500 font-medium",children:"Dimensions"}),s.jsx("dd",{className:"text-slate-900 mt-0.5",children:r.dimensions?`${r.dimensions.width}  ${r.dimensions.height} px`:""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-slate-500 font-medium",children:"Date added"}),s.jsx("dd",{className:"text-slate-900 mt-0.5",children:r.dateAdded??""})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-slate-500 font-medium",children:"Annotations"}),s.jsx("dd",{className:"text-slate-900 mt-0.5",children:r.hasAnnotations?"Yes":"No"})]}),r.description&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-slate-500 font-medium",children:"Description"}),s.jsx("dd",{className:"text-slate-900 mt-0.5",children:r.description})]})]})]})]})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:()=>t("/dataset"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[s.jsx(sr,{className:"w-4 h-4"}),"Back to Dataset"]}),s.jsx("p",{className:"text-slate-500",children:"Image not found."})]})}function dt({label:e,error:t,className:r="",...n}){return s.jsxs("div",{className:`flex flex-col ${r}`,children:[e&&s.jsx("label",{className:"text-sm text-gray-700 mb-1",children:e}),s.jsx("input",{className:`px-3 py-2 border border-black rounded-lg bg-white shadow-sm transition-all duration-200
          hover:border-slate-700 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary focus:shadow-md`,...n}),t&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:t})]})}function Nu({label:e,error:t,className:r="",...n}){const[a,l]=u.useState(!1);return s.jsxs("div",{className:`flex flex-col ${r}`,children:[e&&s.jsx("label",{className:"text-sm text-gray-700 mb-1",children:e}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:a?"text":"password",className:`px-3 py-2 pr-10 w-full border border-slate-200 rounded-lg bg-white transition-all duration-200\r
            hover:border-slate-300 hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary focus:shadow-md`,...n}),s.jsx("button",{type:"button",onClick:()=>l(i=>!i),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 rounded-lg text-slate-500 hover:text-slate-700 hover:bg-slate-100 transition-all duration-200","aria-label":a?"Hide password":"Show password",tabIndex:-1,children:a?s.jsx(Ak,{className:"w-4 h-4"}):s.jsx(Nn,{className:"w-4 h-4"})})]}),t&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:t})]})}function kt({variant:e="primary",children:t,className:r="",disabled:n,...a}){const l="px-4 py-2 rounded-md font-medium transition-all duration-200 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98] hover:scale-[1.02] hover:shadow-md",i=e==="primary"?"bg-primary text-white shadow-sm hover:shadow-lg hover:brightness-110 disabled:hover:shadow-sm disabled:hover:brightness-100":e==="outline"?"border border-gray-200 text-gray-700 bg-white hover:bg-gray-50 hover:shadow-md disabled:hover:bg-white disabled:hover:shadow-none":"bg-transparent text-primary disabled:hover:bg-transparent";return s.jsx("button",{className:`${l} ${i} ${r}`,disabled:n,...a,children:t})}function bC(){const e=mt(),{login:t}=rt(),{showToast:r,hideToast:n}=ht(),[a,l]=u.useState(""),[i,o]=u.useState(""),[c,d]=u.useState(!1),[m,f]=u.useState(!1),[p,g]=u.useState(!1),[v,y]=u.useState(null),j=async h=>{var x,S,E,w,k,D,q,N,_,I;h.preventDefault(),y(null),f(!0),r("Logging in...");try{const L=await Ys.login(a,i);L.token&&(localStorage.setItem("token",L.token),c&&localStorage.setItem("rememberEmail",a),t(L.token,{id:(x=L.user)==null?void 0:x.id,name:((S=L.user)==null?void 0:S.name)||a.split("@")[0],email:((E=L.user)==null?void 0:E.email)||a,avatar_url:((w=L.user)==null?void 0:w.avatar_url)??null,role:((k=L.user)==null?void 0:k.role)||"user"})),n();const z=((D=L.user)==null?void 0:D.role)||"user";e(z==="admin"?"/admin":z==="seller"?"/seller/dashboard":"/profile")}catch(L){n(),y(((N=(q=L.response)==null?void 0:q.data)==null?void 0:N.detail)||((I=(_=L.response)==null?void 0:_.data)==null?void 0:I.message)||(L==null?void 0:L.message)||"Login failed. Please check your credentials.")}finally{f(!1)}},b=async()=>{var h,x,S,E,w,k,D,q,N,_,I,L;y(null),g(!0),r("Signing in with Google...");try{const z=await Ys.signInWithGoogle();z.token&&(localStorage.setItem("token",z.token),t(z.token,{id:(h=z.user)==null?void 0:h.id,name:((x=z.user)==null?void 0:x.name)||((E=(S=z.user)==null?void 0:S.email)==null?void 0:E.split("@")[0])||"User",email:((w=z.user)==null?void 0:w.email)||"",avatar_url:((k=z.user)==null?void 0:k.avatar_url)??null,role:((D=z.user)==null?void 0:D.role)||"user"})),n();const M=((q=z.user)==null?void 0:q.role)||"user";e(M==="admin"?"/admin":M==="seller"?"/seller/dashboard":"/profile")}catch(z){n(),y(((_=(N=z.response)==null?void 0:N.data)==null?void 0:_.detail)||((L=(I=z.response)==null?void 0:I.data)==null?void 0:L.message)||(z==null?void 0:z.message)||"Google sign-in failed. Please try again.")}finally{g(!1)}};return s.jsxs("form",{onSubmit:j,className:"space-y-4 max-w-md",children:[v&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:v}),s.jsx(dt,{label:"Email",type:"email",value:a,onChange:h=>l(h.target.value),placeholder:"you@univ.edu",required:!0,error:v&&a===""?"Email is required":null}),s.jsx(Nu,{label:"Password",value:i,onChange:h=>o(h.target.value),placeholder:"",required:!0,error:v&&i===""?"Password is required":null}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:h=>d(h.target.checked),className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Remember me"})]}),s.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),s.jsx(kt,{type:"submit",className:"w-full",disabled:m,children:m?"Signing in...":"Sign in"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-slate-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-slate-500",children:"Or continue with"})})]}),s.jsxs(kt,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-3",onClick:b,disabled:p||m,children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),p?"Signing in...":"Sign in with Google"]})]})}function vC(){const e=mt(),{login:t}=rt(),{showToast:r,hideToast:n}=ht(),[a,l]=u.useState(""),[i,o]=u.useState(""),[c,d]=u.useState(""),[m,f]=u.useState(""),[p,g]=u.useState(!1),[v,y]=u.useState(""),[j,b]=u.useState(!1),[h,x]=u.useState(!1),[S,E]=u.useState(null),w=async D=>{var q,N,_,I;if(D.preventDefault(),E(null),c!==m){E("Passwords do not match");return}if(c.length<6){E("Password must be at least 6 characters");return}b(!0),r("Creating account...");try{const L=v.trim()?"admin":p?"seller":"user",z=await Ys.register({name:a,email:i,password:c,role:L,admin_code:v.trim()||void 0});n(),r("Verification email sent. Please verify your email before logging in."),e("/login")}catch(L){n(),E(((N=(q=L.response)==null?void 0:q.data)==null?void 0:N.detail)||((I=(_=L.response)==null?void 0:_.data)==null?void 0:I.message)||(L==null?void 0:L.message)||"Registration failed. Please try again.")}finally{b(!1)}},k=async()=>{var D,q,N,_,I,L,z,M,J,U,C,F;E(null),x(!0),r("Signing in with Google...");try{const B=await Ys.signInWithGoogle();B.token&&(localStorage.setItem("token",B.token),t(B.token,{id:(D=B.user)==null?void 0:D.id,name:((q=B.user)==null?void 0:q.name)||((_=(N=B.user)==null?void 0:N.email)==null?void 0:_.split("@")[0])||"User",email:((I=B.user)==null?void 0:I.email)||"",avatar_url:((L=B.user)==null?void 0:L.avatar_url)??null,role:((z=B.user)==null?void 0:z.role)||"user"})),n();const Q=((M=B.user)==null?void 0:M.role)||"user";e(Q==="admin"?"/admin":Q==="seller"?"/seller/dashboard":"/profile")}catch(B){n(),E(((U=(J=B.response)==null?void 0:J.data)==null?void 0:U.detail)||((F=(C=B.response)==null?void 0:C.data)==null?void 0:F.message)||(B==null?void 0:B.message)||"Google sign-in failed. Please try again.")}finally{x(!1)}};return s.jsxs("form",{onSubmit:w,className:"space-y-4 max-w-md",children:[S&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:S}),s.jsx(dt,{label:"Full name",value:a,onChange:D=>l(D.target.value),placeholder:"John Doe",required:!0,error:S&&a===""?"Name is required":null}),s.jsx(dt,{label:"Email",type:"email",value:i,onChange:D=>o(D.target.value),placeholder:"you@univ.edu",required:!0,error:S&&i===""?"Email is required":null}),s.jsx(Nu,{label:"Password",value:c,onChange:D=>d(D.target.value),placeholder:"",required:!0,error:S&&c===""?"Password is required":null}),s.jsx(Nu,{label:"Confirm Password",value:m,onChange:D=>f(D.target.value),placeholder:"",required:!0,error:S&&m===""?"Please confirm your password":null}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:D=>{g(D.target.checked),D.target.checked&&y("")},className:"w-4 h-4 rounded border-slate-300 text-primary focus:ring-primary"}),"Register as Seller"]}),!p&&s.jsx(dt,{label:"Admin Code (admins only)",type:"password",value:v,onChange:D=>y(D.target.value),placeholder:"Enter admin code if applicable"}),s.jsx(kt,{type:"submit",className:"w-full",disabled:j,children:j?"Creating account...":"Create account"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-slate-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-slate-500",children:"Or continue with"})})]}),s.jsxs(kt,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-3",onClick:k,disabled:h||j,children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),h?"Signing in...":"Sign in with Google"]})]})}function we({title:e,subtitle:t,backgroundImage:r}){return s.jsxs("div",{className:"relative w-screen left-1/2 -translate-x-1/2 overflow-hidden mb-8",style:{minHeight:"180px"},children:[r&&s.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${r})`,opacity:.65}}),!r&&s.jsx("div",{className:"absolute inset-0 bg-slate-700",style:{opacity:.9}}),s.jsx("div",{className:"absolute inset-0 bg-slate-900/35"}),s.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-[180px] p-8",children:s.jsxs("div",{className:"bg-black/25 backdrop-blur-sm rounded-xl px-8 py-6 shadow-xl text-center max-w-2xl transition-all duration-300 hover:bg-black/35 hover:shadow-2xl",style:{boxShadow:"0 4px 24px rgba(0,0,0,0.2)"},children:[s.jsx("h1",{className:"text-2xl md:text-4xl font-display font-semibold text-white tracking-tight",children:e}),t&&s.jsx("p",{className:"text-slate-200 mt-2 text-sm md:text-base font-sans",children:t})]})})]})}function yC(){const[e,t]=u.useState("login");return s.jsxs("div",{className:"space-y-8",children:[s.jsx(we,{title:e==="login"?"Sign in":"Create account",subtitle:"Academic access to DaingGrader",backgroundImage:"/assets/page-hero/login.jpg"}),s.jsxs("div",{className:"flex items-start gap-12",children:[s.jsxs("div",{className:"w-full max-w-xl card transition-all duration-200 hover:shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:e==="login"?"Sign in":"Create account"}),s.jsx("div",{className:"text-sm text-muted",children:"Academic access"})]}),e==="login"?s.jsx(bC,{}):s.jsx(vC,{}),s.jsx("div",{className:"mt-4 text-sm text-muted",children:e==="login"?s.jsxs("span",{children:["Don't have an account? ",s.jsx("button",{className:"text-primary",onClick:()=>t("register"),children:"Register"})]}):s.jsxs("span",{children:["Already have an account? ",s.jsx("button",{className:"text-primary",onClick:()=>t("login"),children:"Sign in"})]})})]}),s.jsx("div",{className:"hidden lg:block w-96",children:s.jsxs("div",{className:"card transition-all duration-200 hover:shadow-lg",children:[s.jsx("h3",{className:"font-semibold",children:"Why join?"}),s.jsx("p",{className:"text-sm text-muted mt-2",children:"Access dataset, contribute images, and view analytics for research."}),s.jsxs("div",{className:"relative mt-4 rounded-md overflow-hidden bg-slate-100",style:{aspectRatio:"4/3",minHeight:200},children:[s.jsx("img",{src:"/assets/login/why-join.png",alt:"Why join DaingGrader",className:"absolute inset-0 w-full h-full object-cover",onError:r=>{var a;const n=r.target;n.style.display="none",(a=n.nextElementSibling)==null||a.classList.remove("hidden")}}),s.jsxs("div",{className:"hidden absolute inset-0 flex items-center justify-center text-slate-400 text-sm p-4 text-center",children:["Add ",s.jsx("code",{className:"mx-1",children:"public/assets/login/why-join.jpg"})," (suggested 800600)"]})]})]})})]})]})}const jC=e=>{switch(e){case"comment":return s.jsx(So,{className:"w-4 h-4"});case"add_to_cart":return s.jsx(lt,{className:"w-4 h-4"});case"order":return s.jsx(ye,{className:"w-4 h-4"});case"like_post":return s.jsx(Je,{className:"w-4 h-4"});case"create_post":return s.jsx(Bk,{className:"w-4 h-4"});case"delete_post":return s.jsx(Wt,{className:"w-4 h-4"});case"edit_post":return s.jsx(Tk,{className:"w-4 h-4"});default:return null}},wC=e=>{switch(e){case"comment":return"text-blue-600 bg-blue-50";case"add_to_cart":return"text-orange-600 bg-orange-50";case"order":return"text-green-600 bg-green-50";case"like_post":return"text-red-600 bg-red-50";case"create_post":return"text-purple-600 bg-purple-50";case"delete_post":return"text-red-600 bg-red-50";case"edit_post":return"text-yellow-600 bg-yellow-50";default:return"text-slate-600 bg-slate-50"}},Kc=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});function NC({onSubmit:e}){const[t,r]=u.useState(""),[n,a]=u.useState(""),[l,i]=u.useState(""),[o,c]=u.useState(null),d=m=>{if(m.preventDefault(),c(null),n!==l){c("New passwords do not match");return}if(n.length<6){c("Password must be at least 6 characters");return}e(t,n),r(""),a(""),i("")};return s.jsxs("form",{onSubmit:d,className:"space-y-3",children:[o&&s.jsx("div",{className:"bg-red-50 border border-red-300 text-red-700 px-4 py-2 rounded-lg text-sm shadow-sm",children:o}),s.jsx(dt,{label:"Current Password",type:"password",value:t,onChange:m=>r(m.target.value),placeholder:"",required:!0}),s.jsx(dt,{label:"New Password",type:"password",value:n,onChange:m=>a(m.target.value),placeholder:"",required:!0}),s.jsx(dt,{label:"Confirm New Password",type:"password",value:l,onChange:m=>i(m.target.value),placeholder:"",required:!0}),s.jsx(kt,{type:"submit",variant:"outline",className:"cursor-pointer",children:"Update Password"})]})}function SC(){const{setUser:e,isLoggedIn:t}=rt(),{showToast:r,hideToast:n}=ht(),[a,l]=u.useState({full_name:"",phone:"",email:"",city:"",street_address:"",province:"",postal_code:"",gender:""}),[i,o]=u.useState(!0),[c,d]=u.useState(!1),[m,f]=u.useState(!1),[p,g]=u.useState(!1),[v,y]=u.useState(null),[j,b]=u.useState({}),[h,x]=u.useState(1),[S,E]=u.useState(1),[w,k]=u.useState(1),[D,q]=u.useState(1),[N,_]=u.useState([]),[I,L]=u.useState(0),[z,M]=u.useState(!1),[J,U]=u.useState([]),[C,F]=u.useState(0),[B,Q]=u.useState(!1),[$,O]=u.useState([]),[G,H]=u.useState(0),[V,K]=u.useState(!1),[de,ge]=u.useState([]),[fe,le]=u.useState([]),[Ie,ue]=u.useState(!1),[Y,se]=u.useState(!1),be=u.useRef(null),Re=5,T=3,A=3,re=5,oe=Math.max(1,Math.ceil(I/Re)),Se=Math.max(1,Math.ceil(C/T)),me=Math.max(1,Math.ceil(G/A)),Le=Math.max(1,Math.ceil(de.length/re)),Me=(D-1)*re,it=de.slice(Me,Me+re),gt=async()=>{try{const Z=await Ys.getCurrentUser();l({id:Z.id,full_name:Z.full_name||Z.name||"",phone:Z.phone||"",email:Z.email||"",city:Z.city||"",street_address:Z.street_address||"",province:Z.province||"",postal_code:Z.postal_code||"",gender:Z.gender||"",avatar_url:Z.avatar_url??null,role:Z.role??"user"})}catch{l({full_name:"User",phone:"",email:"user@example.com",city:"",street_address:"",province:"",postal_code:"",gender:"",role:"user"})}finally{o(!1)}};u.useEffect(()=>{gt()},[]);const At=()=>{const Z={},_e=(a.full_name||"").trim(),Fe=(a.email||"").trim().toLowerCase(),Ee=(a.phone||"").trim(),Ue=(a.street_address||"").trim(),je=(a.city||"").trim(),Be=(a.province||"").trim();return _e.length<2&&(Z.full_name="Full name must be at least 2 characters."),(!Fe||!/^[^@]+@[^@]+\.[^@]+$/.test(Fe))&&(Z.email="Enter a valid email address."),Ee&&Ee.replace(/\D/g,"").length<10&&(Z.phone="Phone number must be at least 10 digits."),(Ue||je||Be)&&(Ue||(Z.street_address="Street address is required."),je||(Z.city="City is required."),Be||(Z.province="Province is required.")),a.gender&&!["female","male","prefer_not_say"].includes(a.gender)&&(Z.gender="Please select a valid gender."),b(Z),Object.keys(Z).length===0};u.useEffect(()=>{const Z=a.role||"user";if(Z==="admin")return;(async()=>{Q(!0);try{const Fe=Z==="seller"?await Tb(S,T):await Ib(S,T),Ee=(Fe.orders||[]).map(Ue=>{var je;return{id:Ue.id,order_number:Ue.order_number||Ue.id,items:Ue.total_items||((je=Ue.items)==null?void 0:je.length)||0,total:Ue.total||0,status:Ue.status||"processing",date:new Date(Ue.created_at||new Date().toISOString())}});U(Ee),F(Fe.total||0)}catch{U([]),F(0)}finally{Q(!1)}})()},[a.role,S]),u.useEffect(()=>{(async()=>{M(!0);try{const _e=await N5(h,Re),Fe=(_e.entries||[]).map(Ee=>{const Ue=Ee.category==="Community"?"comment":Ee.category==="Order"?"order":"add_to_cart";return{id:Ee.id,type:Ue,description:Ee.action,timestamp:new Date(Ee.timestamp||new Date().toISOString()),details:Ee.details||""}});_(Fe),L(_e.total||0)}catch{_([]),L(0)}finally{M(!1)}})()},[h]),u.useEffect(()=>{a.role==="user"&&(ue(!0),Ob().then(Z=>le(Z.products||[])).catch(()=>le([])).finally(()=>ue(!1)))},[a.role]),u.useEffect(()=>{(async()=>{K(!0);try{const _e=await K5(w,A),Fe=(_e.posts||[]).map(Ee=>({id:Ee.id,title:Ee.title,status:Ee.status,comments:Ee.comments_count||0,date:new Date(Ee.created_at||new Date().toISOString())}));O(Fe),H(_e.total||0)}catch{O([]),H(0)}finally{K(!1)}})()},[w]),u.useEffect(()=>{if((a.role||"user")!=="admin")return;(async()=>{se(!0);try{const Fe=await Cb({limit:200});ge(Fe.entries||[])}catch{ge([])}finally{se(!1)}})()},[a.role]);const Kr=async Z=>{var _e,Fe,Ee,Ue;if(Z.preventDefault(),!At()){r("Please fix the highlighted fields");return}y(null),g(!1),d(!0),r("Updating profile...");try{const je=await Ys.updateProfile({full_name:a.full_name,phone:a.phone,email:a.email,city:a.city,street_address:a.street_address,province:a.province,postal_code:a.postal_code,gender:a.gender});l(Be=>({...Be,full_name:je.full_name??Be.full_name,phone:je.phone??Be.phone,email:je.email??Be.email,city:je.city??Be.city,street_address:je.street_address??Be.street_address,province:je.province??Be.province,postal_code:je.postal_code??Be.postal_code,gender:je.gender??Be.gender})),e(Be=>Be?{...Be,name:je.full_name??Be.name,email:je.email??Be.email}:null),await gt(),n(),g(!0),setTimeout(()=>g(!1),3e3)}catch(je){n(),y(((Fe=(_e=je.response)==null?void 0:_e.data)==null?void 0:Fe.detail)||((Ue=(Ee=je.response)==null?void 0:Ee.data)==null?void 0:Ue.message)||"Failed to update profile")}finally{d(!1)}},Os=async Z=>{var Fe,Ee,Ue,je,Be;const _e=(Fe=Z.target.files)==null?void 0:Fe[0];if(!(!_e||!_e.type.startsWith("image/"))){y(null),f(!0),r("Uploading image...");try{const is=(await Ys.uploadProfileAvatar(_e)).avatar_url||null;l(ws=>({...ws,avatar_url:is})),e(ws=>ws?{...ws,avatar_url:is}:null),n()}catch(ls){n(),y(((Ue=(Ee=ls.response)==null?void 0:Ee.data)==null?void 0:Ue.detail)||((Be=(je=ls.response)==null?void 0:je.data)==null?void 0:Be.message)||"Failed to upload image")}finally{f(!1),be.current&&(be.current.value="")}}},bt=async(Z,_e)=>{try{alert("Password change feature will be available when backend is ready")}catch(Fe){console.error("Password change error:",Fe)}};if(i)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"text-slate-400",children:"Loading profile..."})});if(!t)return s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-300 rounded-lg p-8 text-center shadow-lg",children:[s.jsx(uf,{className:"w-16 h-16 mx-auto text-blue-600 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Login to view your profile"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Sign in to manage your profile, view orders, and track your activity."}),s.jsx(ae,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Login to Continue"})]})})});const Qt=a.role||"user",js=Qt==="seller"?"Orders":"My Orders";return s.jsxs("div",{className:"space-y-6 px-4",children:[s.jsx(we,{title:"Profile",subtitle:"Manage your account details, activity, and preferences.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[280px_1fr_1fr] gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-6 shadow-md",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsxs("label",{className:"relative cursor-pointer group",children:[s.jsx("input",{ref:be,type:"file",accept:"image/*",className:"sr-only",onChange:Os,disabled:m}),s.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-blue-200 overflow-hidden bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-2xl font-bold shadow-lg transition-all duration-200 hover:shadow-xl hover:scale-105 cursor-pointer",children:a.avatar_url?s.jsx("img",{src:a.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):a.full_name.charAt(0).toUpperCase()||"?"}),s.jsx("span",{className:"absolute bottom-0 right-0 w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center shadow border-2 border-white",children:s.jsx(gu,{className:"w-4 h-4"})})]}),s.jsx("h2",{className:"mt-4 text-lg font-semibold text-slate-900",children:a.full_name||"User"}),s.jsxs("p",{className:"text-xs text-slate-500 capitalize",children:[Qt," account"]}),s.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ml,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"truncate",children:a.email})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fa,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{children:a.phone||"No phone set"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"truncate",children:a.city?`${a.city}, ${a.province}`:"No address set"})]})]})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-6 shadow-md",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5 text-blue-600"}),"Change Password"]}),s.jsx(NC,{onSubmit:bt})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("form",{onSubmit:Kr,className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"General Information"}),s.jsx(uf,{className:"w-5 h-5 text-blue-600"})]}),p&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-3 py-2 rounded-lg text-xs mb-3",children:"Profile updated successfully."}),v&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-lg text-xs mb-3",children:v}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(dt,{label:"Full Name",value:a.full_name,onChange:Z=>l({...a,full_name:Z.target.value}),placeholder:"Your full name",error:j.full_name,required:!0}),s.jsx(dt,{label:"Email",type:"email",value:a.email,onChange:Z=>l({...a,email:Z.target.value}),placeholder:"you@school.edu",error:j.email,required:!0}),s.jsx(dt,{label:"Phone",value:a.phone,onChange:Z=>l({...a,phone:Z.target.value}),placeholder:"+63 9xx xxx xxxx",error:j.phone}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Gender"}),s.jsxs("select",{value:a.gender,onChange:Z=>l({...a,gender:Z.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select gender"}),s.jsx("option",{value:"female",children:"Female"}),s.jsx("option",{value:"male",children:"Male"}),s.jsx("option",{value:"prefer_not_say",children:"Prefer not to say"})]}),j.gender&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:j.gender})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(kt,{type:"submit",disabled:c,className:"flex-1",children:c?"Saving...":"Save Changes"}),s.jsx(kt,{type:"button",variant:"ghost",onClick:()=>gt(),children:"Cancel"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Activity Logs"}),s.jsx(Qn,{className:"w-5 h-5 text-blue-600"})]}),z?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading activity logs..."}):N.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No activity logs yet."}):s.jsx("div",{className:"space-y-3",children:N.map(Z=>s.jsxs("div",{className:"flex gap-3 p-3 border border-slate-200 rounded-lg",children:[s.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${wC(Z.type)}`,children:jC(Z.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:Z.description}),Z.details&&s.jsx("div",{className:"text-xs text-slate-500 mt-1 italic",children:Z.details}),s.jsx("div",{className:"text-xs text-slate-400 mt-1",children:Kc(Z.timestamp)})]})]},Z.id))}),oe>1&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>x(Math.max(1,h-1)),disabled:h===1,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(tt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Prev"})]}),s.jsxs("span",{className:"text-xs text-slate-600",children:["Page ",h," of ",oe]}),s.jsxs("button",{onClick:()=>x(Math.min(oe,h+1)),disabled:h===oe,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"text-xs",children:"Next"}),s.jsx(st,{className:"w-4 h-4"})]})]})]}),Qt==="user"&&s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Wishlisted Products"}),s.jsx(Je,{className:"w-5 h-5 text-blue-600"})]}),Ie?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading wishlist..."}):fe.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No wishlisted products yet."}):s.jsx("div",{className:"space-y-3",children:fe.slice(0,5).map(Z=>{var _e;return s.jsxs("div",{className:"flex gap-3 p-3 border border-slate-200 rounded-lg hover:border-blue-300 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-slate-100 rounded overflow-hidden",children:Z.images&&Z.images.length>0?s.jsx("img",{src:(_e=Z.images[Z.main_image_index||0])==null?void 0:_e.url,alt:Z.name,className:"w-full h-full object-cover"}):s.jsx(ye,{className:"w-full h-full p-2 text-slate-300"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 truncate",children:Z.name}),s.jsx("div",{className:"text-xs text-slate-500",children:Z.category_name}),s.jsxs("div",{className:"text-sm font-semibold text-blue-600 mt-1",children:["",Z.price.toLocaleString()]})]})]},Z.id)})}),fe.length>5&&s.jsx("div",{className:"mt-3 text-center",children:s.jsxs(ae,{to:"/wishlist",className:"text-xs text-blue-600 hover:underline",children:["View all ",fe.length," items"]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Address & Billing"}),s.jsx($r,{className:"w-5 h-5 text-blue-600"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(dt,{label:"Street Address",value:a.street_address,onChange:Z=>l({...a,street_address:Z.target.value}),placeholder:"Street, Barangay",error:j.street_address}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(dt,{label:"City",value:a.city,onChange:Z=>l({...a,city:Z.target.value}),placeholder:"City",error:j.city}),s.jsx(dt,{label:"Province",value:a.province,onChange:Z=>l({...a,province:Z.target.value}),placeholder:"Province",error:j.province})]}),s.jsx(dt,{label:"Postal Code",value:a.postal_code,onChange:Z=>l({...a,postal_code:Z.target.value}),placeholder:"ZIP/Postal Code",error:j.postal_code})]}),s.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"This information will be used for checkout and deliveries."})]}),Qt==="admin"?s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Audit Logs"}),s.jsx(Qn,{className:"w-5 h-5 text-blue-600"})]}),Y?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading audit logs..."}):it.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No audit logs available."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-xs text-slate-500 border-b",children:[s.jsx("th",{className:"py-2",children:"Date"}),s.jsx("th",{className:"py-2",children:"Actor"}),s.jsx("th",{className:"py-2",children:"Action"}),s.jsx("th",{className:"py-2",children:"Category"}),s.jsx("th",{className:"py-2",children:"Status"})]})}),s.jsx("tbody",{children:it.map(Z=>s.jsxs("tr",{className:"border-b last:border-0",children:[s.jsx("td",{className:"py-2 text-xs text-slate-500",children:Z.timestamp?new Date(Z.timestamp).toLocaleString():""}),s.jsx("td",{className:"py-2 text-slate-700",children:Z.actor}),s.jsx("td",{className:"py-2 text-slate-700",children:Z.action}),s.jsx("td",{className:"py-2 text-slate-600",children:Z.category}),s.jsx("td",{className:`py-2 text-xs ${Z.status==="success"?"text-green-600":"text-red-600"}`,children:Z.status})]},Z.id))})]})}),Le>1&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>q(Math.max(1,D-1)),disabled:D===1,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(tt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Prev"})]}),s.jsxs("span",{className:"text-xs text-slate-600",children:["Page ",D," of ",Le]}),s.jsxs("button",{onClick:()=>q(Math.min(Le,D+1)),disabled:D===Le,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"text-xs",children:"Next"}),s.jsx(st,{className:"w-4 h-4"})]})]})]}):s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:js}),s.jsx(lt,{className:"w-5 h-5 text-blue-600"})]}),B?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading orders..."}):J.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No orders yet."}):s.jsx("div",{className:"space-y-3",children:J.map(Z=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:Z.order_number}),s.jsxs("div",{className:"text-xs text-slate-500",children:[Z.items," items  ",Kc(Z.date)]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["",Z.total.toFixed(2)]}),s.jsx("div",{className:"text-xs text-slate-500 capitalize",children:Z.status.replace("_"," ")})]})]},Z.id))}),Se>1&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>E(Math.max(1,S-1)),disabled:S===1,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(tt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Prev"})]}),s.jsxs("span",{className:"text-xs text-slate-600",children:["Page ",S," of ",Se]}),s.jsxs("button",{onClick:()=>E(Math.min(Se,S+1)),disabled:S===Se,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"text-xs",children:"Next"}),s.jsx(st,{className:"w-4 h-4"})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl p-5 shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Community Posts"}),s.jsx(So,{className:"w-5 h-5 text-blue-600"})]}),V?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading posts..."}):$.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No community posts yet."}):s.jsx("div",{className:"space-y-3",children:$.map(Z=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:Z.title}),s.jsxs("div",{className:"text-xs text-slate-500",children:[Z.comments," comments  ",Kc(Z.date)]})]}),s.jsx("div",{className:"text-xs text-slate-600 capitalize",children:Z.status})]},Z.id))}),me>1&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-200",children:[s.jsxs("button",{onClick:()=>k(Math.max(1,w-1)),disabled:w===1,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(tt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:"Prev"})]}),s.jsxs("span",{className:"text-xs text-slate-600",children:["Page ",w," of ",me]}),s.jsxs("button",{onClick:()=>k(Math.min(me,w+1)),disabled:w===me,className:"flex items-center gap-1 px-3 py-1 rounded-lg border border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("span",{className:"text-xs",children:"Next"}),s.jsx(st,{className:"w-4 h-4"})]})]})]})]})]})]})}const kC=[{id:"1",name:"Pops V. Madriaga",role:"Research Advisor",bio:"Experienced Research Advisor providing technical guidance and mentoring to students, fostering academic excellence and innovation in IT.",contactNumber:"09611676764",image:"/assets/team/eaad_madriaga_p.jfif",github:"popsmadriaga",githubHandle:"",facebook:"Pops V. Madriaga",facebookHandle:"",instagram:"Pops V. Madriaga",instagramHandle:"",gmail:"Pops@gmail.com",gmailHandle:""},{id:"2",name:"John Neo Bagon",role:"3rd-Year BS in Information Technology Student",bio:"BSIT student focused on turning ideas into functional technology.",age:20,contactNumber:"09611676764",image:"/assets/team/member1.jfif",github:"jxhnxugh",githubHandle:"",facebook:"John Neo Bagon",facebookHandle:"",instagram:"nxogh.13",instagramHandle:"",gmail:"johnbagon4@gmail.com",gmailHandle:""},{id:"3",name:"Ernz Llabore Jumoc",role:"3rd-Year BS in Information Technology Student",bio:"BSIT student exploring code, systems, and real-world tech solutions.",age:20,contactNumber:"09611676764",image:"/assets/team/member2.jpg",github:"ernzjumoc",githubHandle:"",facebook:"Ernz Llabore Jumoc",facebookHandle:"",instagram:"ernzjumoc",instagramHandle:"",gmail:"ernzjumoc@gmail.com",gmailHandle:""},{id:"4",name:"Sharwin John Marbella",role:"3rd-Year BS in Information Technology Student",bio:"BSIT student with a passion for building practical, efficient software solutions.",age:20,contactNumber:"09611676764",image:"/assets/team/member3.png",github:"sharwinjohnmarbella",githubHandle:"",facebook:"Sharwin John Marbella",facebookHandle:"",instagram:"sharwinjohnmarbella",instagramHandle:"",gmail:"sjmarbella@gmail.com",gmailHandle:""}],ui={name:"Technological University of the Philippines - Taguig",description:"A premier state university with recognized excellence in engineering and technology education at par with leading universities in the ASEAN region.",logo:"/assets/logos/tup-t-logo.png"};function CC(){return s.jsxs("div",{className:"space-y-12 bg-gradient-to-b from-blue-50/80 to-white pb-16",children:[s.jsx("section",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] bg-blue-50 border-y border-blue-100 py-12 px-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-8",children:[s.jsx("img",{src:ui.logo,alt:ui.name,className:"h-24 w-auto object-contain rounded-lg transition-all duration-300 hover:shadow-xl hover:scale-105"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 font-display",children:ui.name}),s.jsx("p",{className:"text-slate-600 mt-2",children:ui.description})]})]})}),s.jsx("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:kC.map(e=>s.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-visible border border-black/20 transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[s.jsx("div",{className:"relative w-36 h-36 -mt-8 mx-auto rounded-full overflow-hidden border-4 border-blue-100 shadow-lg transition-all duration-300 hover:shadow-xl hover:scale-105",children:s.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover object-center hover-zoom",onError:t=>{const r=t.target;r.onerror=null,r.src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect fill="#e2e8f0" width="400" height="400"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#64748b" font-size="48">?</text></svg>')}})}),s.jsx("div",{className:"bg-blue-100 text-blue-700 font-bold text-sm px-4 py-2 mt-4 mx-4 rounded-lg w-fit",children:e.id.padStart(2,"0")}),s.jsxs("div",{className:"p-4 pt-2 space-y-3",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 font-display leading-tight",children:e.name}),s.jsx("p",{className:"text-blue-700 font-medium text-sm",children:e.role}),s.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:e.bio}),s.jsxs("div",{className:"space-y-2 text-sm",children:[e.age!=null&&s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(bs,{className:"w-4 h-4 text-blue-300 shrink-0"}),s.jsxs("span",{children:["Age: ",e.age]})]}),e.contactNumber&&s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(fa,{className:"w-4 h-4 text-blue-300 shrink-0"}),s.jsx("a",{href:`tel:${e.contactNumber.replace(/\s/g,"")}`,className:"hover:text-blue-700 transition-colors",children:e.contactNumber})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[e.github&&s.jsxs("a",{href:e.github,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-50 text-slate-900 hover:bg-blue-100 hover:shadow-md transition-all duration-200 text-sm","aria-label":"GitHub",children:[s.jsx(Wb,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{children:e.githubHandle||"GitHub"})]}),e.facebook&&s.jsxs("a",{href:e.facebook,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-50 text-slate-900 hover:bg-blue-100 hover:shadow-md transition-all duration-200 text-sm","aria-label":"Facebook",children:[s.jsx(Lk,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{children:e.facebookHandle||"Facebook"})]}),e.instagram&&s.jsxs("a",{href:e.instagram,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-50 text-slate-900 hover:bg-blue-100 hover:shadow-md transition-all duration-200 text-sm","aria-label":"Instagram",children:[s.jsx(Fk,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{children:e.instagramHandle||"Instagram"})]}),e.gmail&&s.jsxs("a",{href:`mailto:${e.gmail}`,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-50 text-slate-900 hover:bg-blue-100 hover:shadow-md transition-all duration-200 text-sm","aria-label":"Gmail",children:[s.jsx(Ml,{className:"w-4 h-4 shrink-0"}),s.jsx("span",{children:e.gmailHandle||"Email"})]})]})]})]},e.id))})]})}const Zb=[{slug:"espada",name:"Espada",carousel:[{imageSrc:"/assets/daing/espada/slide1.jpg",placeholderColor:"#1e3a5f",alt:"Espada dried fish"},{imageSrc:"/assets/daing/espada/slide2.jpg",placeholderColor:"#2a4a75",alt:"Espada product"},{imageSrc:"/assets/daing/espada/slide3.jpg",placeholderColor:"#3b82f6",alt:"Espada grading"}],sections:[{title:"About Espada",content:"Espada, also known as beltfish or hairtail (Trichiurus species), is a commonly dried fish in the Philippines recognized for its long, flat body and silvery appearance. It is usually sun-dried to preserve freshness and extend shelf life. Espada is popular in local markets due to its affordability and strong flavor, making quality assessment important to ensure safety and market value."},{title:"Flavor Profile",content:"Dried Espada is prized for its intense savory umami flavor and unique texture. When fried, the thin skin becomes exceptionally crispy while the meat inside remains slightly chewy. It has a moderate saltiness that pairs perfectly with the acidity of vinegar, balancing the rich, fishy profile."},{title:"Culinary Uses",content:'The most popular way to prepare dried Espada is deep-frying until golden brown and crispy. It is a classic Filipino breakfast staple served with garlic fried rice (sinangag) and a dipping sauce of spiced vinegar (sukang paombong or pinakurat). In some regions, it is also added to vegetable stews like "bulanglang" to add a savory depth to the broth.'},{title:"Quality Indicators",content:"Good-quality dried espada has a light silver to pale brown color, firm flesh, and an even surface texture with minimal breakage. Discoloration, dark spots, and uneven drying patterns often indicate exposure to excess moisture or poor handling. The DaingGrader system evaluates color consistency, surface irregularities, and visible defects to classify espada into Export, Local, or Reject quality grades."},{title:"Safety and Handling",content:"Espada is highly sensitive to moisture because of its thin body structure. Improper drying or storage may lead to rapid mold formation and surface spoilage. Early mold growth may not be easily visible, especially along folds and edges. DaingGrader assists in detecting subtle mold patterns and texture anomalies to reduce health risks and improve dried fish safety."}]},{slug:"danggit",name:"Danggit",carousel:[{imageSrc:"/assets/daing/danggit/slide1.jpg",placeholderColor:"#0f766e",alt:"Danggit dried fish"},{imageSrc:"/assets/daing/danggit/slide2.jpg",placeholderColor:"#14b8a6",alt:"Danggit product"},{imageSrc:"/assets/daing/danggit/slide3.jpg",placeholderColor:"#2dd4bf",alt:"Danggit grading"}],sections:[{title:"About Danggit",content:"Danggit, locally known as dried rabbitfish (Siganus species), is one of the most popular dried fish products in the Philippines. It is widely consumed as a breakfast staple, commonly paired with garlic rice and vinegar. Danggit is traditionally preserved through sun-drying, a method that reduces moisture to extend shelf life and enhance flavor. Due to its popularity and high market demand, maintaining consistent quality and safety is essential for both consumers and vendors."},{title:"Flavor Profile",content:"Danggit is famous for its delicate, crunchy texture and a distinctively aromatic, salty-savory taste. Unsalted versions offer a milder, creamy seafood flavor, while the salted variety packs a punch. Its thin, butterfly cut allows it to become shatteringly crisp when fried, distinguishing it from meatier dried fish."},{title:"Culinary Uses",content:'Best enjoyed as "Daing na Danggit" for breakfast, it is fried quickly (often just seconds) to avoid burning. It is the star of the famous "Danggit, Itlog, at Sinangag" (Dangsilog) combo. Smaller danggit can be eaten whole, including the bones, providing calcium. It is also a popular "pasalubong" (souvenir) item from Cebu and other coastal provinces.'},{title:"Quality indicators",content:"High-quality danggit is characterized by a uniform golden-brown color, intact fins and spines, firm texture, and the absence of visible mold or discoloration. Variations in color consistency and surface texture often indicate improper drying or early spoilage. In the DaingGrader system, these visual attributes are analyzed through automated image processing to assess surface uniformity, detect defects, and determine the appropriate quality grade."},{title:"Safety and handling",content:"Improper drying, exposure to humidity, or poor storage conditions can lead to mold growth on danggit, posing potential health risks due to mycotoxin production. Early-stage mold contamination may not always be visible to the naked eye. The DaingGrader system enhances food safety by detecting subtle mold patterns and color changes at an early stage using AI-based computer vision."}]},{slug:"dalagang-bukid",name:"Dalagang Bukid",carousel:[{imageSrc:"/assets/daing/dalagang-bukid/slide1.jpg",placeholderColor:"#be185d",alt:"Dalagang Bukid dried fish"},{imageSrc:"/assets/daing/dalagang-bukid/slide2.jpg",placeholderColor:"#db2777",alt:"Dalagang Bukid product"},{imageSrc:"/assets/daing/dalagang-bukid/slide3.jpg",placeholderColor:"#ec4899",alt:"Dalagang Bukid grading"}],sections:[{title:"About Dalagang Bukid",content:"Dalagang Bukid, commonly known as yellowtail fusilier (Caesio species), is a popular dried fish variety in Philippine coastal communities. It is valued for its mild taste and firm meat. The fish is traditionally sun-dried, making proper drying conditions crucial to preserve quality and prevent spoilage."},{title:"Flavor Profile",content:"Unlike the intense saltiness of other dried fish, Dalagang Bukid often retains a meatier, slightly sweet underlying flavor beneath the cure. The flesh is dense and firm, offering a satisfying chewiness rather than a brittle crunch. It absorbs marinades and sauces well, making it versatile."},{title:"Culinary Uses",content:'While often fried, dried Dalagang Bukid is substantial enough to be cooked in sauces. A popular preparation is "Sarciado," where the fried fish is simmered in a thick tomato and egg sauce. It can also be grilled over charcoal for a smoky flavor that complements its natural taste.'},{title:"Quality indicators",content:"High-quality dried dalagang bukid exhibits a uniform light golden to yellowish-brown color, intact body structure, and smooth surface texture. Uneven coloration, surface cracks, or darkened areas may indicate improper drying or early quality degradation. The DaingGrader system analyzes these visual features to assess color uniformity, detect defects, and assign an appropriate quality grade."},{title:"Safety and handling",content:"Due to its moderate fat content, dalagang bukid is prone to spoilage if not properly dried or stored. Exposure to humid environments can accelerate mold growth and surface deterioration. DaingGrader enhances safety by identifying early visual signs of mold and discoloration that may be overlooked during manual inspection."}]},{slug:"flying-fish",name:"Flying Fish",carousel:[{imageSrc:"/assets/daing/flying-fish/slide1.jpg",placeholderColor:"#4f46e5",alt:"Flying fish dried"},{imageSrc:"/assets/daing/flying-fish/slide2.jpg",placeholderColor:"#6366f1",alt:"Flying fish product"},{imageSrc:"/assets/daing/flying-fish/slide3.jpg",placeholderColor:"#818cf8",alt:"Flying fish grading"}],sections:[{title:"About Flying Fish",content:"Flying fish, locally known as Bangsi (Exocoetidae family), is commonly dried in coastal regions of the Philippines. It is recognized by its wing-like fins and is often processed through sun-drying to preserve its quality. Dried flying fish is valued for its unique texture and flavor."},{title:"Flavor Profile",content:'Dried Flying Fish is known for its firm, lean meat that can be somewhat tough but flavorful. It has a distinct, earthy seafood taste that is less "fishy" than oily species. The wings (fins) become incredibly crispy when cooked, adding a unique texture component.'},{title:"Culinary Uses",content:"In provinces like Quezon and Bicol, dried Flying Fish is often grilled or fried. It is also a key ingredient in local soups where the dried fish is boiled to create a flavorful broth for vegetables. Its firm texture allows it to hold up well in boiling liquid without disintegrating."},{title:"Quality indicators",content:"Good-quality dried flying fish has a consistent light brown to golden color, well-preserved fins, and a dry, firm surface. Broken fins, uneven drying marks, and color inconsistencies are indicators of handling or drying issues. The DaingGrader system evaluates surface texture and color distribution to ensure consistent grading."},{title:"Safety and handling",content:"Flying fish has thin flesh, making it vulnerable to rapid moisture absorption and mold growth when exposed to humid conditions. Mold development often begins in fin joints and body creases. DaingGrader supports early detection of these risk areas, improving food safety and reducing post-harvest losses."}]},{slug:"bisugo",name:"Bisugo",carousel:[{imageSrc:"/assets/daing/bisugo/slide1.jpg",placeholderColor:"#b45309",alt:"Bisugo dried fish"},{imageSrc:"/assets/daing/bisugo/slide2.jpg",placeholderColor:"#d97706",alt:"Bisugo product"},{imageSrc:"/assets/daing/bisugo/slide3.jpg",placeholderColor:"#f59e0b",alt:"Bisugo grading"}],sections:[{title:"About Bisugo",content:"Bisugo, also known as threadfin bream (Nemipterus species), is a widely consumed dried fish in the Philippines. It is favored for its mild flavor and is commonly sold in dried form in local markets. Traditional sun-drying remains the primary preservation method."},{title:"Flavor Profile",content:"Bisugo has a white, delicate flesh that offers a refined taste. Even when dried, it retains a hint of sweetness characteristic of bream species. It is generally less salty and pungent than other varieties, making it an excellent choice for those who find other dried fish too overpowering."},{title:"Culinary Uses",content:"Dried Bisugo is versatile. While commonly fried until crispy, it is also frequently used as a base for stocks and broths. In some recipes, the fried fish is flaked and used as a topping for noodle dishes like Pancit or Arroz Caldo to add a savory crunch and protein boost."},{title:"Quality indicators",content:"High-quality dried bisugo is identified by a pale golden to light brown color, intact scales, and a firm, evenly dried surface. Presence of dark spots, discoloration, or rough texture may indicate spoilage or improper drying. DaingGrader assesses these visual indicators to determine quality grade and detect surface defects."},{title:"Safety and handling",content:"Bisugo is susceptible to mold growth when drying and storage conditions are poorly controlled. Early contamination may appear as subtle color changes or fine surface textures. The DaingGrader system enhances detection accuracy by identifying early-stage mold and quality degradation, supporting safer consumption and better quality control."}]}];function _C(e){return Zb.find(t=>t.slug===e)}function EC({slides:e,title:t,autoplayMs:r=5e3}){const[n,a]=u.useState(0);return u.useEffect(()=>{if(r<=0||e.length<=1)return;const l=setInterval(()=>a(i=>(i+1)%e.length),r);return()=>clearInterval(l)},[r,e.length]),e.length===0?null:(e[n],s.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg",style:{aspectRatio:"16/6",minHeight:"240px"},children:[e.map((l,i)=>s.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{opacity:i===n?1:0,zIndex:i===n?1:0},children:l.imageSrc?s.jsx("img",{src:l.imageSrc,alt:l.alt||"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full",style:{backgroundColor:l.placeholderColor}})},i)),t&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-900/70 text-white px-6 py-3 text-lg font-semibold",children:t}),s.jsx("div",{className:"absolute bottom-3 right-4 z-10 flex gap-2",children:e.map((l,i)=>s.jsx("button",{onClick:()=>a(i),className:`w-2.5 h-2.5 rounded-full transition-all ${i===n?"bg-white scale-110":"bg-white/50 hover:bg-white/70"}`,"aria-label":`Slide ${i+1}`},i))})]}))}function PC(){const{slug:e}=Nl(),t=e?_C(e):void 0;return t?s.jsxs("div",{className:"space-y-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 border-b-2 border-primary pb-2",children:t.name}),s.jsx("div",{className:"w-full",children:s.jsx(EC,{slides:t.carousel,title:t.name,autoplayMs:5e3})}),s.jsx("div",{className:"space-y-8",children:t.sections.map((r,n)=>s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-3",children:r.title}),s.jsx("p",{className:"text-slate-600 leading-relaxed",children:r.content})]},n))})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold text-slate-900",children:"About Daing"}),s.jsx("p",{className:"text-slate-500",children:"Fish type not found."})]})}const IC=".png,.jpg,.jpeg",hf=10,Yc=Zb.map(e=>{var t,r,n;return{name:e.name,imageSrc:(t=e.carousel[0])==null?void 0:t.imageSrc,placeholderColor:((r=e.carousel[0])==null?void 0:r.placeholderColor)??"#1e3a5f",alt:((n=e.carousel[0])==null?void 0:n.alt)??`${e.name} dried fish`}}),TC=4e3;function AC(){const e=mt(),{user:t,loading:r}=rt(),{showToast:n}=ht(),[a,l]=u.useState(null),[i,o]=u.useState(null),[c,d]=u.useState(null),[m,f]=u.useState(null),[p,g]=u.useState(!1),[v,y]=u.useState(0),[j,b]=u.useState(!1),[h,x]=u.useState(null),S=u.useRef(null),E=u.useRef(null),w=u.useRef(null);u.useEffect(()=>{!r&&!t&&(n("Please log in to use the AI Fish Scanner. Your scan history will be saved to your account.","warning"),e("/login",{state:{from:"/grade"}}))},[t,r,e,n]),u.useEffect(()=>{j&&h&&S.current&&(S.current.srcObject=h,E.current=h,x(null))},[j,h]),u.useEffect(()=>{const U=setInterval(()=>{y(C=>(C+1)%Yc.length)},TC);return()=>clearInterval(U)},[]);const k=()=>{a&&URL.revokeObjectURL(a),l(null),o(null),f(null),w.current&&(w.current.value="")},D=()=>{a&&URL.revokeObjectURL(a),c&&URL.revokeObjectURL(c),l(null),o(null),d(null),f(null),q(),w.current&&(w.current.value="")},q=()=>{E.current&&(E.current.getTracks().forEach(U=>U.stop()),E.current=null),x(null),S.current&&(S.current.srcObject=null),b(!1)},N=U=>{var B,Q;q(),a&&URL.revokeObjectURL(a),l(null),o(null),f(null);const C=(B=U.target.files)==null?void 0:B[0];if(!C)return;if(C.size>hf*1024*1024){f(`File must be under ${hf} MB`);return}const F=(Q=C.name.split(".").pop())==null?void 0:Q.toLowerCase();if(!["png","jpg","jpeg"].includes(F||"")){f("Only PNG or JPG images are allowed");return}o(C),l(URL.createObjectURL(C))},_=async()=>{k(),f(null);try{const U=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});x(U),b(!0)}catch{f("Could not access camera. Allow camera permission or use file upload.")}},I=()=>new Promise((U,C)=>{const F=S.current;if(!F||!F.videoWidth){C(new Error("Video not ready"));return}const B=document.createElement("canvas");B.width=F.videoWidth,B.height=F.videoHeight;const Q=B.getContext("2d");if(!Q){C(new Error("Canvas error"));return}Q.drawImage(F,0,0),B.toBlob($=>{$?U(new File([$],"capture.jpg",{type:"image/jpeg"})):C(new Error("Capture failed"))},"image/jpeg",.9)}),L=async()=>{try{const U=await I();q(),o(U),l(URL.createObjectURL(U))}catch{f("Capture failed")}},z=async()=>{var U,C;if(i){g(!0),f(null),d(null);try{const F=await _5(i);d(URL.createObjectURL(F))}catch(F){f(((C=(U=F.response)==null?void 0:U.data)==null?void 0:C.message)||F.message||"Analysis failed. Is the backend running?")}finally{g(!1)}}},M=()=>{var U;q(),(U=w.current)==null||U.click()},J=Yc[v];return r?s.jsx("div",{className:"min-h-[50vh] flex items-center justify-center",children:s.jsx(Or,{className:"w-8 h-8 animate-spin text-blue-600"})}):t?s.jsxs("div",{className:"space-y-8",children:[s.jsx(we,{title:"Grade Dried Fish",subtitle:"Upload or capture an image, preview it, then analyze. Same flow as mobile.",backgroundImage:"/assets/page-hero/grade.jpg"}),s.jsx("div",{className:"flex justify-end mb-4",children:s.jsxs(ae,{to:"/history",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-blue-300 bg-white hover:bg-blue-50 hover:border-blue-400 shadow-md hover:shadow-lg transition-all duration-200 text-blue-700 font-semibold",children:[s.jsx(wo,{className:"w-5 h-5"}),"History"]})}),c&&s.jsxs("div",{className:"card max-w-2xl bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Analysis Result"}),s.jsx("img",{src:c,alt:"Analysis result",className:"w-full rounded-xl border border-blue-200 shadow-md"}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Annotated image from backend (saved to Cloudinary + history)."}),s.jsx(kt,{type:"button",onClick:D,className:"mt-4",children:"Scan Another"})]}),!c&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-lg",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Preview"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsx("input",{ref:w,type:"file",accept:IC,onChange:N,className:"hidden"}),s.jsxs(kt,{type:"button",variant:"outline",onClick:M,className:"flex items-center gap-2",children:[s.jsx(Jb,{className:"w-4 h-4"}),"Choose file"]}),j?s.jsxs(kt,{type:"button",variant:"outline",onClick:q,className:"flex items-center gap-2",children:[s.jsx(Pe,{className:"w-4 h-4"}),"Close camera"]}):s.jsxs(kt,{type:"button",variant:"outline",onClick:_,className:"flex items-center gap-2",children:[s.jsx(gu,{className:"w-4 h-4"}),"Use camera"]})]}),j?s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"relative aspect-video bg-slate-900 rounded-xl overflow-hidden min-h-[200px] border border-blue-200 shadow-md",children:s.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{minHeight:200}})}),s.jsxs(kt,{type:"button",onClick:L,className:"flex items-center gap-2",children:[s.jsx(gu,{className:"w-4 h-4"}),"Capture photo"]})]}):a?s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"relative aspect-video rounded-xl overflow-hidden bg-blue-50 border border-blue-300 shadow-md min-h-[200px]",children:s.jsx("img",{src:a,alt:"Preview",className:"w-full h-full object-contain",style:{minHeight:200}})}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(kt,{type:"button",variant:"outline",onClick:k,className:"flex items-center gap-2",children:[s.jsx(Vk,{className:"w-4 h-4"}),"Retake"]}),s.jsx(kt,{type:"button",onClick:z,disabled:p,className:"flex items-center gap-2",children:p?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-4 h-4 animate-spin"}),"Analyzing"]}):"Analyze image"})]})]}):s.jsx("p",{className:"text-sm text-slate-500 py-8 text-center",children:"Choose a file or use your camera to get started."})]}),m&&s.jsx("div",{className:"bg-red-50 border border-red-300 text-red-800 px-4 py-3 rounded-lg text-sm shadow-md",children:m}),s.jsxs("div",{className:"bg-blue-50 border border-blue-300 rounded-xl p-4 shadow-md",children:[s.jsxs("h3",{className:"text-sm font-semibold text-blue-900 flex items-center gap-2 mb-2",children:[s.jsx(Gb,{className:"w-4 h-4 text-blue-600 shrink-0"}),"Tips for a clear photo"]}),s.jsxs("ul",{className:"text-sm text-slate-700 space-y-1 list-disc list-inside",children:[s.jsxs("li",{children:["Use ",s.jsx("strong",{children:"good lighting"})," (avoid shadows)."]}),s.jsxs("li",{children:["Place fish on a ",s.jsx("strong",{children:"plain, contrasting background"}),"."]}),s.jsxs("li",{children:["Capture the ",s.jsx("strong",{children:"whole fish"})," in frame when possible."]})]})]})]}),s.jsxs("div",{className:"card bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-lg overflow-hidden",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Example: Daing types"}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Reference images for the types we grade."}),s.jsxs("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden bg-blue-100 border border-blue-300 shadow-md",children:[J.imageSrc?s.jsx("img",{src:J.imageSrc,alt:J.alt,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500"}):s.jsx("div",{className:"absolute inset-0 transition-opacity duration-500",style:{backgroundColor:J.placeholderColor}}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent px-4 py-3",children:s.jsx("span",{className:"text-white font-semibold text-sm",children:J.name})})]}),s.jsx("div",{className:"flex justify-center gap-1.5 mt-3",children:Yc.map((U,C)=>s.jsx("button",{type:"button",onClick:()=>y(C),className:`w-2 h-2 rounded-full transition-all duration-200 ${C===v?"bg-primary scale-125":"bg-slate-300 hover:bg-slate-400"}`,"aria-label":`Slide ${C+1}`},C))})]})]})]}):s.jsxs("div",{className:"min-h-[50vh] flex flex-col items-center justify-center gap-4",children:[s.jsx(Ek,{className:"w-12 h-12 text-amber-500"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Login Required"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Please log in to use the AI Fish Scanner."}),s.jsx(ae,{to:"/login",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Login"})]})]})}function LC(e){const t=new Map;for(const n of e){const a=n.timestamp.slice(0,10);t.has(a)||t.set(a,[]),t.get(a).push(n)}return Array.from(t.entries()).sort((n,a)=>a[0].localeCompare(n[0])).map(([n,a])=>({date:n,label:ev(n),items:a}))}function ev(e){const t=new Date(e),r=new Date,n=new Date(r);return n.setDate(n.getDate()-1),t.toDateString()===r.toDateString()?"Today":t.toDateString()===n.toDateString()?"Yesterday":t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function Su(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}function DC({label:e,items:t,onItemClick:r}){const n=u.useRef(null),[a,l]=u.useState(!1),[i,o]=u.useState(!1),c=()=>{if(!n.current)return;const{scrollLeft:m,scrollWidth:f,clientWidth:p}=n.current;l(m>0),o(m<f-p-10)};u.useEffect(()=>{c();const m=n.current;if(m)return m.addEventListener("scroll",c),window.addEventListener("resize",c),()=>{m.removeEventListener("scroll",c),window.removeEventListener("resize",c)}},[t]);const d=m=>{if(!n.current)return;const f=n.current.clientWidth*.8;n.current.scrollBy({left:m==="left"?-f:f,behavior:"smooth"})};return s.jsxs("section",{className:"relative group",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4 pb-2 border-b border-blue-300",children:e}),a&&s.jsx("button",{onClick:()=>d("left"),className:"absolute left-0 top-1/2 translate-y-2 z-10 w-10 h-10 bg-blue-600/70 hover:bg-blue-700 text-white flex items-center justify-center rounded-lg opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:s.jsx(tt,{className:"w-6 h-6"})}),i&&s.jsx("button",{onClick:()=>d("right"),className:"absolute right-0 top-1/2 translate-y-2 z-10 w-10 h-10 bg-blue-600/70 hover:bg-blue-700 text-white flex items-center justify-center rounded-lg opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:s.jsx(st,{className:"w-6 h-6"})}),s.jsx("div",{ref:n,className:"flex gap-4 overflow-x-auto scrollbar-hide pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.map(m=>s.jsxs("button",{type:"button",onClick:()=>r(m),className:"group/card flex-shrink-0 w-48 md:w-56 lg:w-64 relative overflow-hidden border border-blue-200 bg-gradient-to-br from-white to-blue-50 shadow-md hover:shadow-lg hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500/40 rounded-lg",children:[s.jsx("div",{className:"aspect-square overflow-hidden bg-blue-100",children:s.jsx("img",{src:m.url,alt:`${m.fish_type} - ${m.grade}`,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/80 via-slate-900/20 to-transparent opacity-0 group-hover/card:opacity-100 transition-opacity"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 translate-y-full group-hover/card:translate-y-0 transition-transform",children:[s.jsx("div",{className:"text-white text-sm font-semibold truncate",children:m.fish_type||"Unknown"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"px-2 py-0.5 bg-blue-400/60 text-white text-xs font-medium rounded",children:m.grade||"N/A"}),s.jsx("span",{className:"text-white/80 text-xs",children:Su(m.timestamp)})]})]}),s.jsxs("div",{className:"p-2 bg-gradient-to-r from-white to-blue-50 border-t border-blue-200",children:[s.jsx("p",{className:"text-xs text-blue-900 truncate font-semibold",children:m.fish_type||"Unknown"}),s.jsxs("p",{className:"text-xs text-blue-700",children:[m.grade||"N/A","  ",Su(m.timestamp)]})]})]},m.id))})]})}function RC(){const{isLoggedIn:e}=rt(),[t,r]=u.useState([]),[n,a]=u.useState([]),[l,i]=u.useState(!0),[o,c]=u.useState(null),[d,m]=u.useState(null),[f,p]=u.useState("All"),[g,v]=u.useState("all"),[y,j]=u.useState(""),[b,h]=u.useState(""),[x,S]=u.useState("");u.useEffect(()=>{const _=new AbortController;return y5(_.signal).then(I=>{r(I.entries),a(I.fish_types||[]),c(null)}).catch(I=>{I.code!=="ERR_CANCELED"&&c("Could not load history. Is the backend running?")}).finally(()=>i(!1)),()=>_.abort()},[]);const E=u.useMemo(()=>{const _=new Set;return t.forEach(I=>_.add(I.timestamp.slice(0,4))),Array.from(_).sort((I,L)=>L.localeCompare(I))},[t]),w=u.useMemo(()=>{const _=new Set;return t.forEach(I=>_.add(I.timestamp.slice(0,7))),Array.from(_).sort((I,L)=>L.localeCompare(I))},[t]),k=u.useMemo(()=>{let _=t;return f!=="All"&&(_=_.filter(I=>I.fish_type===f)),g==="date"&&y?_=_.filter(I=>I.timestamp.slice(0,10)===y):g==="month"&&b?_=_.filter(I=>I.timestamp.slice(0,7)===b):g==="year"&&x&&(_=_.filter(I=>I.timestamp.slice(0,4)===x)),_},[t,f,g,y,b,x]),D=LC(k),q=()=>{p("All"),v("all"),j(""),h(""),S("")},N=f!=="All"||g!=="all";return e?s.jsxs("div",{className:"space-y-8",children:[s.jsx(we,{title:"Scan History",subtitle:"Your saved analysis images from the cloud, organized by date.",backgroundImage:"/assets/page-hero/history.jpg"}),s.jsx("div",{className:"bg-gradient-to-r from-white to-blue-50 border border-blue-200 p-4 shadow-lg rounded-lg",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"font-semibold text-slate-900",children:"Filters"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jo,{className:"w-4 h-4 text-slate-500"}),s.jsxs("select",{value:f,onChange:_=>p(_.target.value),className:"px-3 py-1.5 border border-blue-300 text-sm bg-white rounded-lg shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500",children:[s.jsx("option",{value:"All",children:"All Fish Types"}),n.map(_=>s.jsx("option",{value:_,children:_},_))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4 text-slate-500"}),s.jsxs("select",{value:g,onChange:_=>v(_.target.value),className:"px-3 py-1.5 border border-blue-300 text-sm bg-white rounded-lg shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Dates"}),s.jsx("option",{value:"date",children:"Specific Date"}),s.jsx("option",{value:"month",children:"By Month"}),s.jsx("option",{value:"year",children:"By Year"})]})]}),g==="date"&&s.jsx("input",{type:"date",value:y,onChange:_=>j(_.target.value),className:"px-3 py-1.5 border border-blue-300 text-sm bg-white rounded-lg shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500"}),g==="month"&&s.jsxs("select",{value:b,onChange:_=>h(_.target.value),className:"px-3 py-1.5 border border-blue-300 text-sm bg-white rounded-lg shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Month"}),w.map(_=>s.jsx("option",{value:_,children:new Date(_+"-01").toLocaleDateString("en-US",{year:"numeric",month:"long"})},_))]}),g==="year"&&s.jsxs("select",{value:x,onChange:_=>S(_.target.value),className:"px-3 py-1.5 border border-blue-300 text-sm bg-white rounded-lg shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Year"}),E.map(_=>s.jsx("option",{value:_,children:_},_))]}),N&&s.jsx("button",{onClick:q,className:"px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Clear Filters"}),s.jsxs("div",{className:"ml-auto text-sm text-slate-500",children:[k.length," scan",k.length!==1?"s":""," found"]})]})}),l?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(Or,{className:"w-10 h-10 animate-spin text-primary"})}):o?s.jsx("div",{className:"card max-w-xl",children:s.jsxs("div",{className:"text-red-600 flex items-center gap-2",children:[s.jsx(Mk,{className:"w-5 h-5"}),o]})}):k.length===0?s.jsxs("div",{className:"card max-w-xl text-center py-12",children:[s.jsx(wo,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),s.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-2",children:t.length===0?"No scans yet":"No matching scans"}),s.jsx("p",{className:"text-slate-600 mb-4",children:t.length===0?"Analyze a dried fish image on the Grade page to see your history here.":"Try adjusting your filters to see more results."}),t.length===0?s.jsx(ae,{to:"/grade",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors",children:"Go to Grade"}):s.jsx("button",{onClick:q,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors",children:"Clear Filters"})]}):s.jsx("div",{className:"space-y-8",children:D.map(({date:_,label:I,items:L})=>s.jsx(DC,{label:I,items:L,onItemClick:m},_))}),d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",onClick:()=>m(null),role:"dialog","aria-modal":"true","aria-label":"View image",children:[s.jsx("button",{type:"button",onClick:()=>m(null),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-10","aria-label":"Close",children:s.jsx(Pe,{className:"w-6 h-6"})}),s.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",onClick:_=>_.stopPropagation(),children:[s.jsx("img",{src:d.url,alt:`${d.fish_type} - ${d.grade}`,className:"max-w-full max-h-[80vh] w-auto h-auto object-contain rounded-lg shadow-2xl mx-auto",referrerPolicy:"no-referrer"}),s.jsxs("div",{className:"text-center mt-4",children:[s.jsx("p",{className:"text-white text-lg font-semibold",children:d.fish_type||"Unknown Fish"}),s.jsxs("p",{className:"text-white/80 text-sm mt-1",children:["Grade: ",s.jsx("span",{className:"font-medium",children:d.grade||"N/A"}),d.score!=null&&s.jsxs(s.Fragment,{children:["  Score: ",d.score.toFixed(2)]})]}),s.jsxs("p",{className:"text-white/60 text-sm mt-1",children:[ev(d.timestamp)," at ",Su(d.timestamp)]})]})]})]})]}):s.jsxs("div",{className:"space-y-8",children:[s.jsx(we,{title:"Scan History",subtitle:"Your saved analysis images from the cloud, organized by date.",backgroundImage:"/assets/page-hero/history.jpg"}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-300 rounded-lg p-8 text-center shadow-lg",children:[s.jsx(wo,{className:"w-16 h-16 mx-auto text-blue-600 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Login to view your scan history"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Sign in to access your saved fish analysis images and grading history."}),s.jsx(ae,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Login to Continue"})]})})]})}function OC(){return s.jsxs("div",{className:"space-y-8",children:[s.jsx(we,{title:"Analytics",subtitle:"View grading statistics, trends, and insights.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"bg-white border border-black rounded-xl shadow-sidebar-subtle max-w-xl text-center py-16 p-6",children:[s.jsx(pu,{className:"w-20 h-20 mx-auto text-slate-300 mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Not implemented yet"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Analytics features are planned for a future release. Check back later for grading statistics and insights."}),s.jsx(ae,{to:"/",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors",children:"Back to Home"})]})]})}const Fl=/^[A-Za-z0-9\s.,!?'"\-()&:;]+$/,MC=/^[A-Za-z0-9\s.,!?'"\-()&:]+$/,tv=/^[A-Za-z0-9\s.,!?'"\-()&:;\n]+$/,FC=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,UC=/^[\d\s\-()++]+$/,$C=/^[A-Za-z0-9\s\-]+$/,zC=/^\d+(\.\d{1,2})?$/,pa=/^[^<>]*$/,nc=[/<script/i,/<iframe/i,/javascript:/i,/on\w+\s*=/i,/\bselect\b.*\bfrom\b/i,/\bunion\b.*\bselect\b/i,/\binsert\b.*\binto\b/i,/\bdelete\b.*\bfrom\b/i,/\bdrop\b.*\btable\b/i,/\bexec\b.*\(/i],sv=["fuck","shit","ass","bitch","damn","hell","bastard","crap","piss","dick","pussy","cock","asshole","motherfucker","bullshit","whore","slut","fag","nigger","retard","idiot","stupid","dumbass","putang","puta","gago","tangina","bobo","ulol","tarantado","leche","pakyu"];function xf(e){const t=e.trim();if(!t)return{valid:!1,error:"Title is required"};if(t.length<5)return{valid:!1,error:"Title must be at least 5 characters"};if(t.length>200)return{valid:!1,error:"Title must not exceed 200 characters"};if(!MC.test(t))return{valid:!1,error:"Title contains invalid characters. Use only letters, numbers, and basic punctuation."};if(!pa.test(t))return{valid:!1,error:"HTML tags are not allowed"};for(const r of nc)if(r.test(t))return{valid:!1,error:"Content contains suspicious patterns"};return{valid:!0}}function ff(e){const t=e.trim();if(!t)return{valid:!1,error:"Description is required"};if(t.length<10)return{valid:!1,error:"Description must be at least 10 characters"};if(t.length>5e3)return{valid:!1,error:"Description must not exceed 5000 characters"};if(!Fl.test(t))return{valid:!1,error:"Description contains invalid characters. Use only letters, numbers, and basic punctuation."};if(!pa.test(t))return{valid:!1,error:"HTML tags are not allowed"};for(const r of nc)if(r.test(t))return{valid:!1,error:"Content contains suspicious patterns"};return{valid:!0}}function BC(e){const t=e.trim();if(!t)return{valid:!1,error:"Comment cannot be empty"};if(t.length<2)return{valid:!1,error:"Comment must be at least 2 characters"};if(t.length>1e3)return{valid:!1,error:"Comment must not exceed 1000 characters"};if(!tv.test(t))return{valid:!1,error:"Comment contains invalid characters. Use only letters, numbers, and basic punctuation."};if(!pa.test(t))return{valid:!1,error:"HTML tags are not allowed"};for(const r of nc)if(r.test(t))return{valid:!1,error:"Content contains suspicious patterns"};return{valid:!0}}function HC(e,t){const r={};(e<1||e>5||!Number.isInteger(e))&&(r.rating="Rating must be between 1 and 5");const n=t.trim();if(!n)r.comment="Review comment is required";else if(n.length<10)r.comment="Review must be at least 10 characters";else if(n.length>1e3)r.comment="Review must not exceed 1000 characters";else if(!tv.test(n))r.comment="Review contains invalid characters. Use only letters, numbers, and basic punctuation.";else if(!pa.test(n))r.comment="HTML tags are not allowed";else for(const a of nc)if(a.test(n)){r.comment="Content contains suspicious patterns";break}return{valid:Object.keys(r).length===0,errors:r}}function VC(e){const t=e.trim();return t?FC.test(t)?t.length>254?{valid:!1,error:"Email is too long"}:{valid:!0}:{valid:!1,error:"Invalid email format"}:{valid:!1,error:"Email is required"}}function rv(e){const t=e.trim();if(!t)return{valid:!1,error:"Phone number is required"};const r=t.replace(/\D/g,"");return r.length<10?{valid:!1,error:"Phone number must have at least 10 digits"}:r.length>15?{valid:!1,error:"Phone number is too long"}:UC.test(t)?{valid:!0}:{valid:!1,error:"Phone number contains invalid characters"}}function WC(e){const t=e.trim();return t?t.length<3?{valid:!1,error:"Postal code is too short"}:t.length>10?{valid:!1,error:"Postal code is too long"}:$C.test(t)?{valid:!0}:{valid:!1,error:"Postal code contains invalid characters"}:{valid:!1,error:"Postal code is required"}}function qC(e,t="Name"){const r=e.trim();return r?r.length<2?{valid:!1,error:`${t} must be at least 2 characters`}:r.length>100?{valid:!1,error:`${t} must not exceed 100 characters`}:Fl.test(r)?{valid:!0}:{valid:!1,error:`${t} contains invalid characters`}:{valid:!1,error:`${t} is required`}}function GC(e){const t=typeof e=="number"?e.toString():e.trim();if(!t)return{valid:!1,error:"Price is required"};if(!zC.test(t))return{valid:!1,error:"Invalid price format. Use numbers with up to 2 decimal places."};const r=parseFloat(t);return r<=0?{valid:!1,error:"Price must be greater than 0"}:r>1e6?{valid:!1,error:"Price is too high"}:{valid:!0}}function Qc(e,t="Field"){return e.trim()?{valid:!0}:{valid:!1,error:`${t} is required`}}function ku(e,t,r,n="Field"){const a=e.trim();return a.length<t?{valid:!1,error:`${n} must be at least ${t} characters`}:a.length>r?{valid:!1,error:`${n} must not exceed ${r} characters`}:{valid:!0}}function Ps(e){let t=e;return sv.forEach(r=>{const n=new RegExp(`\\b${r}\\b`,"gi");t=t.replace(n,"****")}),t}function Wm(e){const t=e.toLowerCase();return sv.some(r=>new RegExp(`\\b${r}\\b`,"i").test(t))}function KC(e){const t=e.trim();return t?t.length<3?{valid:!1,error:"Product name must be at least 3 characters"}:t.length>200?{valid:!1,error:"Product name must not exceed 200 characters"}:Fl.test(t)?pa.test(t)?Wm(t)?{valid:!1,error:"Product name contains inappropriate language"}:{valid:!0}:{valid:!1,error:"HTML tags are not allowed"}:{valid:!1,error:"Product name contains invalid characters"}:{valid:!1,error:"Product name is required"}}function pf(e){const t=e.trim();return t?t.length>2e3?{valid:!1,error:"Description must not exceed 2000 characters"}:Fl.test(t)?pa.test(t)?Wm(t)?{valid:!1,error:"Description contains inappropriate language"}:{valid:!0}:{valid:!1,error:"HTML tags are not allowed"}:{valid:!1,error:"Description contains invalid characters"}:{valid:!0}}function YC(e){const t=e.trim();return t?t.length<2?{valid:!1,error:"Category name must be at least 2 characters"}:t.length>100?{valid:!1,error:"Category name must not exceed 100 characters"}:Fl.test(t)?Wm(t)?{valid:!1,error:"Category name contains inappropriate language"}:{valid:!0}:{valid:!1,error:"Category name contains invalid characters"}:{valid:!1,error:"Category name is required"}}function QC(){const[e,t]=u.useState(""),[r,n]=u.useState(""),[a,l]=u.useState(""),[i,o]=u.useState(""),[c,d]=u.useState(""),[m,f]=u.useState(!1),[p,g]=u.useState(null),[v,y]=u.useState(!1),[j,b]=u.useState({}),h=async x=>{var q,N;x.preventDefault(),g(null),y(!1),b({});const S={},E=qC(e,"Name");E.valid||(S.name=E.error);const w=VC(r);if(w.valid||(S.email=w.error),a.trim()){const _=rv(a);_.valid||(S.contactNumber=_.error)}const k=ku(i,3,200,"Subject");k.valid||(S.subject=k.error);const D=ku(c,10,2e3,"Message");if(D.valid||(S.message=D.error),Object.keys(S).length>0){b(S);return}f(!0);try{await C5({name:e.trim(),email:r.trim(),contact_number:a.trim(),subject:i.trim(),message:c.trim()}),y(!0),t(""),n(""),l(""),o(""),d(""),b({})}catch(_){const I=(N=(q=_.response)==null?void 0:q.data)==null?void 0:N.detail;g(typeof I=="string"?I:Array.isArray(I)?I.map(L=>(L==null?void 0:L.msg)??L).join(", "):_.message||"Failed to send message. Is the backend running?")}finally{f(!1)}};return s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-lg",children:[s.jsx("h2",{className:"text-xl font-semibold text-blue-900",children:"Contact Us"}),s.jsxs("form",{className:"mt-4 space-y-3",onSubmit:h,children:[s.jsx("div",{children:s.jsx(dt,{label:"Name",value:e,onChange:x=>t(x.target.value),required:!0,error:j.name||null})}),s.jsx("div",{children:s.jsx(dt,{label:"Email",type:"email",value:r,onChange:x=>n(x.target.value),required:!0,error:j.email||null})}),s.jsx("div",{children:s.jsx(dt,{label:"Contact Number",placeholder:"e.g. +63 912 345 6789",value:a,onChange:x=>l(x.target.value),error:j.contactNumber||null})}),s.jsx("div",{children:s.jsx(dt,{label:"Subject",value:i,onChange:x=>o(x.target.value),required:!0,error:j.subject||null})}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-700 font-medium mb-1 block",children:"Message"}),s.jsx("textarea",{className:`w-full p-3 border bg-white text-slate-900 rounded-md h-36 shadow-sm hover:shadow-md focus:shadow-md focus:outline-none focus:ring-2 focus:border-blue-500 transition-all ${j.message?"border-red-300 focus:ring-red-500/40":"border-blue-300 focus:ring-blue-500/40"}`,value:c,onChange:x=>d(x.target.value),required:!0}),j.message&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:j.message})]}),p&&s.jsx("div",{className:"text-sm text-red-700 bg-red-50 border border-red-300 rounded-lg px-3 py-2 shadow-sm",children:p}),v&&s.jsx("div",{className:"text-sm text-green-700 bg-green-50 border border-green-300 rounded-lg px-3 py-2 shadow-sm",children:"Message sent successfully. We'll get back to you soon."}),s.jsx("div",{children:s.jsx(kt,{type:"submit",disabled:m,children:m?s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-4 h-4 animate-spin inline mr-2"}),"Sending"]}):"Send Message"})})]})]}),s.jsxs("div",{className:"card bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-900",children:"Contact Info"}),s.jsxs("div",{className:"mt-3 text-sm text-slate-700",children:["shathesisgroup@gmail.com",s.jsx("br",{}),"Messages from the form are sent to this address."]}),s.jsx("div",{className:"mt-6 bg-blue-100 p-4 rounded-lg border border-blue-200",children:s.jsx("img",{src:"/assets/images/map.png",alt:"Map",className:"w-full max-w-[600px] h-[400px] object-cover rounded-lg"})})]})]})}function gf({type:e}){const t=oC(e),r=e==="local"?"Local Publications":"Foreign Publications",n=e==="local"?"Research, studies, and literature from Philippine institutions and local sources.":"Research, studies, and literature from international sources.";return s.jsxs("div",{className:"space-y-6",children:[s.jsx(we,{title:r,subtitle:n,backgroundImage:"/assets/page-hero/publications.jpg"}),s.jsx("div",{className:"space-y-4",children:t.length===0?s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 rounded-xl border border-blue-200 p-8 text-center text-slate-500 shadow-lg",children:[s.jsx(Qn,{className:"w-12 h-12 mx-auto text-blue-300 mb-2"}),s.jsx("p",{children:"No publications listed yet."})]}):t.map(a=>s.jsx(JC,{publication:a},a.id))})]})}function JC({publication:e}){return s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-xl border border-blue-200 p-6 shadow-md transition-all duration-200 hover:shadow-lg hover:border-blue-400",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:e.title}),e.authors&&s.jsx("p",{className:"text-sm text-slate-700 mb-1",children:e.authors}),s.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:[e.publication,e.year&&` (${e.year})`,e.volume&&`, ${e.volume}`,e.pages&&`, pp. ${e.pages}`]}),s.jsx("p",{className:"text-sm text-slate-700 mb-3",children:e.reference}),s.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 font-semibold hover:underline",children:[s.jsx(Vb,{className:"w-4 h-4 shrink-0"}),"View original source"]})]})}function bf({title:e,icon:t,posts:r,onPostClick:n,onLike:a,isLikedByUser:l}){const i=u.useRef(null),[o,c]=u.useState(!1),[d,m]=u.useState(!1),f=()=>{if(!i.current)return;const{scrollLeft:g,scrollWidth:v,clientWidth:y}=i.current;c(g>0),m(g<v-y-10)};u.useEffect(()=>{f();const g=i.current;return g&&g.addEventListener("scroll",f),()=>{g&&g.removeEventListener("scroll",f)}},[r]);const p=g=>{if(!i.current)return;const v=220;i.current.scrollBy({left:g==="left"?-v*2:v*2,behavior:"smooth"})};return s.jsxs("div",{className:"relative group/carousel",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(t,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e})]}),r.length===0?s.jsx("div",{className:"flex items-center justify-center py-8 bg-blue-50 border border-dashed border-blue-300 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-600",children:"No posts available"})}):s.jsxs(s.Fragment,{children:[o&&s.jsx("button",{onClick:()=>p("left"),className:"absolute left-0 top-1/2 mt-3 -translate-y-1/2 z-10 w-10 h-24 bg-blue-600/70 hover:bg-blue-700 flex items-center justify-center opacity-0 group-hover/carousel:opacity-100 transition-all duration-200 rounded-l",children:s.jsx(tt,{className:"w-6 h-6 text-white"})}),d&&s.jsx("button",{onClick:()=>p("right"),className:"absolute right-0 top-1/2 mt-3 -translate-y-1/2 z-10 w-10 h-24 bg-blue-600/70 hover:bg-blue-700 flex items-center justify-center opacity-0 group-hover/carousel:opacity-100 transition-all duration-200 rounded-r",children:s.jsx(st,{className:"w-6 h-6 text-white"})}),s.jsx("div",{ref:i,className:"flex gap-2 overflow-x-auto scrollbar-hide scroll-smooth pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.map(g=>s.jsx("div",{onClick:()=>n(g),className:"flex-shrink-0 w-[200px] rounded-md overflow-hidden cursor-pointer group hover:scale-105 hover:z-10 transition-transform duration-200 relative border border-blue-200",children:s.jsxs("div",{className:"relative aspect-[16/9] overflow-hidden bg-slate-800 rounded-md",children:[g.images.length>0?s.jsx("img",{src:g.images[0],alt:g.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-slate-700 to-slate-900",children:s.jsx(Ur,{className:"w-10 h-10 text-slate-500"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2",children:[s.jsx("h4",{className:"font-bold text-white text-sm line-clamp-2 drop-shadow-lg",children:g.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-white/80 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Je,{className:`w-3 h-3 ${l(g)?"fill-red-500 text-red-500":""}`})," ",g.likes]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ms,{className:"w-3 h-3"})," ",g.comments_count]})]})]}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-600 text-white text-[10px] font-medium uppercase rounded",children:g.category})})]})},g.id))})]})]})}function XC(){const{user:e,isLoggedIn:t}=rt(),[r,n]=u.useState("grid"),[a,l]=u.useState([]),[i,o]=u.useState(!0),[c,d]=u.useState(null),[m,f]=u.useState(""),[p,g]=u.useState("All"),[v,y]=u.useState(1),[j,b]=u.useState(0),h=12,x=Math.max(1,Math.ceil(j/h)),[S,E]=u.useState(!1),[w,k]=u.useState(""),[D,q]=u.useState(""),[N,_]=u.useState("Discussion"),[I,L]=u.useState([]),[z,M]=u.useState(!1),[J,U]=u.useState({}),C=u.useRef(null),[F,B]=u.useState(!1),[Q,$]=u.useState(null),[O,G]=u.useState(""),[H,V]=u.useState(""),[K,de]=u.useState(""),[ge,fe]=u.useState(!1),[le,Ie]=u.useState({}),[ue,Y]=u.useState(null),[se,be]=u.useState([]),[Re,T]=u.useState(!1),[A,re]=u.useState(""),[oe,Se]=u.useState(!1),[me,Le]=u.useState(""),[Me,it]=u.useState(0),[gt,At]=u.useState([]),[Kr,Os]=u.useState([]),[bt,Qt]=u.useState([]),[js,Z]=u.useState(!1),[_e,Fe]=u.useState("All"),[Ee,Ue]=u.useState({status:"ok",total_users:0,total_posts:0,total_comments:0});u.useEffect(()=>{r==="feed"&&(je(),Be())},[r,_e]);const je=async()=>{Z(!0);try{const[R,ie,ke]=await Promise.all([Q5(_e,7),Rb(7),Y5(5)]);console.log("Carousel data:",{categoryData:R,likedData:ie,featuredData:ke}),At(R.posts||[]),Os(ie.posts||[]),Qt(ke.trending||[])}catch(R){console.error("Failed to load carousel data:",R)}finally{Z(!1)}},Be=async()=>{try{const R=await J5();Ue(R)}catch(R){console.error("Failed to load community stats:",R)}},ls=()=>{window.scrollTo({top:0,behavior:"smooth"})};u.useEffect(()=>{is()},[v,p,m]);const is=async()=>{o(!0),d(null);try{const R=await Db(v,h,p,m);l(R.posts||[]),b(R.total||0)}catch{d("Failed to load posts"),l([])}finally{o(!1)}},ws=async()=>{const R=xf(w),ie=ff(D),ke={};if(R.valid||(ke.title=R.error),ie.valid||(ke.description=ie.error),U(ke),!(Object.keys(ke).length>0)){M(!0);try{const Ze=Ps(w.trim()),Jt=Ps(D.trim());await X5(Ze,Jt,N,I),E(!1),k(""),q(""),_("Discussion"),L([]),U({}),y(1),is()}catch{alert("Failed to create post")}finally{M(!1)}}},Ms=async R=>{if(t)try{const ie=await Z5(R);l(ke=>ke.map(Ze=>Ze.id===R?{...Ze,likes:ie.likes,liked_by:ie.liked?[...Ze.liked_by,(e==null?void 0:e.id)||""]:Ze.liked_by.filter(Jt=>Jt!==(e==null?void 0:e.id))}:Ze))}catch{console.error("Failed to like post")}},cr=async R=>{if(confirm("Delete this post?"))try{await ek(R),is()}catch{alert("Failed to delete post")}},Ul=R=>{const ie=Array.from(R.target.files||[]);if(I.length+ie.length>3){alert("Maximum 3 images allowed");return}L(ke=>[...ke,...ie].slice(0,3))},ac=R=>{L(ie=>ie.filter((ke,Ze)=>Ze!==R))},Sn=R=>{if(!R)return"";const ie=new Date(R);return isNaN(ie.getTime())?R:ie.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})+" - "+ie.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})},Fs=R=>e!=null&&e.id?R.liked_by.includes(e.id):!1,$l=R=>e?R.author_id===e.id||e.role==="admin":!1,ga=R=>e?R.author_id===e.id:!1,zl=R=>{$(R),G(R.title),V(R.description),de(R.category),B(!0)},lc=async()=>{if(!Q)return;const R=xf(O),ie=ff(H),ke={};if(R.valid||(ke.title=R.error),ie.valid||(ke.description=ie.error),Ie(ke),!(Object.keys(ke).length>0)){fe(!0);try{const Ze=Ps(O.trim()),Jt=Ps(H.trim());await tk(Q.id,Ze,Jt,K),B(!1),$(null),Ie({}),is()}catch{alert("Failed to update post")}finally{fe(!1)}}},dr=async R=>{Y(R),it(0),T(!0);try{const ie=await sk(R.id);be(ie.comments||[])}catch{be([])}finally{T(!1)}},Bl=()=>{Y(null),be([]),re("")},Hl=async()=>{if(!ue)return;const R=BC(A);if(!R.valid){Le(R.error||"");return}Le(""),Se(!0);try{const ie=Ps(A.trim()),ke=await rk(ue.id,ie);be(Ze=>[...Ze,ke.comment]),re(""),l(Ze=>Ze.map(Jt=>Jt.id===ue.id?{...Jt,comments_count:Jt.comments_count+1}:Jt))}catch{alert("Failed to add comment")}finally{Se(!1)}},ic=async R=>{if(!(!ue||!confirm("Delete this comment?")))try{await nk(R),be(ie=>ie.filter(ke=>ke.id!==R)),l(ie=>ie.map(ke=>ke.id===ue.id?{...ke,comments_count:Math.max(0,ke.comments_count-1)}:ke))}catch{alert("Failed to delete comment")}},ba=R=>e?R.author_id===e.id||e.role==="admin":!1;return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Community Forum",subtitle:"Share tips, ask questions, and connect with fellow daing enthusiasts.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[320px]",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search posts...",value:m,onChange:R=>{f(R.target.value),y(1)},className:"w-full pl-10 pr-3 py-2 border border-blue-300 bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]}),s.jsxs("select",{value:p,onChange:R=>{g(R.target.value),y(1)},className:"px-3 py-2 border border-blue-300 bg-white text-sm min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"All",children:"All Categories"}),s.jsx("option",{value:"Tips",children:"Tips"}),s.jsx("option",{value:"Questions",children:"Questions"}),s.jsx("option",{value:"Showcase",children:"Showcase"}),s.jsx("option",{value:"Discussion",children:"Discussion"})]}),s.jsxs("div",{className:"flex border border-blue-300 rounded-md overflow-hidden",children:[s.jsx("button",{onClick:()=>n("grid"),className:`p-2 transition-colors ${r==="grid"?"bg-blue-600 text-white":"bg-white text-slate-700 hover:bg-blue-50"}`,title:"Grid view",children:s.jsx(qb,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>n("feed"),className:`p-2 border-l border-blue-300 transition-colors ${r==="feed"?"bg-blue-600 text-white":"bg-white text-slate-700 hover:bg-blue-50"}`,title:"Feed view",children:s.jsx(Kb,{className:"w-4 h-4"})})]}),t&&s.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-colors ml-auto rounded",children:[s.jsx(ia,{className:"w-4 h-4"}),"Create post"]}),!t&&s.jsxs("div",{className:"ml-auto text-sm text-slate-700 bg-blue-50 border border-blue-200 rounded px-3 py-2",children:["Login to create posts and join the discussion."," ",s.jsx(ae,{to:"/login",className:"text-blue-700 font-semibold hover:underline",children:"Login"})]})]}),i?s.jsx("div",{className:"text-center py-16 text-slate-500",children:"Loading posts..."}):c?s.jsx("div",{className:"text-center py-16 text-red-600",children:c}):a.length===0?s.jsxs("div",{className:"text-center py-16 text-slate-500",children:[s.jsx(ms,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),s.jsx("p",{children:"No posts yet. Be the first to create one!"})]}):r==="grid"?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(R=>s.jsxs("div",{className:"bg-white border border-blue-200 overflow-hidden group relative cursor-pointer shadow-md hover:shadow-lg hover:border-blue-400 transition-all duration-200 rounded-lg",onClick:()=>dr(R),children:[s.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[ga(R)&&s.jsx("button",{onClick:ie=>{ie.stopPropagation(),zl(R)},className:"p-1.5 bg-white/90 hover:bg-blue-50 text-slate-500 hover:text-blue-600 border border-blue-300 rounded transition-colors",title:"Edit post",children:s.jsx(yo,{className:"w-4 h-4"})}),$l(R)&&s.jsx("button",{onClick:ie=>{ie.stopPropagation(),cr(R.id)},className:"p-1.5 bg-white/90 hover:bg-red-50 text-slate-500 hover:text-red-600 border border-red-300 rounded transition-colors",title:"Delete post",children:s.jsx(Wt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-blue-50",children:[R.images.length>0?s.jsx("img",{src:R.images[0],alt:R.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ur,{className:"w-12 h-12 text-blue-300"})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:s.jsxs("div",{className:"flex items-center gap-4 text-white text-xs",children:[s.jsxs("button",{onClick:ie=>{ie.stopPropagation(),Ms(R.id)},className:"flex items-center gap-1 hover:text-red-400 transition-colors",children:[s.jsx(Je,{className:`w-3.5 h-3.5 ${Fs(R)?"fill-red-500 text-red-500":""}`})," ",R.likes]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ms,{className:"w-3.5 h-3.5"})," ",R.comments_count]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(wu,{className:"w-3.5 h-3.5"})," ",R.shares]})]})})]}),s.jsxs("div",{className:"p-3 bg-gradient-to-b from-white to-blue-50",children:[s.jsx("h3",{className:"font-bold text-slate-900 text-base line-clamp-2 mb-1",children:R.title}),s.jsx("p",{className:"text-sm text-slate-700 line-clamp-2 mb-3",children:R.description}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-200 flex items-center justify-center text-xs font-medium text-blue-700",children:R.author_name.charAt(0).toUpperCase()}),s.jsxs("div",{className:"text-xs",children:[s.jsx("div",{className:"font-medium text-slate-800",children:R.author_name}),s.jsx("div",{className:"text-slate-400",children:Sn(R.created_at)})]})]})]})]},R.id))}):s.jsxs("div",{className:"space-y-8",children:[js?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading featured posts..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(bf,{title:_e==="All"?"Latest Posts":_e,icon:_e==="Tips"?Gb:_e==="Showcase"?Gk:_e==="Questions"?ms:Dk,posts:gt,onPostClick:dr,onLike:Ms,isLikedByUser:Fs}),s.jsx(bf,{title:"Most Liked",icon:Je,posts:Kr,onPostClick:dr,onLike:Ms,isLikedByUser:Fs})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[220px_1fr_260px] gap-6 items-start",children:[s.jsx("div",{className:"hidden lg:block sticky top-24",children:s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 p-4 shadow-lg hover:shadow-xl transition-shadow rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Filters"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:m,onChange:R=>{f(R.target.value),y(1)},placeholder:"Search...",className:"w-full pl-8 pr-3 py-2 border border-blue-300 bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Category"}),s.jsx("div",{className:"space-y-1",children:["All","Discussion","Questions","Tips","Showcase"].map(R=>s.jsx("button",{onClick:()=>{Fe(R),g(R),y(1)},className:`w-full text-left px-3 py-2 text-sm transition-colors ${_e===R?"bg-blue-50 text-blue-600 font-medium border-l-2 border-blue-600":"text-slate-600 hover:bg-slate-50"}`,children:R},R))})]}),s.jsxs("button",{onClick:ls,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold transition-colors rounded",children:[s.jsx(vo,{className:"w-4 h-4"}),"Back to Top"]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"lg:hidden border-b border-blue-300",children:s.jsx("div",{className:"flex items-center gap-1 overflow-x-auto pb-px",children:["All","Discussion","Questions","Tips","Showcase"].map(R=>s.jsx("button",{onClick:()=>{Fe(R),g(R),y(1)},className:`px-4 py-2.5 text-sm font-medium whitespace-nowrap transition-colors border-b-2 -mb-px ${_e===R?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900 hover:border-slate-300"}`,children:R},R))})}),a.length===0?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx(ms,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),s.jsx("p",{children:"No posts in this category yet."})]}):a.map(R=>s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 overflow-hidden cursor-pointer hover:shadow-lg transition-shadow duration-200 shadow-md hover:border-blue-400 rounded-lg",onClick:()=>dr(R),children:[s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center text-sm font-medium text-slate-600",children:R.author_name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-slate-900",children:R.author_name}),s.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-2",children:[s.jsx("span",{children:Sn(R.created_at)}),s.jsx("span",{className:"px-1.5 py-0.5 bg-slate-100 text-[10px] font-medium uppercase",children:R.category})]})]})]}),s.jsxs("div",{className:"flex gap-1",children:[ga(R)&&s.jsx("button",{onClick:ie=>{ie.stopPropagation(),zl(R)},className:"p-2 hover:bg-blue-50 text-slate-500 hover:text-blue-600 transition-colors",title:"Edit post",children:s.jsx(yo,{className:"w-4 h-4"})}),$l(R)&&s.jsx("button",{onClick:ie=>{ie.stopPropagation(),cr(R.id)},className:"p-2 hover:bg-red-50 text-slate-500 hover:text-red-600 transition-colors",title:"Delete post",children:s.jsx(Wt,{className:"w-4 h-4"})})]})]}),R.images.length>0&&s.jsx("div",{className:`grid ${R.images.length===1?"grid-cols-1":(R.images.length===2,"grid-cols-2")} gap-1 overflow-hidden`,children:R.images.slice(0,3).map((ie,ke)=>s.jsx("div",{className:`${R.images.length===3&&ke===0?"col-span-2":""} aspect-video overflow-hidden`,children:s.jsx("img",{src:ie,alt:"",className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})},ke))}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:R.title}),s.jsx("p",{className:"text-slate-700 text-base mb-4 line-clamp-3",children:R.description}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-3",children:[s.jsx("div",{className:"flex -space-x-1",children:[...Array(Math.min(3,R.likes))].map((ie,ke)=>s.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-100 border border-white flex items-center justify-center",children:s.jsx(Je,{className:"w-2.5 h-2.5 text-blue-600 fill-blue-600"})},ke))}),R.likes>0&&s.jsxs("span",{children:["Liked by ",R.likes," ",R.likes===1?"person":"others"]})]}),s.jsxs("div",{className:"flex items-center justify-between border-t border-black/10 pt-3",children:[s.jsxs("button",{onClick:ie=>{ie.stopPropagation(),Ms(R.id)},className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-slate-50 transition-colors ${Fs(R)?"text-blue-600":"text-slate-600"}`,children:[s.jsx(Je,{className:`w-4 h-4 transition-transform hover:scale-110 ${Fs(R)?"fill-blue-600":""}`}),R.likes]}),s.jsxs("button",{onClick:ie=>{ie.stopPropagation(),dr(R)},className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 transition-colors",children:[s.jsx(ms,{className:"w-4 h-4"}),R.comments_count," Comments"]}),s.jsxs("button",{onClick:ie=>ie.stopPropagation(),className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-600 hover:bg-slate-50 transition-colors",children:[s.jsx(wu,{className:"w-4 h-4"}),"Share"]})]})]})]},R.id))]}),s.jsx("div",{className:"hidden lg:block sticky top-24",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 p-4 shadow-lg hover:shadow-xl transition-shadow rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(rc,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Trending"})]}),s.jsxs("div",{className:"space-y-3",children:[bt.slice(0,5).map((R,ie)=>s.jsxs("div",{onClick:()=>dr(R),className:"flex items-start gap-3 cursor-pointer hover:bg-slate-50 p-2 -mx-2 transition-colors",children:[s.jsx("span",{className:"text-lg font-bold text-slate-300",children:ie+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 line-clamp-2",children:R.title}),s.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:R.author_name})]})]},R.id)),bt.length===0&&s.jsx("p",{className:"text-sm text-slate-400 text-center py-2",children:"No trending posts"})]})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 p-4 shadow-lg hover:shadow-xl transition-shadow rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ko,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Community Stats"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ko,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Total Members"})]}),s.jsx("span",{className:"font-semibold text-slate-900",children:Ee.total_users.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Total Posts"})]}),s.jsx("span",{className:"font-semibold text-slate-900",children:Ee.total_posts.toLocaleString()})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ms,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Total Comments"})]}),s.jsx("span",{className:"font-semibold text-slate-900",children:Ee.total_comments.toLocaleString()})]})]})]}),s.jsxs("button",{onClick:ls,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors shadow-md",children:[s.jsx(vo,{className:"w-4 h-4"}),"Back to Top"]})]})})]})]}),a.length>0&&s.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500",children:[s.jsxs("div",{children:[Math.min(v*h,j),"/",j," items"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",value:v,onChange:R=>y(Math.max(1,Math.min(x,Number(R.target.value)||1))),className:"w-10 px-2 py-1 border border-black/20 text-center text-sm",min:1,max:x}),s.jsxs("span",{children:["of ",x]}),s.jsx("button",{onClick:()=>y(R=>Math.max(1,R-1)),disabled:v<=1,className:"p-1 border border-black/20 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(tt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>y(R=>Math.min(x,R+1)),disabled:v>=x,className:"p-1 border border-black/20 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(st,{className:"w-4 h-4"})})]})]}),S&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 w-full max-w-lg mx-4 border border-blue-200 shadow-2xl rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Create Post"}),s.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-blue-100 rounded transition-colors",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:w,onChange:R=>k(R.target.value),className:`w-full px-3 py-2 border bg-white text-sm focus:outline-none focus:ring-1 rounded ${J.title?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-blue-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"What's on your mind?"}),J.title&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:J.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:D,onChange:R=>q(R.target.value),rows:4,className:`w-full px-3 py-2 border bg-white text-sm focus:outline-none focus:ring-1 rounded resize-none ${J.description?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-blue-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"Share your thoughts, tips, or questions..."}),J.description&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:J.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Category"}),s.jsxs("select",{value:N,onChange:R=>_(R.target.value),className:"w-full px-3 py-2 border border-blue-300 bg-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"Discussion",children:"Discussion"}),s.jsx("option",{value:"Tips",children:"Tips"}),s.jsx("option",{value:"Questions",children:"Questions"}),s.jsx("option",{value:"Showcase",children:"Showcase"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Images (max 3)"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[I.map((R,ie)=>s.jsxs("div",{className:"relative w-20 h-20 border border-blue-300 bg-blue-50 rounded overflow-hidden",children:[s.jsx("img",{src:URL.createObjectURL(R),alt:"",className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>ac(ie),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center",children:s.jsx(Pe,{className:"w-3 h-3"})})]},ie)),I.length<3&&s.jsx("button",{onClick:()=>{var R;return(R=C.current)==null?void 0:R.click()},className:"w-20 h-20 border border-dashed border-blue-300 bg-blue-50 flex items-center justify-center text-blue-400 hover:bg-blue-100 transition-colors rounded",children:s.jsx(ia,{className:"w-6 h-6"})})]}),s.jsx("input",{ref:C,type:"file",accept:"image/*",multiple:!0,onChange:Ul,className:"hidden"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-black/20",children:[s.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-black/20 text-sm hover:bg-slate-50",children:"Cancel"}),s.jsx("button",{onClick:ws,disabled:z||!w.trim()||!D.trim(),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Creating...":"Create Post"})]})]})}),F&&Q&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 w-full max-w-lg mx-4 border border-blue-200 shadow-2xl rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Edit Post"}),s.jsx("button",{onClick:()=>B(!1),className:"p-1 hover:bg-blue-100 rounded transition-colors",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),s.jsx("input",{type:"text",value:O,onChange:R=>G(R.target.value),className:`w-full px-3 py-2 border bg-white text-sm focus:outline-none focus:ring-1 rounded ${le.title?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-blue-300 focus:ring-blue-500 focus:border-blue-500"}`}),le.title&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:le.title})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:H,onChange:R=>V(R.target.value),rows:4,className:`w-full px-3 py-2 border bg-white text-sm focus:outline-none focus:ring-1 rounded resize-none ${le.description?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-blue-300 focus:ring-blue-500 focus:border-blue-500"}`}),le.description&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:le.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Category"}),s.jsxs("select",{value:K,onChange:R=>de(R.target.value),className:"w-full px-3 py-2 border border-blue-300 bg-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"Discussion",children:"Discussion"}),s.jsx("option",{value:"Tips",children:"Tips"}),s.jsx("option",{value:"Questions",children:"Questions"}),s.jsx("option",{value:"Showcase",children:"Showcase"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:[s.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 border border-blue-300 bg-white text-sm hover:bg-blue-50 text-slate-900 transition-colors rounded",children:"Cancel"}),s.jsx("button",{onClick:lc,disabled:ge||!O.trim()||!H.trim(),className:"px-4 py-2 bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded",children:ge?"Saving...":"Save Changes"})]})]})}),ue&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:Bl,children:s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col md:flex-row border border-blue-200 shadow-2xl rounded-lg",onClick:R=>R.stopPropagation(),children:[ue.images.length>0?s.jsxs("div",{className:"md:w-1/2 bg-slate-900 relative flex items-center justify-center",children:[s.jsx("img",{src:ue.images[Me],alt:"",className:"max-h-[50vh] md:max-h-full w-full object-contain"}),ue.images.length>1&&s.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:ue.images.map((R,ie)=>s.jsx("button",{onClick:()=>it(ie),className:`w-2.5 h-2.5 rounded-full transition-all ${ie===Me?"bg-white scale-110":"bg-white/50 hover:bg-white/75"}`},ie))})]}):s.jsx("div",{className:"md:w-1/2 bg-slate-100 flex items-center justify-center min-h-[200px]",children:s.jsx(Ur,{className:"w-16 h-16 text-slate-300"})}),s.jsxs("div",{className:"md:w-1/2 flex flex-col max-h-[50vh] md:max-h-[90vh]",children:[s.jsxs("div",{className:"p-4 border-b border-black/20 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-sm font-medium text-slate-600",children:ue.author_name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-slate-900",children:ue.author_name}),s.jsx("div",{className:"text-xs text-slate-400",children:Sn(ue.created_at)})]})]}),s.jsx("button",{onClick:Bl,className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 border-b border-black/20",children:[s.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:ue.title}),s.jsx("p",{className:"text-slate-700",children:ue.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm text-slate-500",children:[s.jsxs("button",{onClick:()=>Ms(ue.id),className:`flex items-center gap-1 ${Fs(ue)?"text-red-500":""}`,children:[s.jsx(Je,{className:`w-4 h-4 ${Fs(ue)?"fill-red-500":""}`}),ue.likes," likes"]}),s.jsxs("span",{children:[se.length," comments"]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:Re?s.jsx("div",{className:"text-center text-slate-400 py-4",children:"Loading comments..."}):se.length===0?s.jsx("div",{className:"text-center text-slate-400 py-4",children:"No comments yet. Be the first!"}):se.map(R=>s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-medium text-slate-600 shrink-0",children:R.author_name.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"bg-slate-100 px-3 py-2 rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm text-slate-900",children:R.author_name}),s.jsx("p",{className:"text-sm text-slate-700",children:R.text})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-400",children:[s.jsx("span",{children:Sn(R.created_at)}),ba(R)&&s.jsx("button",{onClick:()=>ic(R.id),className:"text-red-400 hover:text-red-600",children:"Delete"})]})]})]},R.id))}),t?s.jsx("div",{className:"p-4 border-t border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"text",value:A,onChange:R=>re(R.target.value),placeholder:"Write a comment...",className:`w-full px-3 py-2 border bg-white text-sm focus:outline-none focus:ring-1 rounded ${me?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-blue-300 focus:ring-blue-500 focus:border-blue-500"}`,onKeyDown:R=>R.key==="Enter"&&Hl()}),me&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:me})]}),s.jsx("button",{onClick:Hl,disabled:oe,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded self-start",children:s.jsx(Wk,{className:"w-4 h-4"})})]})}):s.jsxs("div",{className:"p-4 border-t border-blue-200 bg-gradient-to-r from-blue-50 to-white text-sm text-slate-700",children:["Login to comment on this post."," ",s.jsx(ae,{to:"/login",className:"text-blue-700 font-semibold hover:underline",children:"Login"})]})]})]})})]})}function ZC(){return s.jsxs("div",{className:"space-y-8",children:[s.jsx(we,{title:"E-commerce",subtitle:"Manage listings and browse dried fish products.",backgroundImage:"/assets/page-hero/grade.jpg"}),s.jsxs("div",{className:"card border border-sidebar-subtle shadow-sidebar-subtle max-w-xl text-center py-16",children:[s.jsx(zr,{className:"w-20 h-20 mx-auto text-slate-300 mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Not implemented yet"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"The e-commerce section is planned for a future release. Check back later for listings and seller tools."}),s.jsx(ae,{to:"/",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors",children:"Back to Home"})]})]})}function e3(){const{user:e}=rt(),t=new Date().getFullYear(),r=new Date().getMonth()+1,[n,a]=u.useState(t),[l,i]=u.useState("12m"),[o,c]=u.useState("H1"),[d,m]=u.useState([]),[f,p]=u.useState(!0),[g,v]=u.useState(null),[y,j]=u.useState(null),[b,h]=u.useState(!0),[x,S]=u.useState(t),[E,w]=u.useState(r),[k,D]=u.useState(null),[q,N]=u.useState(!0),[_,I]=u.useState([]),[L,z]=u.useState(!0),[M,J]=u.useState(1),U=10,[C,F]=u.useState([]),[B,Q]=u.useState(0),[$,O]=u.useState(!0),[G,H]=u.useState(null),[V,K]=u.useState(null),[de,ge]=u.useState({x:0,y:0}),[fe,le]=u.useState(!1),[Ie,ue]=u.useState(!1);u.useEffect(()=>{z(!0),Rb(4).then(A=>I(A.posts||[])).catch(()=>I([])).finally(()=>z(!1))},[]),u.useEffect(()=>{h(!0),Fb().then(A=>j(A.stats||null)).catch(()=>j(null)).finally(()=>h(!1))},[]),u.useEffect(()=>{N(!0),bk(x,E).then(A=>D(A)).catch(()=>D(null)).finally(()=>N(!1))},[x,E]),u.useEffect(()=>{p(!0),v(null),j5(n).then(A=>{m(A.months||[])}).catch(()=>v("Failed to load scan summary")).finally(()=>p(!1))},[n]),u.useEffect(()=>{O(!0),H(null),kb(M,U).then(A=>{F(A.entries||[]),Q(A.total||0)}).catch(()=>H("Failed to load scan table")).finally(()=>O(!1))},[M]);const Y=u.useMemo(()=>{const A=d.length?d:[];return l==="6m"?o==="H1"?A.slice(0,6):A.slice(6,12):A},[d,l,o]),se=u.useMemo(()=>{const Se=Y.map(it=>it.count),me=Math.max(1,...Se),Le=Se.length>1?(600-20*2)/(Se.length-1):0;return{points:Se.map((it,gt)=>{const At=20+gt*Le,Kr=20+(200-20*2)*(1-it/me);return`${At},${Kr}`}).join(" "),width:600,height:200,padding:20,maxCount:me}},[Y]),be=Math.max(1,Math.ceil(B/U)),Re=[t,t-1,t-2],T=A=>{if(!A)return"";const re=new Date(A);return Number.isNaN(re.getTime())?A:re.toISOString().slice(0,10)};return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Admin Dashboard",subtitle:"Manage your platform, monitor analytics, and oversee all system activities.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900",children:["Welcome Back, ",(e==null?void 0:e.name)||"Admin"]}),s.jsx("p",{className:"text-sm text-slate-500",children:"Real-time platform performance metrics"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"px-3 py-2 border border-slate-200 shadow-md bg-white text-sm font-medium hover:bg-slate-50 transition-colors rounded",children:[s.jsx(_t,{className:"w-4 h-4 inline-block mr-2"}),"Date"]}),s.jsxs("button",{className:"px-3 py-2 border border-slate-200 shadow-md bg-white text-sm font-medium hover:bg-slate-50 transition-colors rounded",children:[s.jsx(Ol,{className:"w-4 h-4 inline-block mr-2"}),"Export"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-500",children:"Total Sales"}),s.jsx("div",{className:"w-9 h-9 rounded-lg bg-blue-100 text-blue-700 flex items-center justify-center",children:s.jsx(wn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mt-3 text-2xl font-bold text-blue-900",children:b?"...":`${((y==null?void 0:y.total_sales)||0).toLocaleString("en-US",{minimumFractionDigits:2})}`}),s.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 text-xs font-semibold text-emerald-600",children:[s.jsx(lf,{className:"w-4 h-4"}),"All Sellers"]})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-500",children:"Avg Order Value"}),s.jsx("div",{className:"w-9 h-9 rounded-lg bg-blue-100 text-blue-700 flex items-center justify-center",children:s.jsx(pu,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mt-3 text-2xl font-bold text-blue-900",children:b?"...":`${((y==null?void 0:y.avg_order_value)||0).toLocaleString("en-US",{minimumFractionDigits:2})}`}),s.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 text-xs font-semibold text-blue-600",children:[s.jsx(pu,{className:"w-4 h-4"}),"All Sellers"]})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-500",children:"Total Orders"}),s.jsx("div",{className:"w-9 h-9 rounded-lg bg-blue-100 text-blue-700 flex items-center justify-center",children:s.jsx(lt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mt-3 text-2xl font-bold text-blue-900",children:b?"...":((y==null?void 0:y.total_orders)||0).toLocaleString()}),s.jsxs("div",{className:"mt-2 inline-flex items-center gap-1 text-xs font-semibold text-emerald-600",children:[s.jsx(lf,{className:"w-4 h-4"}),"All Sellers"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 pr-10",children:[s.jsx("div",{className:"text-lg font-bold text-blue-900",children:"Orders by Time"}),s.jsx("button",{onClick:()=>le(!0),className:"absolute top-4 right-4 p-2 text-blue-600 hover:bg-blue-50 transition-colors border border-blue-200 z-10",title:"Expand view",children:s.jsx(pl,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[s.jsx("select",{value:x,onChange:A=>S(Number(A.target.value)),className:"px-2 py-1 border border-blue-300 shadow-md bg-white text-xs focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded",children:[t,t-1,t-2].map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx("select",{value:E,onChange:A=>w(Number(A.target.value)),className:"px-2 py-1 border border-blue-300 shadow-md bg-white text-xs focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded",children:[{val:1,name:"Jan"},{val:2,name:"Feb"},{val:3,name:"Mar"},{val:4,name:"Apr"},{val:5,name:"May"},{val:6,name:"Jun"},{val:7,name:"Jul"},{val:8,name:"Aug"},{val:9,name:"Sep"},{val:10,name:"Oct"},{val:11,name:"Nov"},{val:12,name:"Dec"}].map(A=>s.jsx("option",{value:A.val,children:A.name},A.val))}),s.jsx("div",{className:"text-xs text-slate-600 ml-auto",children:k?`0  ${k.max_count}`:"0  0"})]}),q?s.jsx("div",{className:"h-32 flex items-center justify-center text-sm text-slate-500",children:"Loading..."}):k&&k.weeks?s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-slate-500",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(A=>s.jsx("div",{className:"text-center",children:A},A))}),k.weeks.map((A,re)=>s.jsx("div",{className:"grid grid-cols-7 gap-1",children:A.map((oe,Se)=>{const me=k.max_count||1,Le=oe.day!==null&&oe.count>0?Math.min(oe.count/me,1):0;return s.jsx("div",{className:`h-6 border border-slate-200 flex items-center justify-center text-[9px] font-medium rounded-sm ${oe.day===null?"bg-slate-50":Le>.7?"bg-blue-600 text-white":Le>.4?"bg-blue-400 text-white":Le>0?"bg-blue-200 text-blue-900":"bg-blue-50 text-slate-400"}`,title:oe.day!==null?`Day ${oe.day}: ${oe.count} orders (${oe.total.toLocaleString()})`:"",children:oe.day!==null&&oe.count||""},Se)})},re))]}):s.jsx("div",{className:"h-32 flex items-center justify-center text-sm text-slate-500",children:"No data"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 lg:col-span-2 rounded-lg relative",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-3 pr-10",children:[s.jsx("div",{className:"text-lg font-bold text-blue-900",children:"Number of Scans"}),s.jsx("button",{onClick:()=>ue(!0),className:"absolute top-4 right-4 p-2 text-blue-600 hover:bg-blue-50 transition-colors border border-blue-200 z-10",title:"Expand view",children:s.jsx(pl,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("select",{value:n,onChange:A=>a(Number(A.target.value)),className:"px-2 py-1 border border-blue-300 shadow-md bg-white text-xs focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded","aria-label":"Select year",children:Re.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsxs("div",{className:"flex border border-blue-300 shadow-md rounded",children:[s.jsx("button",{type:"button",onClick:()=>i("12m"),className:`px-3 py-1 text-xs font-semibold transition-colors ${l==="12m"?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-50"}`,children:"12 Months"}),s.jsxs("button",{type:"button",onClick:()=>{l==="6m"?c(o==="H1"?"H2":"H1"):(i("6m"),c("H1"))},className:`px-3 py-1 text-xs font-semibold border-l border-blue-300 transition-colors ${l==="6m"?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-50"}`,children:["6 Months",l==="6m"?o==="H1"?" (Jan-Jun)":" (Jul-Dec)":""]})]})]})]}),f?s.jsx("div",{className:"h-48 flex items-center justify-center text-sm text-slate-500",children:"Loading chart"}):g?s.jsx("div",{className:"h-48 flex items-center justify-center text-sm text-red-600",children:g}):s.jsx("div",{children:s.jsxs("div",{className:"relative w-full h-48",children:[s.jsxs("svg",{viewBox:`0 0 ${se.width} ${se.height}`,preserveAspectRatio:"none",className:"w-full h-full",children:[Array.from({length:5}).map((A,re)=>{const oe=se.padding+re*(se.height-se.padding*2)/4;return s.jsx("line",{x1:se.padding,y1:oe,x2:se.width-se.padding,y2:oe,stroke:"#E2E8F0"},`h-${re}`)}),Y.map((A,re)=>{const oe=Y.length>1?(se.width-se.padding*2)/(Y.length-1):0,Se=se.padding+re*oe;return s.jsx("line",{x1:Se,y1:se.padding,x2:Se,y2:se.height-se.padding,stroke:"#E2E8F0"},`v-${re}`)}),s.jsx("polyline",{fill:"none",stroke:"#3B82F6",strokeWidth:"2",points:se.points}),se.points.split(" ").map((A,re)=>{const[oe,Se]=A.split(","),me=V===re;return s.jsx("g",{onMouseEnter:Le=>{K(re);const Me=Le.currentTarget.closest("svg");if(Me){const it=Me.getBoundingClientRect(),gt=Number(oe)/se.width*it.width,At=Number(Se)/se.height*it.height;ge({x:it.left+gt,y:it.top+At-50})}},onMouseLeave:()=>K(null),style:{cursor:"pointer"},children:s.jsx("circle",{cx:oe,cy:Se,r:me?"5":"3",fill:me?"#1E40AF":"#3B82F6",className:"transition-all duration-150"})},`p-${re}`)})]}),V!==null&&Y[V]&&s.jsxs("div",{className:"fixed bg-slate-800 text-white px-3 py-2 rounded text-xs whitespace-nowrap shadow-lg pointer-events-none z-50",style:{left:de.x,top:de.y,transform:"translateX(-50%)"},children:[s.jsx("div",{className:"font-semibold",children:Y[V].label}),s.jsxs("div",{children:[Y[V].count," scans"]})]})]})})]})]}),fe&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-xl rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[s.jsxs("h3",{className:"text-lg font-bold text-blue-900",children:["Orders by Time - ",k==null?void 0:k.month_name," ",x]}),s.jsx("button",{onClick:()=>le(!1),className:"p-1 hover:bg-slate-100 transition-colors rounded",children:s.jsx(Pe,{className:"w-5 h-5 text-slate-600"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[s.jsx("select",{value:x,onChange:A=>S(Number(A.target.value)),className:"px-3 py-2 border border-blue-300 shadow-md bg-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded",children:[t,t-1,t-2].map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsx("select",{value:E,onChange:A=>w(Number(A.target.value)),className:"px-3 py-2 border border-blue-300 shadow-md bg-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 rounded",children:[{val:1,name:"January"},{val:2,name:"February"},{val:3,name:"March"},{val:4,name:"April"},{val:5,name:"May"},{val:6,name:"June"},{val:7,name:"July"},{val:8,name:"August"},{val:9,name:"September"},{val:10,name:"October"},{val:11,name:"November"},{val:12,name:"December"}].map(A=>s.jsx("option",{value:A.val,children:A.name},A.val))}),s.jsxs("div",{className:"text-sm text-slate-600 ml-auto",children:["Max: ",(k==null?void 0:k.max_count)||0," orders/day"]})]}),q?s.jsx("div",{className:"h-48 flex items-center justify-center text-sm text-slate-500",children:"Loading..."}):k&&k.weeks?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"grid grid-cols-7 gap-2 text-sm text-slate-500",children:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(A=>s.jsx("div",{className:"text-center font-semibold",children:A},A))}),k.weeks.map((A,re)=>s.jsx("div",{className:"grid grid-cols-7 gap-2",children:A.map((oe,Se)=>{const me=k.max_count||1,Le=oe.day!==null&&oe.count>0?Math.min(oe.count/me,1):0;return s.jsx("div",{className:`h-16 border border-slate-200 flex flex-col items-center justify-center text-xs font-semibold rounded ${oe.day===null?"bg-slate-50":Le>.7?"bg-blue-600 text-white":Le>.4?"bg-blue-400 text-white":Le>0?"bg-blue-200 text-blue-900":"bg-blue-50 text-slate-400"}`,children:oe.day!==null&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-[10px] opacity-70",children:["Day ",oe.day]}),s.jsx("span",{className:"text-sm font-bold",children:oe.count}),oe.total>0&&s.jsxs("span",{className:"text-[9px] opacity-80",children:["",oe.total.toLocaleString()]})]})},Se)})},re))]}):s.jsx("div",{className:"h-48 flex items-center justify-center text-sm text-slate-500",children:"No data for this period"})]})]})}),Ie&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white max-w-6xl w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"Number of Scans"}),s.jsx("button",{onClick:()=>ue(!1),className:"p-1 hover:bg-slate-100 transition-colors",children:s.jsx(Pe,{className:"w-5 h-5 text-slate-600"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[s.jsx("select",{value:n,onChange:A=>a(Number(A.target.value)),className:"px-3 py-2 border border-blue-300 shadow-md bg-white text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500",children:Re.map(A=>s.jsx("option",{value:A,children:A},A))}),s.jsxs("div",{className:"flex border border-blue-300 shadow-md rounded",children:[s.jsx("button",{type:"button",onClick:()=>i("12m"),className:`px-4 py-2 text-sm font-semibold transition-colors ${l==="12m"?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-50"}`,children:"12 Months"}),s.jsxs("button",{type:"button",onClick:()=>{l==="6m"?c(o==="H1"?"H2":"H1"):(i("6m"),c("H1"))},className:`px-4 py-2 text-sm font-semibold border-l border-blue-300 transition-colors ${l==="6m"?"bg-blue-600 text-white":"bg-white text-blue-700 hover:bg-blue-50"}`,children:["6 Months",l==="6m"?o==="H1"?" (Jan-Jun)":" (Jul-Dec)":""]})]})]}),f?s.jsx("div",{className:"h-96 flex items-center justify-center text-sm text-slate-500",children:"Loading chart"}):g?s.jsx("div",{className:"h-96 flex items-center justify-center text-sm text-red-600",children:g}):s.jsxs("div",{children:[s.jsx("div",{className:"relative w-full h-96",children:s.jsxs("svg",{viewBox:`0 0 ${se.width} ${se.height}`,preserveAspectRatio:"none",className:"w-full h-full",children:[Array.from({length:5}).map((A,re)=>{const oe=se.padding+re*(se.height-se.padding*2)/4;return s.jsx("line",{x1:se.padding,y1:oe,x2:se.width-se.padding,y2:oe,stroke:"#E2E8F0"},`h-${re}`)}),Y.map((A,re)=>{const oe=Y.length>1?(se.width-se.padding*2)/(Y.length-1):0,Se=se.padding+re*oe;return s.jsx("line",{x1:Se,y1:se.padding,x2:Se,y2:se.height-se.padding,stroke:"#E2E8F0"},`v-${re}`)}),s.jsx("polyline",{fill:"none",stroke:"#3B82F6",strokeWidth:"3",points:se.points}),se.points.split(" ").map((A,re)=>{const[oe,Se]=A.split(",");return s.jsx("circle",{cx:oe,cy:Se,r:"6",fill:"#3B82F6"},`p-${re}`)})]})}),s.jsx("div",{className:"flex justify-between text-sm text-slate-500 mt-4",children:Y.map(A=>s.jsx("span",{className:"font-semibold",children:A.label},A.key))})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 lg:col-span-2 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-blue-900 mb-3",children:"Results of Scans"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"text-slate-700 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-2 font-bold text-blue-900",children:"Fish Type"}),s.jsx("th",{className:"text-left py-3 px-2 font-bold text-blue-900",children:"Detection"}),s.jsx("th",{className:"text-left py-3 px-2 font-bold text-blue-900",children:"Grade"}),s.jsx("th",{className:"text-left py-3 px-2 font-bold text-blue-900",children:"Score"}),s.jsx("th",{className:"text-left py-3 px-2 font-bold text-blue-900",children:"User"}),s.jsx("th",{className:"text-left py-3 px-2 font-bold text-blue-900",children:"Date"})]})}),s.jsx("tbody",{children:$?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-6 text-center text-slate-600",children:"Loading scans"})}):G?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-6 text-center text-red-600",children:G})}):C.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-6 text-center text-slate-600",children:"No scans found"})}):C.map(A=>s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("td",{className:"py-2",children:A.fish_type||"Unknown"}),s.jsx("td",{className:"py-2",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${A.detected?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:A.detected?"Detected":"No Detection"})}),s.jsx("td",{className:"py-2",children:s.jsx("span",{className:"px-2 py-0.5 border border-slate-200 shadow-md text-xs font-semibold",children:A.grade||"Unknown"})}),s.jsx("td",{className:"py-2",children:A.score!=null?A.score.toFixed(2):""}),s.jsx("td",{className:"py-2",children:A.user_name||"Unknown"}),s.jsx("td",{className:"py-2",children:T(A.timestamp)})]},A.id))})]})}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("div",{className:"text-xs text-slate-600",children:["Page ",M," of ",be]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>J(A=>Math.max(1,A-1)),disabled:M<=1,className:"p-2 border border-blue-300 shadow-md bg-white hover:bg-blue-50 disabled:opacity-50 disabled:hover:bg-white transition-colors rounded","aria-label":"Previous page",children:s.jsx(tt,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{type:"button",onClick:()=>J(A=>Math.min(be,A+1)),disabled:M>=be,className:"p-2 border border-blue-300 shadow-md bg-white hover:bg-blue-50 disabled:opacity-50 disabled:hover:bg-white transition-colors rounded","aria-label":"Next page",children:s.jsx(st,{className:"w-4 h-4 text-blue-600"})})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-lg font-bold text-blue-900 mb-3",children:"Most Liked Community Posts"}),s.jsx("div",{className:"space-y-3",children:L?s.jsx("div",{className:"text-sm text-slate-600 text-center py-4",children:"Loading..."}):_.length===0?s.jsx("div",{className:"text-sm text-slate-600 text-center py-4",children:"No posts yet"}):_.map((A,re)=>s.jsxs("div",{className:"border border-blue-200 p-3 bg-white rounded hover:shadow transition-shadow",children:[s.jsxs("div",{className:"text-xs text-blue-600 font-semibold",children:["#",re+1,"  ",A.likes," likes"]}),s.jsx("div",{className:"font-semibold text-slate-900 mt-1 line-clamp-2",children:A.title}),s.jsxs("div",{className:"text-xs text-slate-700 mt-1",children:["by ",A.author_name]})]},A.id))}),s.jsx("div",{className:"mt-4",children:s.jsx(ae,{to:"/forum",className:"text-sm font-bold text-blue-600 hover:text-blue-800 transition-colors",children:"View Forum "})})]})]})]})}const Cu={admin:qk,seller:zr,user:bs},_u={admin:"bg-purple-100 text-purple-700 border-purple-200",seller:"bg-blue-100 text-blue-700 border-blue-200",user:"bg-slate-100 text-slate-700 border-slate-200"},t3={admin:"Administrators",seller:"Sellers",user:"Users"};function vf({users:e,title:t,roleType:r,isCollapsed:n,onToggleCollapse:a,showRoleColumn:l=!0,selectedIds:i,onToggleSelect:o,onSelectAll:c,onStatusClick:d,onViewUser:m}){const[f,p]=u.useState(1),g=8,v=Math.ceil(e.length/g),y=e.slice((f-1)*g,f*g),j=y.length>0&&y.every(x=>i.has(x.id)),b=r?Cu[r]:null,h=x=>{if(!x)return"-";const S=new Date(x);return isNaN(S.getTime())?x:S.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden transition-all duration-300 rounded-lg",children:[t&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:a,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[b&&s.jsx("div",{className:`p-2 ${_u[r].split(" ")[0]}`,children:s.jsx(b,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-bold text-blue-900 text-base",children:t}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:e.length})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-slate-600",children:n?"Click to expand":`Showing ${y.length} of ${e.length}`}),n?s.jsx(ct,{className:"w-5 h-5 text-blue-600"}):s.jsx(qs,{className:"w-5 h-5 text-blue-600"})]})]}),s.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${n?"max-h-0 opacity-0":"max-h-[3000px] opacity-100"}`,children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-white border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-12 px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:j,onChange:()=>{c(j?[]:y.map(x=>x.id))},className:"w-4 h-4 accent-blue-600"})}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Email"}),l&&s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Role"}),r==="user"||l?s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Orders"}):null,r==="seller"&&s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Products"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Joined"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:y.map(x=>s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:i.has(x.id),onChange:()=>o(x.id),className:"w-4 h-4 accent-blue-600"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[x.avatar?s.jsx("img",{src:x.avatar,alt:x.name,className:"w-10 h-10 rounded-full object-cover border border-blue-200"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-base font-medium text-blue-700",children:x.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 text-base",children:x.name}),s.jsxs("div",{className:"text-sm text-slate-600",children:["ID: ",x.id.slice(-8)]})]})]})}),s.jsx("td",{className:"px-4 py-4 text-base text-slate-700",children:x.email}),l&&s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-sm font-medium border rounded ${_u[x.role]}`,children:[Rs.createElement(Cu[x.role],{className:"w-3.5 h-3.5"}),x.role.charAt(0).toUpperCase()+x.role.slice(1)]})}),(r==="user"||l)&&s.jsx("td",{className:"px-4 py-4 text-base text-slate-700",children:x.orders_count}),r==="seller"&&s.jsx("td",{className:"px-4 py-4 text-base text-slate-700",children:x.products_count}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("button",{onClick:()=>d(x),className:`inline-block px-3 py-1.5 text-sm font-medium cursor-pointer transition-all hover:opacity-80 rounded ${x.status==="active"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:x.status==="active"?"Active":"Inactive"})}),s.jsx("td",{className:"px-4 py-4 text-base text-slate-600",children:h(x.joined_at)}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("button",{onClick:()=>m(x),className:"p-2 hover:bg-blue-100 text-slate-500 hover:text-blue-700 border border-transparent hover:border-blue-300 transition-all rounded",title:"View Details",children:s.jsx(Nn,{className:"w-5 h-5"})})})})]},x.id))})]})}),v>1&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-t border-black/15 bg-slate-50",children:[s.jsxs("div",{className:"text-sm text-slate-500",children:[(f-1)*g+1,"-",Math.min(f*g,e.length)," of ",e.length]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>p(x=>Math.max(1,x-1)),disabled:f<=1,className:"p-2 border border-black/15 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(tt,{className:"w-4 h-4"})}),[...Array(Math.min(5,v))].map((x,S)=>{const E=S+1;return s.jsx("button",{onClick:()=>p(E),className:`px-3 py-2 text-sm border border-black/15 ${f===E?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-slate-50"}`,children:E},S)}),s.jsx("button",{onClick:()=>p(x=>Math.min(v,x+1)),disabled:f>=v,className:"p-2 border border-black/15 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(st,{className:"w-4 h-4"})})]})]})]})]})}function s3(){const[e,t]=u.useState(""),[r,n]=u.useState("all"),[a,l]=u.useState("all"),[i,o]=u.useState(new Set),[c,d]=u.useState([]),[m,f]=u.useState(null),[p,g]=u.useState(!0),[v,y]=u.useState(null),[j,b]=u.useState({user:null,open:!1}),[h,x]=u.useState(""),[S,E]=u.useState(!1),[w,k]=u.useState({user:null,open:!1}),[D,q]=u.useState(!1),[N,_]=u.useState({admin:!1,seller:!1,user:!1}),I=G=>{_(H=>({...H,[G]:!H[G]}))};u.useEffect(()=>{L()},[]);const L=async()=>{g(!0),y(null);try{const[G,H]=await Promise.all([ak(1,100,"all","all",""),lk()]);d(G.users||[]),f(H.stats||null)}catch{y("Failed to load users")}finally{g(!1)}},z=u.useMemo(()=>c.filter(G=>{const H=G.name.toLowerCase().includes(e.toLowerCase())||G.email.toLowerCase().includes(e.toLowerCase()),V=a==="all"||G.status===a;return H&&V}),[c,e,a]),M=u.useMemo(()=>({admin:z.filter(G=>G.role==="admin"),seller:z.filter(G=>G.role==="seller"),user:z.filter(G=>G.role==="user")}),[z]),J=u.useMemo(()=>{if(r==="all")return["admin","seller","user"];const G=["admin","seller","user"].filter(H=>H!==r);return[r,...G]},[r]),U=r!=="all",C=G=>{o(H=>{const V=new Set(H);return V.has(G)?V.delete(G):V.add(G),V})},F=G=>{G.length===0?o(new Set):o(H=>{const V=new Set(H);return G.forEach(K=>V.add(K)),V})},B=G=>{b({user:G,open:!0}),x("")},Q=async()=>{if(j.user){E(!0);try{await ik(j.user.id,h),await L(),b({user:null,open:!1})}catch{alert("Failed to update status")}finally{E(!1)}}},$=async G=>{q(!0),k({user:null,open:!0});try{const H=await ok(G.id);k({user:H.user,open:!0})}catch{k({user:null,open:!1}),alert("Failed to load user details")}finally{q(!1)}},O=G=>{if(!G)return"-";const H=new Date(G);return isNaN(H.getTime())?G:H.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"User Management",subtitle:"View and manage all registered users, sellers, and administrators.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Total Users"}),s.jsx("div",{className:"text-3xl font-bold text-slate-900",children:(m==null?void 0:m.total)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-purple-50 border border-purple-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-purple-700 mb-1",children:"Admins"}),s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:(m==null?void 0:m.admins)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Sellers"}),s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:(m==null?void 0:m.sellers)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-slate-50 border border-slate-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-slate-700 mb-1",children:"Users"}),s.jsx("div",{className:"text-3xl font-bold text-slate-900",children:(m==null?void 0:m.users)??"-"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[320px]",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search by name or email...",value:e,onChange:G=>t(G.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-blue-300 bg-white text-base focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsxs("select",{value:r,onChange:G=>n(G.target.value),className:"px-3 py-2.5 border border-blue-300 bg-white text-base min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"seller",children:"Seller"}),s.jsx("option",{value:"user",children:"User"})]})]}),s.jsxs("select",{value:a,onChange:G=>l(G.target.value),className:"px-3 py-2.5 border border-blue-300 bg-white text-base min-w-[130px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 border border-blue-300 bg-white text-base hover:bg-blue-50 transition-colors ml-auto rounded font-semibold text-blue-700",children:[s.jsx(Ol,{className:"w-4 h-4"}),"Export"]}),i.size>0&&s.jsxs("div",{className:"text-sm font-semibold text-blue-700 bg-blue-100 px-3 py-2 border border-blue-300 rounded",children:[i.size," selected"]})]}),p?s.jsx("div",{className:"text-center py-16 text-slate-500",children:"Loading users..."}):v?s.jsx("div",{className:"text-center py-16 text-red-600",children:v}):s.jsx("div",{className:`transition-all duration-500 ease-in-out ${U?"space-y-5":"space-y-0"}`,children:U?J.map((G,H)=>s.jsx("div",{className:"transition-all duration-500 ease-in-out transform",style:{animationDelay:`${H*100}ms`,animation:"slideIn 0.4s ease-out forwards"},children:s.jsx(vf,{users:M[G],title:t3[G],roleType:G,isCollapsed:N[G],onToggleCollapse:()=>I(G),showRoleColumn:!1,selectedIds:i,onToggleSelect:C,onSelectAll:F,onStatusClick:B,onViewUser:$})},G)):s.jsx("div",{className:"transition-all duration-500 ease-in-out",children:s.jsx(vf,{users:z,showRoleColumn:!0,selectedIds:i,onToggleSelect:C,onSelectAll:F,onStatusClick:B,onViewUser:$})})}),j.open&&j.user&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md border border-black/15 shadow-xl",onClick:G=>G.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:[j.user.status==="active"?"Deactivate":"Activate"," User"]}),s.jsx("button",{onClick:()=>b({user:null,open:!1}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[j.user.avatar?s.jsx("img",{src:j.user.avatar,alt:"",className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-lg font-medium",children:j.user.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:j.user.name}),s.jsx("div",{className:"text-sm text-slate-500",children:j.user.email})]})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 text-amber-800 text-sm",children:[s.jsx(Pt,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsx("div",{children:j.user.status==="active"?"This user will be deactivated and notified via email. They will not be able to log in until reactivated.":"This user will be reactivated and notified via email. They will regain access to their account."})]}),j.user.status==="active"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reason for deactivation"}),s.jsx("textarea",{value:h,onChange:G=>x(G.target.value),rows:3,className:"w-full px-3 py-2 border border-black/15 text-base focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none",placeholder:"Enter reason (will be sent to user via email)..."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-5 border-t border-black/15 bg-slate-50",children:[s.jsx("button",{onClick:()=>b({user:null,open:!1}),className:"px-4 py-2 border border-black/15 text-base hover:bg-white",children:"Cancel"}),s.jsx("button",{onClick:Q,disabled:S,className:`px-4 py-2 text-white text-base font-medium disabled:opacity-50 ${j.user.status==="active"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:S?"Processing...":j.user.status==="active"?"Deactivate":"Activate"})]})]})}),w.open&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>k({user:null,open:!1}),children:s.jsxs("div",{className:"bg-white w-full max-w-lg border border-black/15 shadow-xl",onClick:G=>G.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"User Details"}),s.jsx("button",{onClick:()=>k({user:null,open:!1}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),D?s.jsx("div",{className:"p-10 text-center text-slate-500",children:"Loading..."}):w.user?s.jsxs("div",{className:"p-5 space-y-5",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[w.user.avatar?s.jsx("img",{src:w.user.avatar,alt:"",className:"w-16 h-16 rounded-full object-cover border border-black/10"}):s.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-200 flex items-center justify-center text-2xl font-medium text-slate-600",children:w.user.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold text-slate-900",children:w.user.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-sm font-medium border ${_u[w.user.role]}`,children:[Rs.createElement(Cu[w.user.role],{className:"w-3.5 h-3.5"}),w.user.role.charAt(0).toUpperCase()+w.user.role.slice(1)]}),s.jsx("span",{className:`px-2 py-0.5 text-sm font-medium ${w.user.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:w.user.status})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx(Ml,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Email"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.user.email})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx(_t,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Joined"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:O(w.user.joined_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx(Yb,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Scans"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.user.scans_count})]})]}),w.user.role==="user"&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx(lt,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Orders"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.user.orders_count})]})]}),w.user.role==="seller"&&s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx(ye,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Products"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.user.products_count})]})]})]}),w.user.status==="inactive"&&w.user.deactivation_reason&&s.jsxs("div",{className:"p-3 bg-red-50 border border-red-200",children:[s.jsx("div",{className:"text-xs text-red-600 font-medium mb-1",children:"Deactivation Reason"}),s.jsx("div",{className:"text-sm text-red-800",children:w.user.deactivation_reason}),w.user.deactivated_at&&s.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Deactivated on ",O(w.user.deactivated_at)]})]})]}):null,s.jsx("div",{className:"flex justify-end p-5 border-t border-black/15 bg-slate-50",children:s.jsx("button",{onClick:()=>k({user:null,open:!1}),className:"px-4 py-2 bg-blue-600 text-white text-base font-medium hover:bg-blue-700",children:"Close"})})]})}),s.jsx("style",{children:`
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}const Jc={active:"bg-green-100 text-green-800",deleted:"bg-red-100 text-red-800",disabled:"bg-orange-100 text-orange-800"},Xc={active:Gt,deleted:Wt,disabled:qa};function yf({images:e,size:t="normal"}){const[r,n]=u.useState(0),a=t==="large"?"w-full max-w-md h-64":"w-20 h-20",l=t==="large"?"w-12 h-12":"w-6 h-6",i=t==="large"?"p-2":"p-0.5",o=t==="large"?"w-5 h-5":"w-3 h-3";return!e||e.length===0?s.jsx("div",{className:`${a} bg-slate-100 flex items-center justify-center border border-black/10`,children:s.jsx(Ur,{className:`${l} text-slate-400`})}):s.jsxs("div",{className:`relative ${a} group`,children:[s.jsx("img",{src:e[r],alt:`Image ${r+1}`,className:`${a} object-cover border border-black/10`}),e.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:c=>{c.stopPropagation(),n(d=>(d-1+e.length)%e.length)},className:`absolute left-1 top-1/2 -translate-y-1/2 bg-black/60 text-white ${i} rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/80`,children:s.jsx(tt,{className:o})}),s.jsx("button",{onClick:c=>{c.stopPropagation(),n(d=>(d+1)%e.length)},className:`absolute right-1 top-1/2 -translate-y-1/2 bg-black/60 text-white ${i} rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/80`,children:s.jsx(st,{className:o})}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5",children:e.map((c,d)=>s.jsx("button",{onClick:m=>{m.stopPropagation(),n(d)},className:`w-2 h-2 rounded-full transition-all ${d===r?"bg-white scale-110":"bg-white/50 hover:bg-white/70"}`},d))})]})]})}function jf({text:e}){const[t,r]=u.useState(!1),n=async a=>{a.stopPropagation();try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(l){console.error("Failed to copy:",l)}};return s.jsx("button",{onClick:n,className:`p-1 rounded transition-all ${t?"bg-green-100 text-green-600":"hover:bg-slate-100 text-slate-500 hover:text-slate-700"}`,title:t?"Copied!":"Copy ID",children:t?s.jsx(tc,{className:"w-3 h-3"}):s.jsx(Hb,{className:"w-3 h-3"})})}function r3(){const[e,t]=u.useState(""),[r,n]=u.useState("all"),[a,l]=u.useState("all"),[i,o]=u.useState(1),c=10,[d,m]=u.useState([]),[f,p]=u.useState(0),[g,v]=u.useState(null),[y,j]=u.useState(!0),[b,h]=u.useState(null),[x,S]=u.useState(new Set),[E,w]=u.useState({post:null,open:!1}),[k,D]=u.useState(""),[q,N]=u.useState(!1),[_,I]=u.useState({open:!1}),[L,z]=u.useState(null),[M,J]=u.useState([]),[U,C]=u.useState(!1),[F,B]=u.useState({comment:null,open:!1}),[Q,$]=u.useState(""),[O,G]=u.useState(!1);u.useEffect(()=>{H()},[i,r,a]),u.useEffect(()=>{V()},[]);const H=async()=>{j(!0),h(null);try{const T=await ck(i,c,r,e,a);m(T.posts||[]),p(T.total||0)}catch{h("Failed to load posts")}finally{j(!1)}},V=async()=>{try{const T=await dk();v(T.stats||null)}catch{console.error("Failed to load stats")}};u.useEffect(()=>{const T=setTimeout(()=>{i===1?H():o(1)},300);return()=>clearTimeout(T)},[e]);const K=Math.ceil(f/c),de=T=>{S(A=>{const re=new Set(A);return re.has(T)?re.delete(T):re.add(T),re})},ge=()=>{x.size===d.length?S(new Set):S(new Set(d.map(T=>T.id)))},fe=T=>{w({post:T,open:!0}),D("")},le=()=>{if(x.size===0)return;const T=d.find(A=>x.has(A.id));T&&(w({post:T,open:!0}),D(""))},Ie=async()=>{if(E.post){N(!0);try{if(x.size>1){const T=Array.from(x).map(A=>sf(A,k));await Promise.all(T),S(new Set)}else await sf(E.post.id,k);await H(),await V(),w({post:null,open:!1})}catch{alert("Failed to update post status")}finally{N(!1)}}},ue=async T=>{C(!0),I({open:!0}),z(null),J([]);try{const A=await rf(T.id);z(A.post),J(A.comments||[])}catch{console.error("Failed to load post details")}finally{C(!1)}},Y=T=>{B({comment:T,open:!0}),$("")},se=async()=>{if(F.comment){G(!0);try{if(await uk(F.comment.id,Q),L){const T=await rf(L.id);J(T.comments||[])}await V(),B({comment:null,open:!1})}catch{alert("Failed to update comment status")}finally{G(!1)}}},be=T=>{if(!T)return"-";const A=new Date(T);return isNaN(A.getTime())?T:A.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},Re=(T,A)=>T?T.length<=A?T:T.substring(0,A)+"...":"-";return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Community Posts Management",subtitle:"View and manage all community forum posts and comments.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Total Posts"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(g==null?void 0:g.total_posts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 border border-green-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-green-700 mb-1",children:"Active"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(g==null?void 0:g.active_posts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-red-50 border border-red-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-red-700 mb-1",children:"Deleted"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:(g==null?void 0:g.deleted_posts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-orange-50 border border-orange-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-orange-700 mb-1",children:"Disabled"}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(g==null?void 0:g.disabled_posts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Comments"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(g==null?void 0:g.total_comments)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 border border-green-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-green-700 mb-1",children:"Active Cmts"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(g==null?void 0:g.active_comments)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-red-50 border border-red-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-red-700 mb-1",children:"Del. Cmts"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:(g==null?void 0:g.deleted_comments)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-orange-50 border border-orange-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-orange-700 mb-1",children:"Dis. Cmts"}),s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(g==null?void 0:g.disabled_comments)??"-"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[320px]",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search by title, description, author...",value:e,onChange:T=>t(T.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsxs("select",{value:r,onChange:T=>{n(T.target.value),o(1)},className:"px-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 min-w-[130px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"deleted",children:"Deleted"}),s.jsx("option",{value:"disabled",children:"Disabled"})]})]}),s.jsxs("select",{value:a,onChange:T=>{l(T.target.value),o(1)},className:"px-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"Discussion",children:"Discussion"}),s.jsx("option",{value:"Question",children:"Question"}),s.jsx("option",{value:"Tips",children:"Tips"}),s.jsx("option",{value:"Showcase",children:"Showcase"})]}),x.size>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-semibold text-blue-700 bg-blue-100 px-3 py-2 border border-blue-300 rounded",children:[x.size," selected"]}),s.jsxs("button",{onClick:le,className:"flex items-center gap-1 px-3 py-2 bg-orange-600 text-white text-sm font-semibold hover:bg-orange-700 transition-colors rounded",children:[s.jsx(qa,{className:"w-4 h-4"}),"Disable Selected"]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 border border-blue-300 bg-white text-base text-blue-700 hover:bg-blue-50 ml-auto font-semibold transition-colors rounded",children:[s.jsx(Ol,{className:"w-4 h-4"}),"Export"]})]}),s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden rounded-lg",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-white border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-12 px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:d.length>0&&x.size===d.length,onChange:ge,className:"w-4 h-4 accent-blue-600"})}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Images"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Title"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Description"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Author"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:s.jsx(Je,{className:"w-4 h-4 inline"})}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:s.jsx(ms,{className:"w-4 h-4 inline"})}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:y?s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"py-10 text-center text-slate-600",children:"Loading posts..."})}):b?s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"py-10 text-center text-red-600",children:b})}):d.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:12,className:"py-10 text-center text-slate-600",children:"No posts found"})}):d.map(T=>{const A=Xc[T.status];return s.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:x.has(T.id),onChange:()=>de(T.id),className:"w-4 h-4 accent-blue-600"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-slate-800 font-mono",children:T.id.slice(0,8)}),s.jsx(jf,{text:T.id})]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx(yf,{images:T.images})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"font-medium text-slate-900 text-sm max-w-[150px]",children:Re(T.title,30)})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"text-sm text-slate-800 max-w-[200px]",children:Re(T.description,50)})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"inline-block px-2 py-1 bg-slate-100 text-slate-800 text-xs font-medium",children:T.category})}),s.jsxs("td",{className:"px-4 py-4",children:[s.jsx("div",{className:"text-sm text-slate-800",children:be(T.created_at)}),T.updated_at&&T.updated_at!==T.created_at&&s.jsxs("div",{className:"text-xs text-slate-600",children:["Updated: ",be(T.updated_at)]})]}),s.jsxs("td",{className:"px-4 py-4",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium ${Jc[T.status]}`,children:[s.jsx(A,{className:"w-3 h-3"}),T.status.charAt(0).toUpperCase()+T.status.slice(1)]}),T.disable_reason&&s.jsx("div",{className:"text-xs text-orange-600 mt-1 max-w-[100px] truncate",title:T.disable_reason,children:T.disable_reason})]}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[T.author_avatar?s.jsx("img",{src:T.author_avatar,alt:"",className:"w-8 h-8 rounded-full object-cover border border-black/10"}):s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-sm font-medium text-slate-700",children:T.author_name.charAt(0).toUpperCase()}),s.jsx("div",{className:"text-sm text-slate-800",children:Re(T.author_name,15)})]})}),s.jsx("td",{className:"px-4 py-4 text-center",children:s.jsx("span",{className:"text-sm text-slate-800 font-medium",children:T.likes})}),s.jsx("td",{className:"px-4 py-4 text-center",children:s.jsx("span",{className:"text-sm text-slate-800 font-medium",children:T.comments_count})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:()=>ue(T),className:"p-2 hover:bg-blue-50 text-slate-600 hover:text-blue-600 border border-transparent hover:border-blue-200 transition-all",title:"View Details & Comments",children:s.jsx(Nn,{className:"w-4 h-4"})}),T.status!=="deleted"&&s.jsx("button",{onClick:()=>fe(T),className:`p-2 border border-transparent transition-all ${T.status==="disabled"?"hover:bg-green-50 text-green-600 hover:border-green-200":"hover:bg-orange-50 text-slate-600 hover:text-orange-600 hover:border-orange-200"}`,title:T.status==="disabled"?"Enable Post":"Disable Post",children:T.status==="disabled"?s.jsx(Gt,{className:"w-4 h-4"}):s.jsx(qa,{className:"w-4 h-4"})})]})})]},T.id)})})]})}),K>1&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-t border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:[s.jsxs("div",{className:"text-sm text-slate-700",children:[(i-1)*c+1,"-",Math.min(i*c,f)," of ",f]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>o(T=>Math.max(1,T-1)),disabled:i<=1,className:"p-2 border border-blue-300 bg-white text-blue-600 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded",children:s.jsx(tt,{className:"w-4 h-4"})}),[...Array(Math.min(5,K))].map((T,A)=>{const re=A+1;return s.jsx("button",{onClick:()=>o(re),className:`px-3 py-2 text-sm border rounded transition-colors ${i===re?"bg-blue-600 text-white border-blue-600":"bg-white border-blue-300 hover:bg-blue-50 text-slate-800"}`,children:re},A)}),s.jsx("button",{onClick:()=>o(T=>Math.min(K,T+1)),disabled:i>=K,className:"p-2 border border-blue-300 bg-white text-blue-600 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded",children:s.jsx(st,{className:"w-4 h-4"})})]})]})]}),_.open&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>I({open:!1}),children:s.jsxs("div",{className:"bg-white w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col border border-black/15 shadow-xl",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15 shrink-0",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Post Details"}),s.jsx("button",{onClick:()=>I({open:!1}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:U?s.jsx("div",{className:"py-20 text-center text-slate-600",children:"Loading post details..."}):L?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0",children:s.jsx(yf,{images:L.images||[],size:"large"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium ${Jc[L.status]}`,children:[Rs.createElement(Xc[L.status],{className:"w-3 h-3"}),L.status.charAt(0).toUpperCase()+L.status.slice(1)]}),s.jsx("span",{className:"inline-block px-2 py-1 bg-slate-100 text-slate-800 text-xs font-medium",children:L.category})]}),s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:L.title}),s.jsx("p",{className:"text-base text-slate-800 leading-relaxed",children:L.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-700 pt-2 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[L.author_avatar?s.jsx("img",{src:L.author_avatar,alt:"",className:"w-6 h-6 rounded-full object-cover"}):s.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-medium",children:L.author_name.charAt(0).toUpperCase()}),s.jsx("span",{children:L.author_name})]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(_t,{className:"w-4 h-4"})," ",be(L.created_at)]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Je,{className:"w-4 h-4"})," ",L.likes," likes"]})]}),L.disable_reason&&s.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 text-sm",children:[s.jsx("span",{className:"font-medium text-orange-800",children:"Disable reason:"}),s.jsx("span",{className:"text-orange-700 ml-1",children:L.disable_reason})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 text-xs text-slate-600",children:[s.jsx("span",{children:"Post ID:"}),s.jsx("code",{className:"bg-slate-100 px-2 py-0.5 font-mono",children:L.id}),s.jsx(jf,{text:L.id})]})]})]}),s.jsxs("div",{className:"border-t border-black/10 pt-5",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[s.jsx(ms,{className:"w-5 h-5"}),"Comments (",M.length,")"]}),M.length===0?s.jsx("div",{className:"text-sm text-slate-600 py-4",children:"No comments on this post"}):s.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:M.map(T=>{const A=Xc[T.status];return s.jsx("div",{className:`p-4 border ${T.status==="active"?"border-black/10 bg-white":T.status==="deleted"?"border-red-200 bg-red-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[s.jsx("span",{className:"font-medium text-slate-900 text-sm",children:T.author_name}),s.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 text-xs font-medium ${Jc[T.status]}`,children:[s.jsx(A,{className:"w-2.5 h-2.5"}),T.status]}),s.jsx("span",{className:"text-xs text-slate-600",children:be(T.created_at)})]}),s.jsx("p",{className:"text-sm text-slate-800",children:T.text}),T.disable_reason&&s.jsxs("div",{className:"mt-1 text-xs text-orange-700",children:["Disable reason: ",T.disable_reason]})]}),T.status!=="deleted"&&s.jsx("button",{onClick:()=>Y(T),className:`p-1.5 border transition-all ${T.status==="disabled"?"border-green-200 bg-green-50 text-green-600 hover:bg-green-100":"border-orange-200 bg-orange-50 text-orange-600 hover:bg-orange-100"}`,title:T.status==="disabled"?"Enable Comment":"Disable Comment",children:T.status==="disabled"?s.jsx(Gt,{className:"w-4 h-4"}):s.jsx(qa,{className:"w-4 h-4"})})]})},T.id)})})]})]}):s.jsx("div",{className:"py-20 text-center text-red-600",children:"Failed to load post details"})}),s.jsx("div",{className:"flex justify-end p-5 border-t border-black/15 bg-slate-50 shrink-0",children:s.jsx("button",{onClick:()=>I({open:!1}),className:"px-4 py-2 bg-blue-600 text-white text-base font-medium hover:bg-blue-700",children:"Close"})})]})}),E.open&&E.post&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md border border-black/15 shadow-xl",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:x.size>1?`Disable ${x.size} Posts`:E.post.status==="disabled"?"Enable Post":"Disable Post"}),s.jsx("button",{onClick:()=>w({post:null,open:!1}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[x.size<=1&&s.jsxs("div",{className:"p-3 bg-slate-50 border border-black/10",children:[s.jsx("div",{className:"font-medium text-slate-900",children:E.post.title}),s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["by ",E.post.author_name]})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 text-amber-900 text-sm",children:[s.jsx(Pt,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsx("div",{children:E.post.status==="disabled"?"This post will be enabled and visible in the community forum again.":x.size>1?`${x.size} posts will be disabled. They will no longer be visible in the community forum.`:"This post will be disabled. It will no longer be visible in the community forum. The author will be notified via email."})]}),E.post.status!=="disabled"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-2",children:"Reason for disabling"}),s.jsx("textarea",{value:k,onChange:T=>D(T.target.value),rows:3,className:"w-full px-3 py-2 border border-black/15 text-base text-slate-900 focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none",placeholder:"e.g., Violates community guidelines, contains inappropriate content..."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-5 border-t border-black/15 bg-slate-50",children:[s.jsx("button",{onClick:()=>w({post:null,open:!1}),className:"px-4 py-2 border border-black/15 text-base text-slate-800 hover:bg-white",children:"Cancel"}),s.jsx("button",{onClick:Ie,disabled:q,className:`px-4 py-2 text-white text-base font-medium disabled:opacity-50 ${E.post.status==="disabled"?"bg-green-600 hover:bg-green-700":"bg-orange-600 hover:bg-orange-700"}`,children:q?"Processing...":E.post.status==="disabled"?"Enable":"Disable"})]})]})}),F.open&&F.comment&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md border border-black/15 shadow-xl",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:[F.comment.status==="disabled"?"Enable":"Disable"," Comment"]}),s.jsx("button",{onClick:()=>B({comment:null,open:!1}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"p-3 bg-slate-50 border border-black/10",children:[s.jsx("div",{className:"text-sm text-slate-800",children:F.comment.text}),s.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:["by ",F.comment.author_name]})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 text-amber-900 text-sm",children:[s.jsx(Pt,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsx("div",{children:F.comment.status==="disabled"?"This comment will be enabled and visible again.":"This comment will be disabled and hidden. The author will be notified via email."})]}),F.comment.status!=="disabled"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-2",children:"Reason for disabling"}),s.jsx("textarea",{value:Q,onChange:T=>$(T.target.value),rows:3,className:"w-full px-3 py-2 border border-black/15 text-base text-slate-900 focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none",placeholder:"e.g., Contains foul language, harassment, spam..."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-5 border-t border-black/15 bg-slate-50",children:[s.jsx("button",{onClick:()=>B({comment:null,open:!1}),className:"px-4 py-2 border border-black/15 text-base text-slate-800 hover:bg-white",children:"Cancel"}),s.jsx("button",{onClick:se,disabled:O,className:`px-4 py-2 text-white text-base font-medium disabled:opacity-50 ${F.comment.status==="disabled"?"bg-green-600 hover:bg-green-700":"bg-orange-600 hover:bg-orange-700"}`,children:O?"Processing...":F.comment.status==="disabled"?"Enable":"Disable"})]})]})})]})}const wf={Export:"bg-green-100 text-green-800",Local:"bg-blue-100 text-blue-800",Reject:"bg-red-100 text-red-800",Unknown:"bg-slate-100 text-slate-600"};function Nf({text:e}){const[t,r]=u.useState(!1),n=async a=>{a.stopPropagation();try{await navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)}catch(l){console.error("Failed to copy:",l)}};return s.jsx("button",{onClick:n,className:`p-1 rounded transition-all ${t?"bg-green-100 text-green-600":"hover:bg-slate-100 text-slate-500 hover:text-slate-700"}`,title:t?"Copied!":"Copy ID",children:t?s.jsx(tc,{className:"w-3 h-3"}):s.jsx(Hb,{className:"w-3 h-3"})})}function n3(){var ue;const[e,t]=u.useState(""),[r,n]=u.useState("all"),[a,l]=u.useState("all"),[i,o]=u.useState("all"),[c,d]=u.useState(1),m=10,[f,p]=u.useState([]),[g,v]=u.useState(0),[y,j]=u.useState(null),[b,h]=u.useState(!0),[x,S]=u.useState(null),[E,w]=u.useState(new Set),[k,D]=u.useState({open:!1,scan:null}),[q,N]=u.useState({open:!1,scan:null}),[_,I]=u.useState(""),[L,z]=u.useState(!1),[M,J]=u.useState({open:!1,scan:null}),[U,C]=u.useState(!1),F=async()=>{h(!0),S(null);try{const Y=await kb(c,m);p(Y.entries||[]),v(Y.total||0)}catch(Y){S("Failed to load scans"),console.error("Failed to fetch scans:",Y)}finally{h(!1)}},B=async()=>{try{const Y=await w5();j(Y.stats||null)}catch(Y){console.error("Failed to fetch stats:",Y)}};u.useEffect(()=>{F()},[c]),u.useEffect(()=>{B()},[]);const Q=f.filter(Y=>{const se=Y.grade||"Unknown";if(r!=="all"&&se!==r)return!1;const be=Y.fish_type||"Unknown";if(a!=="all"&&be.toLowerCase()!==a.toLowerCase()||i==="detected"&&!Y.detected||i==="not-detected"&&Y.detected)return!1;if(e){const Re=e.toLowerCase();return Y.id.toLowerCase().includes(Re)||be.toLowerCase().includes(Re)||(Y.user_name||"").toLowerCase().includes(Re)}return!0}),$=Math.ceil(g/m),O=Y=>{w(se=>{const be=new Set(se);return be.has(Y)?be.delete(Y):be.add(Y),be})},G=()=>{E.size===Q.length?w(new Set):w(new Set(Q.map(Y=>Y.id)))},H=Y=>{if(!Y)return"-";const se=new Date(Y);return isNaN(se.getTime())?Y:se.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},V=Y=>!Y||Y==="Unknown"?"Unknown":Y==="Export"||Y==="Local"||Y==="Reject"?Y:"Unknown",K=Y=>Y==null?"N/A":`${(Y*100).toFixed(1)}%`,de=Q.length>0&&E.size===Q.length,ge=(Y,se)=>{se==null||se.stopPropagation(),N({open:!0,scan:Y}),I("")},fe=async()=>{if(q.scan){z(!0);try{await S5(q.scan.id,_),await F(),await B(),N({open:!1,scan:null})}catch{alert("Failed to update scan status")}finally{z(!1)}}},le=(Y,se)=>{se==null||se.stopPropagation(),J({open:!0,scan:Y})},Ie=async()=>{var Y;if(M.scan){C(!0);try{await k5(M.scan.id),await F(),await B(),J({open:!1,scan:null}),((Y=k.scan)==null?void 0:Y.id)===M.scan.id&&D({open:!1,scan:null})}catch{alert("Failed to delete scan")}finally{C(!1)}}};return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Scans Management",subtitle:"View and manage all AI grading scan history and results.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Total Scans"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:((ue=y==null?void 0:y.total_scans)==null?void 0:ue.toLocaleString())||"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 border border-green-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-green-700 mb-1",children:"Export Grade"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(y==null?void 0:y.export_count)??0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Local Grade"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(y==null?void 0:y.local_count)??0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-red-50 border border-red-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-red-700 mb-1",children:"Reject Grade"}),s.jsx("div",{className:"text-2xl font-bold text-red-600",children:(y==null?void 0:y.reject_count)??0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Unique Users"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(y==null?void 0:y.unique_users)??0})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-5 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-sm font-bold text-blue-700 mb-1",children:"Avg Score"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(y==null?void 0:y.avg_score)!==void 0?`${(y.avg_score*100).toFixed(1)}%`:"N/A"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[320px]",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search by ID, fish type, user...",value:e,onChange:Y=>t(Y.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsxs("select",{value:r,onChange:Y=>{n(Y.target.value),d(1)},className:"px-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 min-w-[130px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Grades"}),s.jsx("option",{value:"Export",children:"Export"}),s.jsx("option",{value:"Local",children:"Local"}),s.jsx("option",{value:"Reject",children:"Reject"})]})]}),s.jsxs("select",{value:a,onChange:Y=>{l(Y.target.value),d(1)},className:"px-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 min-w-[160px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Fish Types"}),s.jsx("option",{value:"Danggit",children:"Danggit"}),s.jsx("option",{value:"Espada",children:"Espada"}),s.jsx("option",{value:"Dalagangbukid",children:"Dalagangbukid"}),s.jsx("option",{value:"Flyingfish",children:"Flyingfish"}),s.jsx("option",{value:"Bisugo",children:"Bisugo"}),s.jsx("option",{value:"Unknown",children:"Unknown"})]}),s.jsxs("select",{value:i,onChange:Y=>{o(Y.target.value),d(1)},className:"px-3 py-2.5 border border-blue-300 bg-white text-base text-slate-900 min-w-[160px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"all",children:"All Detections"}),s.jsx("option",{value:"detected",children:"Daing Detected"}),s.jsx("option",{value:"not-detected",children:"No Daing Detected"})]}),E.size>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-semibold text-blue-700 bg-blue-100 px-3 py-2 border border-blue-300 rounded",children:[E.size," selected"]}),s.jsxs("button",{onClick:()=>{const Y=f.find(se=>E.has(se.id));Y&&le(Y)},className:"flex items-center gap-1 px-3 py-2 bg-red-600 text-white text-sm font-semibold hover:bg-red-700 transition-colors rounded",children:[s.jsx(Wt,{className:"w-4 h-4"}),"Delete Selected"]})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 border border-blue-300 bg-white text-base text-blue-700 hover:bg-blue-50 ml-auto font-semibold transition-colors rounded",children:[s.jsx(Ol,{className:"w-4 h-4"}),"Export"]})]}),i!=="all"&&s.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg ${i==="detected"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[i==="detected"?s.jsx(Gt,{className:"w-5 h-5 text-green-600"}):s.jsx(gl,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:`font-semibold ${i==="detected"?"text-green-800":"text-red-800"}`,children:i==="detected"?"Showing Daing Detected Scans":"Showing No Daing Detected Scans"}),s.jsxs("span",{className:"text-sm text-slate-600",children:["(",Q.length," ",Q.length===1?"scan":"scans",")"]}),s.jsxs("button",{onClick:()=>o("all"),className:"ml-auto flex items-center gap-1 px-2 py-1 text-sm text-slate-600 hover:text-slate-800 hover:bg-white/50 rounded transition-colors",children:[s.jsx(Pe,{className:"w-4 h-4"}),"Clear Filter"]})]}),s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden rounded-lg",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-white border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-12 px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:de,onChange:G,className:"w-4 h-4 accent-blue-600"})}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"ID"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Image"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Fish Type"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Detection"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Grade"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Score"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:b?s.jsx("tr",{children:s.jsxs("td",{colSpan:10,className:"py-10 text-center text-slate-600",children:[s.jsx(Or,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading scans..."]})}):x?s.jsx("tr",{children:s.jsx("td",{colSpan:10,className:"py-10 text-center text-red-600",children:x})}):Q.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:10,className:"py-10 text-center text-slate-600",children:"No scans found"})}):Q.map(Y=>{const se=V(Y.grade),be=Y.fish_type||"Unknown",Re=Y.user_name||"Unknown",T=Y.score;return s.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:E.has(Y.id),onChange:()=>O(Y.id),className:"w-4 h-4 accent-blue-600"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-xs text-slate-800 font-mono",children:Y.id.slice(0,12)}),s.jsx(Nf,{text:Y.id})]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"w-16 h-16 bg-blue-50 flex items-center justify-center border border-blue-200 overflow-hidden rounded",children:Y.url?s.jsx("img",{src:Y.url,alt:"Scan",className:"w-full h-full object-cover"}):s.jsx(Ur,{className:"w-6 h-6 text-blue-400"})})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jo,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-slate-800 font-medium",children:be})]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded ${Y.detected?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Y.detected?"Detected":"No Detection"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium ${wf[se]}`,children:[s.jsx(of,{className:"w-3 h-3"}),se]})}),s.jsx("td",{className:"px-4 py-4",children:T!=null?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-16 h-2 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${T>=.9?"bg-green-500":T>=.8?"bg-blue-500":"bg-red-500"}`,style:{width:`${T*100}%`}})}),s.jsx("span",{className:"text-sm text-slate-800 font-medium",children:K(T)})]}):s.jsx("span",{className:"text-sm text-slate-500",children:"N/A"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-sm font-medium text-slate-700",children:Re.charAt(0).toUpperCase()}),s.jsx("div",{className:"text-sm text-slate-800",children:Re})]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"text-sm text-slate-800",children:H(Y.timestamp)})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:()=>D({open:!0,scan:Y}),className:"p-2 hover:bg-blue-50 text-slate-600 hover:text-blue-600 border border-transparent hover:border-blue-200 transition-all",title:"View Details",children:s.jsx(Nn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:A=>ge(Y,A),className:"p-2 hover:bg-orange-50 text-slate-600 hover:text-orange-600 border border-transparent hover:border-orange-200 transition-all",title:"Disable Scan",children:s.jsx(qa,{className:"w-4 h-4"})}),s.jsx("button",{onClick:A=>le(Y,A),className:"p-2 hover:bg-red-50 text-slate-600 hover:text-red-600 border border-transparent hover:border-red-200 transition-all",title:"Delete Scan",children:s.jsx(Wt,{className:"w-4 h-4"})})]})})]},Y.id)})})]})}),$>1&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-t border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:[s.jsxs("div",{className:"text-sm text-slate-700",children:[(c-1)*m+1,"-",Math.min(c*m,g)," of ",g]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>d(Y=>Math.max(1,Y-1)),disabled:c<=1,className:"p-2 border border-blue-300 bg-white text-blue-600 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded",children:s.jsx(tt,{className:"w-4 h-4"})}),[...Array(Math.min(5,$))].map((Y,se)=>{let be=Math.max(1,c-2);const Re=Math.min($,be+4);Re-be<4&&(be=Math.max(1,Re-4));const T=be+se;return T>$?null:s.jsx("button",{onClick:()=>d(T),className:`px-3 py-2 text-sm border rounded transition-colors ${c===T?"bg-blue-600 text-white border-blue-600":"bg-white border-blue-300 hover:bg-blue-50 text-slate-800"}`,children:T},T)}),s.jsx("button",{onClick:()=>d(Y=>Math.min($,Y+1)),disabled:c>=$,className:"p-2 border border-blue-300 bg-white text-blue-600 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded",children:s.jsx(st,{className:"w-4 h-4"})})]})]})]}),k.open&&k.scan&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>D({open:!1,scan:null}),children:s.jsxs("div",{className:"bg-white w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col border border-black/15 shadow-xl",onClick:Y=>Y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15 shrink-0",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Scan Details"}),s.jsx("button",{onClick:()=>D({open:!1,scan:null}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"shrink-0",children:s.jsx("div",{className:"w-full md:w-64 aspect-square bg-slate-100 border border-black/10 overflow-hidden",children:k.scan.url?s.jsx("img",{src:k.scan.url,alt:"Scan",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ur,{className:"w-16 h-16 text-slate-300"})})})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium ${wf[V(k.scan.grade)]}`,children:[s.jsx(of,{className:"w-4 h-4"}),V(k.scan.grade)," Grade"]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Fish Type"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-900 font-medium",children:[s.jsx(jo,{className:"w-4 h-4 text-slate-500"}),k.scan.fish_type||"Unknown"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Confidence Score"}),k.scan.score!==null&&k.scan.score!==void 0?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-20 h-2 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${k.scan.score>=.9?"bg-green-500":k.scan.score>=.8?"bg-blue-500":"bg-red-500"}`,style:{width:`${k.scan.score*100}%`}})}),s.jsx("span",{className:"text-slate-900 font-medium",children:K(k.scan.score)})]}):s.jsx("span",{className:"text-slate-500",children:"N/A"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"User"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-900",children:[s.jsx(bs,{className:"w-4 h-4 text-slate-500"}),k.scan.user_name||"Unknown"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Date & Time"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-900",children:[s.jsx(_t,{className:"w-4 h-4 text-slate-500"}),H(k.scan.timestamp)]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Detection Status"}),s.jsx("div",{className:"flex items-center gap-2",children:k.scan.detected?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-green-50 text-green-700 rounded",children:[s.jsx(Gt,{className:"w-3 h-3"}),"Daing Detected"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-red-50 text-red-700 rounded",children:[s.jsx(gl,{className:"w-3 h-3"}),"No Daing Detected"]})})]})]}),s.jsxs("div",{className:"pt-4 border-t border-black/10",children:[s.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Scan ID"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"bg-slate-100 px-2 py-1 font-mono text-sm text-slate-800",children:k.scan.id}),s.jsx(Nf,{text:k.scan.id})]})]})]})]})}),s.jsxs("div",{className:"flex justify-between p-5 border-t border-black/15 bg-slate-50 shrink-0",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>ge(k.scan),className:"px-4 py-2 border border-orange-300 text-orange-600 text-base font-medium hover:bg-orange-50",children:"Disable Scan"}),s.jsx("button",{onClick:()=>le(k.scan),className:"px-4 py-2 border border-red-300 text-red-600 text-base font-medium hover:bg-red-50",children:"Delete Scan"})]}),s.jsx("button",{onClick:()=>D({open:!1,scan:null}),className:"px-4 py-2 bg-blue-600 text-white text-base font-medium hover:bg-blue-700",children:"Close"})]})]})}),q.open&&q.scan&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md border border-black/15 shadow-xl",onClick:Y=>Y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Disable Scan"}),s.jsx("button",{onClick:()=>N({open:!1,scan:null}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"p-3 bg-slate-50 border border-black/10",children:[s.jsxs("div",{className:"font-medium text-slate-900",children:["Scan ID: ",q.scan.id.slice(0,20),"..."]}),s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["by ",q.scan.user_name||"Unknown"]})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 border border-amber-200 text-amber-900 text-sm",children:[s.jsx(Pt,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsx("div",{children:"This scan will be disabled and hidden from public view. The user will be notified via email with the reason provided."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-800 mb-2",children:"Reason for disabling"}),s.jsx("textarea",{value:_,onChange:Y=>I(Y.target.value),rows:3,className:"w-full px-3 py-2 border border-black/15 text-base text-slate-900 focus:outline-none focus:ring-1 focus:ring-blue-500 resize-none",placeholder:"e.g., Image quality issues, inappropriate content, copyright violation..."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-5 border-t border-black/15 bg-slate-50",children:[s.jsx("button",{onClick:()=>N({open:!1,scan:null}),className:"px-4 py-2 border border-black/15 text-base text-slate-800 hover:bg-white",children:"Cancel"}),s.jsx("button",{onClick:fe,disabled:L,className:"px-4 py-2 bg-orange-600 text-white text-base font-medium hover:bg-orange-700 disabled:opacity-50",children:L?"Processing...":"Disable"})]})]})}),M.open&&M.scan&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-md border border-black/15 shadow-xl",onClick:Y=>Y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Delete Scan Permanently"}),s.jsx("button",{onClick:()=>J({open:!1,scan:null}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("div",{className:"p-3 bg-slate-50 border border-black/10",children:[s.jsxs("div",{className:"font-medium text-slate-900",children:["Scan ID: ",M.scan.id.slice(0,20),"..."]}),s.jsxs("div",{className:"text-sm text-slate-600 mt-1",children:["by ",M.scan.user_name||"Unknown"]})]}),s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 text-red-900 text-sm",children:[s.jsx(Pt,{className:"w-5 h-5 shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("strong",{children:"Warning:"})," This action is permanent and cannot be undone. The scan image will be permanently deleted from the database and cloud storage."]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-5 border-t border-black/15 bg-slate-50",children:[s.jsx("button",{onClick:()=>J({open:!1,scan:null}),className:"px-4 py-2 border border-black/15 text-base text-slate-800 hover:bg-white",children:"Cancel"}),s.jsx("button",{onClick:Ie,disabled:U,className:"px-4 py-2 bg-red-600 text-white text-base font-medium hover:bg-red-700 disabled:opacity-50",children:U?"Deleting...":"Delete Permanently"})]})]})})]})}const a3=["All","Scans","Users","Community","Auth","Dataset","Comments"],l3=["All","success","warning","error"],mi={Scans:{title:"Scan Activities",description:"Fish scanning and grading actions",activities:["Created fish scan","Disabled scan","Enabled scan","Permanently deleted scan"]},Community:{title:"Community Activities",description:"Community posts and interactions",activities:["Created community post","Liked post","Unliked post","Deleted post"]},Comments:{title:"Comment Activities",description:"Post comments and replies",activities:["Created comment","Deleted comment","Edited comment"]},Users:{title:"User Management Activities",description:"User account and role management",activities:["Updated user role","Changed user status","Disabled user account","Enabled user account"]},Auth:{title:"Authentication Activities",description:"Login and account security events",activities:["User login","User logout","Password changed","Email verified","Login failed"]},Dataset:{title:"Dataset Management",description:"Dataset upload and management",activities:["Uploaded dataset image","Deleted dataset entry","Bulk uploaded dataset"]}},hi=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toISOString().slice(0,10)},Sf=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(11,19)};function i3(){const e=new Date().getFullYear(),[t,r]=u.useState(e),[n,a]=u.useState("12m"),[l,i]=u.useState("H1"),[o,c]=u.useState("All"),[d,m]=u.useState("All"),[f,p]=u.useState(""),[g,v]=u.useState(null),[y,j]=u.useState({x:0,y:0}),[b,h]=u.useState([]),[x,S]=u.useState(!0),[E,w]=u.useState(null),[k,D]=u.useState(!1),[q,N]=u.useState(!1),[_,I]=u.useState(!1),[L,z]=u.useState(1),M=10,J=()=>{S(!0),w(null),Cb().then(O=>h(O.entries||[])).catch(()=>w("Failed to load audit logs")).finally(()=>S(!1))};u.useEffect(()=>{J()},[]);const U=u.useMemo(()=>b.filter(O=>{const G=o==="All"||O.category===o,H=d==="All"||O.status===d,V=f.trim().length===0||O.actor.toLowerCase().includes(f.trim().toLowerCase());return G&&H&&V}),[b,o,d,f]),C=o!=="All"||d!=="All"||f.trim().length>0,F=u.useMemo(()=>{const O=C?U:b;if(n==="6m"){const G=l==="H1"?0:6,H=new Date(t,G,1),V=l==="H1"?new Date(t,5,30):new Date(t,11,31);return O.filter(K=>{const de=new Date(K.timestamp);return de>=H&&de<=V})}return O.filter(G=>new Date(G.timestamp).getFullYear()===t)},[b,C,U,t,n,l]),B=u.useMemo(()=>{const O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],H=(()=>{const K=[];if(n==="6m"){const de=l==="H1"?0:6,ge=l==="H1"?5:11;for(let fe=de;fe<=ge;fe++){const Ie=new Date(t,fe,15).toISOString().slice(0,7),ue=O[fe];K.push({key:Ie,label:ue,count:0})}}else for(let de=0;de<12;de++){const fe=new Date(t,de,15).toISOString().slice(0,7),le=O[de];K.push({key:fe,label:le,count:0})}return K})(),V=new Map(H.map(K=>[K.key,K]));return F.forEach(K=>{const de=n==="6m"||n==="12m"?hi(K.timestamp).slice(0,7):hi(K.timestamp),ge=V.get(de);ge&&(ge.count+=1)}),H},[F,n,t,l]),Q=u.useMemo(()=>{const V=B.map(fe=>fe.count),K=Math.max(1,...V),de=B.length>1?(600-24*2)/(B.length-1):0,ge=B.map((fe,le)=>{const Ie=24+le*de,ue=24+(180-24*2)*(1-fe.count/K);return{x:Ie,y:ue}});return{width:600,height:180,padding:24,maxCount:K,points:ge}},[B]),$=u.useMemo(()=>{var de;const O=b.length,G=b.filter(ge=>{const fe=new Date(ge.timestamp);return Date.now()-fe.getTime()<=24*60*60*1e3}).length,H=((de=b[0])==null?void 0:de.actor)||"N/A",V=[...new Set(b.map(ge=>ge.category))],K=V.length>0?V[0]:"N/A";return[{label:"Total Events",value:O.toString()},{label:"Last 24h",value:G.toString()},{label:"Top Actor",value:H},{label:"Top Category",value:K}]},[b]);return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Audit & Activity Logs",subtitle:"Monitor system activities, user actions, and security events across the platform.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Activity Monitoring"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Real-time audit log analytics and filtering"})]}),s.jsxs("button",{onClick:J,className:"px-3 py-2 border border-black shadow-md bg-white text-sm font-semibold flex items-center gap-2 hover:bg-slate-50 rounded",children:[s.jsx(Hk,{className:"w-4 h-4"}),"Refresh"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:$.map(O=>s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg hover:shadow-lg transition-shadow",children:[s.jsx("div",{className:"text-xs font-semibold text-blue-600",children:O.label}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 mt-2",children:O.value})]},O.label))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 lg:col-span-3 rounded-lg relative",children:[s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold text-blue-900",children:"Activity Trend"}),s.jsx("div",{className:"text-xs text-slate-600",children:n==="6m"?`H${l==="H1"?"1":"2"} ${t}`:`Year ${t}`})]}),s.jsx("button",{onClick:()=>I(!0),className:"p-2 hover:bg-blue-100 rounded transition-colors",title:"Expand chart",children:s.jsx(pl,{className:"w-5 h-5 text-blue-600"})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("select",{value:t,onChange:O=>r(parseInt(O.target.value)),className:"px-2 py-1 border border-black shadow-md bg-white text-xs font-semibold rounded",children:[e-1,e,e+1].map(O=>s.jsx("option",{value:O,children:O},O))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a("12m"),className:`px-2 py-1 text-xs font-semibold rounded ${n==="12m"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"12m"}),s.jsx("button",{onClick:()=>a("6m"),className:`px-2 py-1 text-xs font-semibold rounded ${n==="6m"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"6m"})]}),n==="6m"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>i("H1"),className:`px-2 py-1 text-xs font-semibold rounded ${l==="H1"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"H1"}),s.jsx("button",{onClick:()=>i("H2"),className:`px-2 py-1 text-xs font-semibold rounded ${l==="H2"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"H2"})]})]})]}),x?s.jsx("div",{className:"h-44 flex items-center justify-center text-sm text-slate-500",children:"Loading activity"}):E?s.jsx("div",{className:"h-44 flex items-center justify-center text-sm text-red-600",children:E}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative w-full h-44",children:[s.jsx("svg",{viewBox:`0 0 ${Q.width} ${Q.height}`,preserveAspectRatio:"none",className:"w-full h-full",children:Q.points.map((O,G)=>{const H=Q.points.length>1?(Q.width-Q.padding*2)/Q.points.length-8:24,V=O.x-H/2,K=Q.height-Q.padding-O.y,de=g===G;return s.jsx("g",{onMouseEnter:ge=>{v(G);const fe=ge.currentTarget.closest("svg");if(fe){const le=fe.getBoundingClientRect(),Ie=O.x/Q.width*le.width,ue=O.y/Q.height*le.height;j({x:le.left+Ie,y:le.top+ue-50})}},onMouseLeave:()=>v(null),style:{cursor:"pointer"},children:s.jsx("rect",{x:V,y:O.y,width:H,height:K,rx:4,fill:de?"#2563EB":"#3B82F6"})},`bar-${G}`)})}),g!==null&&s.jsxs("div",{className:"fixed bg-slate-800 text-white px-3 py-2 rounded text-xs whitespace-nowrap shadow-lg pointer-events-none z-50",style:{left:y.x,top:y.y,transform:"translateX(-50%)"},children:[s.jsx("div",{className:"font-semibold",children:B[g].key}),s.jsxs("div",{children:[B[g].count," events"]})]})]}),s.jsx("div",{className:"flex justify-between text-[11px] text-slate-500 mt-2",children:B.map(O=>s.jsx("span",{children:O.label},O.key))})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-bold text-blue-900 mb-3",children:"Filter Options"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500",children:"Category"}),s.jsx("select",{value:o,onChange:O=>c(O.target.value),className:"w-full mt-1 px-2 py-1 border border-slate-200 shadow-md bg-white text-xs",children:a3.map(O=>s.jsx("option",{value:O,children:O},O))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500",children:"Status"}),s.jsx("select",{value:d,onChange:O=>m(O.target.value),className:"w-full mt-1 px-2 py-1 border border-slate-200 shadow-md bg-white text-xs",children:l3.map(O=>s.jsx("option",{value:O,children:O},O))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-500 font-semibold block mb-2",children:"Status Legend"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-green-100 border border-green-800 rounded"}),s.jsx("span",{className:"text-slate-600",children:"Success - Action completed"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-yellow-100 border border-yellow-800 rounded"}),s.jsx("span",{className:"text-slate-600",children:"Warning - Completed w/ issues"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-red-100 border border-red-800 rounded"}),s.jsx("span",{className:"text-slate-600",children:"Error - Action failed"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-slate-600 font-medium block mb-2",children:"Search Actor/Activity by ID or Name"}),s.jsx("input",{value:f,onChange:O=>p(O.target.value),placeholder:"Enter actor name or ID",className:"w-full mt-1 px-2 py-1 border border-slate-300 shadow-md text-xs focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]})]})]}),C&&s.jsxs("div",{className:"bg-white border border-blue-200 shadow-md overflow-hidden rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:()=>D(!k),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[o!=="All"&&o in mi&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-blue-900 text-base",children:mi[o].title}),s.jsx("p",{className:"text-xs text-slate-700",children:mi[o].description})]}),o==="All"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-bold text-blue-900 text-base",children:"Filtered Activity"}),s.jsx("p",{className:"text-xs text-slate-700",children:"Activities matching current filters"})]})]}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-3 py-1 font-semibold whitespace-nowrap rounded",children:U.length})]}),s.jsx(ct,{className:`w-5 h-5 text-slate-400 transition-transform flex-shrink-0 ${k?"-rotate-90":""}`})]}),!k&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"text-slate-700 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Time"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Actor"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Role"}),s.jsx("th",{className:"text-left py-3 px-4 font-bold text-blue-900",children:"Action"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Entity"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Entity ID"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-bold text-blue-900",children:"Details"})]})}),s.jsx("tbody",{children:x?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"Loading activity"})}):U.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"No activity for this filter."})}):U.slice(0,10).map(O=>{var G;return s.jsxs("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[s.jsxs("td",{className:"py-3 px-4 font-medium text-slate-800 whitespace-nowrap text-xs",children:[hi(O.timestamp)," ",Sf(O.timestamp)]}),s.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:O.actor}),s.jsx("td",{className:"py-3 px-4 capitalize text-xs whitespace-nowrap",children:O.role}),s.jsx("td",{className:"py-3 px-4",children:O.action}),s.jsx("td",{className:"py-3 px-4 text-xs whitespace-nowrap",children:O.entity}),s.jsxs("td",{className:"py-3 px-4 font-mono text-xs whitespace-nowrap",children:[(G=O.entity_id)==null?void 0:G.substring(0,12),"..."]}),s.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold capitalize rounded inline-block ${O.status==="success"?"bg-green-100 text-green-800":O.status==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:O.status})}),s.jsx("td",{className:"py-3 px-4 text-slate-600 text-sm",children:O.details})]},O.id)})})]})})]}),s.jsxs("div",{className:"bg-white border border-blue-200 shadow-md overflow-hidden rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:()=>N(!q),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"font-bold text-blue-900 text-base",children:"All Activity"}),s.jsx("p",{className:"text-xs text-slate-700",children:"Complete audit log of all events in the system"})]}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-3 py-1 font-semibold whitespace-nowrap rounded",children:b.length})]}),s.jsx(ct,{className:`w-5 h-5 text-slate-400 transition-transform flex-shrink-0 ${q?"-rotate-90":""}`})]}),!q&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"text-slate-700 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Time"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Actor"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Role"}),s.jsx("th",{className:"text-left py-3 px-4 font-bold text-blue-900",children:"Action"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Entity"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Entity ID"}),s.jsx("th",{className:"text-left py-3 px-4 whitespace-nowrap font-bold text-blue-900",children:"Status"}),s.jsx("th",{className:"text-left py-3 px-4 font-bold text-blue-900",children:"Details"})]})}),s.jsx("tbody",{children:x?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"Loading activity"})}):E?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"py-6 text-center text-red-600",children:E})}):b.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"No activity yet"})}):b.slice((L-1)*M,L*M).map(O=>{var G;return s.jsxs("tr",{className:"border-b border-slate-200 hover:bg-slate-50",children:[s.jsxs("td",{className:"py-3 px-4 font-medium text-slate-800 whitespace-nowrap text-xs",children:[hi(O.timestamp)," ",Sf(O.timestamp)]}),s.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:O.actor}),s.jsx("td",{className:"py-3 px-4 capitalize text-xs whitespace-nowrap",children:O.role}),s.jsx("td",{className:"py-3 px-4",children:O.action}),s.jsx("td",{className:"py-3 px-4 text-xs whitespace-nowrap",children:O.entity}),s.jsxs("td",{className:"py-3 px-4 font-mono text-xs whitespace-nowrap",children:[(G=O.entity_id)==null?void 0:G.substring(0,12),"..."]}),s.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold capitalize rounded inline-block ${O.status==="success"?"bg-green-100 text-green-800":O.status==="warning"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:O.status})}),s.jsx("td",{className:"py-3 px-4 text-slate-600 text-sm",children:O.details})]},O.id)})})]})}),b.length>M&&s.jsxs("div",{className:"px-5 py-4 border-t border-blue-200 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",L," of ",Math.ceil(b.length/M)]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>z(Math.max(1,L-1)),disabled:L===1,className:"flex items-center gap-1 px-3 py-2 border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded text-sm font-medium",children:[s.jsx(tt,{className:"w-4 h-4"}),"Previous"]}),s.jsxs("button",{onClick:()=>z(Math.min(Math.ceil(b.length/M),L+1)),disabled:L===Math.ceil(b.length/M),className:"flex items-center gap-1 px-3 py-2 border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors rounded text-sm font-medium",children:["Next",s.jsx(st,{className:"w-4 h-4"})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white border border-blue-200 shadow-md p-6 rounded-lg",children:[s.jsx("h3",{className:"font-bold text-blue-900 mb-4 text-xl",children:"Activity Categories Guide"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(mi).map(([O,G])=>s.jsxs("div",{className:"p-4 bg-white border-l-4 border-l-blue-500 shadow hover:shadow-md transition-shadow rounded",children:[s.jsx("div",{className:"font-bold text-slate-900 text-sm mb-1",children:G.title}),s.jsx("div",{className:"text-xs text-slate-700 mb-3 font-medium",children:G.description}),s.jsxs("div",{className:"text-xs text-slate-700",children:[s.jsx("strong",{className:"text-blue-700",children:"Examples:"}),s.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:G.activities.map((H,V)=>s.jsx("li",{className:"text-slate-800",children:H},V))})]})]},O))})]}),_&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"sticky top-0 flex items-center justify-between px-6 py-4 border-b border-blue-200 bg-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"Activity Trend"}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:n==="6m"?`H${l==="H1"?"1":"2"} ${t}`:`Year ${t}`})]}),s.jsx("button",{onClick:()=>I(!1),className:"p-1 hover:bg-slate-100 rounded transition-colors",children:s.jsx(Pe,{className:"w-6 h-6 text-slate-600"})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6 flex-wrap",children:[s.jsx("select",{value:t,onChange:O=>r(parseInt(O.target.value)),className:"px-2 py-1 border border-black shadow-md bg-white text-xs font-semibold rounded",children:[e-1,e,e+1].map(O=>s.jsx("option",{value:O,children:O},O))}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a("12m"),className:`px-2 py-1 text-xs font-semibold rounded ${n==="12m"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"12m"}),s.jsx("button",{onClick:()=>a("6m"),className:`px-2 py-1 text-xs font-semibold rounded ${n==="6m"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"6m"})]}),n==="6m"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>i("H1"),className:`px-2 py-1 text-xs font-semibold rounded ${l==="H1"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"H1"}),s.jsx("button",{onClick:()=>i("H2"),className:`px-2 py-1 text-xs font-semibold rounded ${l==="H2"?"border border-black shadow-md bg-slate-900 text-white":"border border-black shadow-md bg-white text-slate-900"}`,children:"H2"})]})]}),x?s.jsx("div",{className:"h-96 flex items-center justify-center text-sm text-slate-500",children:"Loading activity"}):E?s.jsx("div",{className:"h-96 flex items-center justify-center text-sm text-red-600",children:E}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative w-full h-96",children:[s.jsx("svg",{viewBox:`0 0 ${Q.width} ${Q.height}`,preserveAspectRatio:"none",className:"w-full h-full",children:Q.points.map((O,G)=>{const H=Q.points.length>1?(Q.width-Q.padding*2)/Q.points.length-8:24,V=O.x-H/2,K=Q.height-Q.padding-O.y,de=g===G;return s.jsx("g",{onMouseEnter:ge=>{v(G);const fe=ge.currentTarget.closest("svg");if(fe){const le=fe.getBoundingClientRect(),Ie=O.x/Q.width*le.width,ue=O.y/Q.height*le.height;j({x:le.left+Ie,y:le.top+ue-50})}},onMouseLeave:()=>v(null),style:{cursor:"pointer"},children:s.jsx("rect",{x:V,y:O.y,width:H,height:K,rx:4,fill:de?"#2563EB":"#3B82F6"})},`bar-${G}`)})}),g!==null&&s.jsxs("div",{className:"fixed bg-slate-800 text-white px-3 py-2 rounded text-xs whitespace-nowrap shadow-lg pointer-events-none z-50",style:{left:y.x,top:y.y,transform:"translateX(-50%)"},children:[s.jsx("div",{className:"font-semibold",children:B[g].key}),s.jsxs("div",{children:[B[g].count," events"]})]})]}),s.jsx("div",{className:"flex justify-between text-[11px] text-slate-500 mt-4",children:B.map(O=>s.jsx("span",{children:O.label},O.key))})]})]})]})})]})}const Eu={pending:Pt,confirmed:Gt,shipped:Br,delivered:lt,cancelled:Pe},nv={pending:"bg-yellow-100 text-yellow-700 border-yellow-200",confirmed:"bg-blue-100 text-blue-700 border-blue-200",shipped:"bg-purple-100 text-purple-700 border-purple-200",delivered:"bg-green-100 text-green-700 border-green-200",cancelled:"bg-red-100 text-red-700 border-red-200"},Oi={pending:"Pending",confirmed:"Confirmed",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled"};function Zc({orders:e,title:t,filterType:r,filterValue:n,isCollapsed:a,onToggleCollapse:l,selectedIds:i,onToggleSelect:o,onSelectAll:c,onViewOrder:d}){const[m,f]=u.useState(1),p=8,g=Math.ceil(e.length/p),v=e.slice((m-1)*p,m*p),y=v.length>0&&v.every(x=>i.has(x.id)),j=x=>{if(!x)return"-";const S=new Date(x);return isNaN(S.getTime())?x:S.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},b=x=>nv[x],h=r&&n?Eu[n]:null;return s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden transition-all duration-300",children:[t&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:l,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h&&s.jsx("div",{className:`p-2 rounded ${b(n).split(" ")[0]}`,children:s.jsx(h,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-bold text-blue-900 text-base",children:t}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:e.length})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-slate-600",children:a?"Click to expand":`Showing ${v.length} of ${e.length}`}),a?s.jsx(ct,{className:"w-5 h-5 text-blue-600"}):s.jsx(qs,{className:"w-5 h-5 text-blue-600"})]})]}),s.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${a?"max-h-0 opacity-0":"max-h-[3000px] opacity-100"}`,children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-white border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-12 px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:y,onChange:()=>{c(y?[]:v.map(x=>x.id))},className:"w-4 h-4 accent-blue-600"})}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Order #"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Buyer"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Seller"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:v.map(x=>s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsx("input",{type:"checkbox",checked:i.has(x.id),onChange:()=>o(x.id),className:"w-4 h-4 accent-blue-600"})}),s.jsx("td",{className:"px-4 py-4 font-medium text-slate-900",children:x.order_number}),s.jsx("td",{className:"px-4 py-4 text-slate-700",children:x.buyer_name}),s.jsx("td",{className:"px-4 py-4 text-slate-700",children:x.seller_name}),s.jsxs("td",{className:"px-4 py-4 text-right font-semibold text-blue-700",children:["",x.total.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-sm font-medium border rounded ${b(x.status)}`,children:[Rs.createElement(Eu[x.status],{className:"w-3.5 h-3.5"}),Oi[x.status]]})}),s.jsx("td",{className:"px-4 py-4 text-slate-600",children:j(x.created_at)}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("button",{onClick:()=>d(x),className:"p-2 hover:bg-blue-100 text-slate-500 hover:text-blue-700 border border-transparent hover:border-blue-300 transition-all",children:s.jsx(Nn,{className:"w-4 h-4"})})})})]},x.id))})]})}),g>1&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-t border-blue-200 bg-slate-50",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",m," of ",g]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>f(Math.max(1,m-1)),disabled:m===1,className:"p-2 border border-blue-300 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(tt,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:()=>f(Math.min(g,m+1)),disabled:m===g,className:"p-2 border border-blue-300 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(st,{className:"w-4 h-4 text-blue-600"})})]})]})]})]})}function o3(){const[e,t]=u.useState(null),[r,n]=u.useState([]),[a,l]=u.useState([]),[i,o]=u.useState(!0),[c,d]=u.useState(""),[m,f]=u.useState("all"),[p,g]=u.useState("all"),[v,y]=u.useState(new Set),[j,b]=u.useState({}),[h,x]=u.useState({order:null,open:!1}),[S,E]=u.useState(!1),[w,k]=u.useState(null);u.useEffect(()=>{D()},[]);const D=async()=>{o(!0);try{const[U,C]=await Promise.all([Fb(),vk(1,500)]);t(U.stats),n(C.orders);const F=Array.from(new Set(C.orders.map(B=>B.seller_name)));l(F.sort())}catch(U){console.error("Failed to load orders data:",U)}finally{o(!1)}},q=u.useMemo(()=>r.filter(C=>m==="all"||C.status===m).filter(C=>p==="all"||C.seller_name===p).filter(C=>c===""||C.order_number.toLowerCase().includes(c.toLowerCase())||C.buyer_name.toLowerCase().includes(c.toLowerCase())||C.seller_name.toLowerCase().includes(c.toLowerCase())),[r,c,m,p]),N=u.useMemo(()=>{const U={pending:[],confirmed:[],shipped:[],delivered:[],cancelled:[]};return q.forEach(C=>{U[C.status].push(C)}),U},[q]);u.useMemo(()=>{if(p==="all"){const U={};return a.forEach(C=>{U[C]=q.filter(F=>F.seller_name===C)}),U}return{}},[q,a,p]);const _=U=>{b(C=>({...C,[U]:!C[U]}))},I=U=>{const C=new Set(v);C.has(U)?C.delete(U):C.add(U),y(C)},L=U=>{y(new Set(U))},z=async U=>{x({...h,open:!0,order:U}),E(!0);try{const C=await yk(U.id);k(C.order)}catch(C){console.error("Failed to load order detail:",C)}finally{E(!1)}},M=U=>{if(!U)return"-";const C=new Date(U);return isNaN(C.getTime())?U:C.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};if(i)return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Order Management",subtitle:"View and manage all customer orders",backgroundImage:"/assets/page-hero/orders.jpg"}),s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:"Loading..."})]});const J=m!=="all"||p!=="all";return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Order Management",subtitle:"View and manage all customer orders",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-blue-700 mb-1",children:"Total Orders"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(e==null?void 0:e.total_orders)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-yellow-50 border border-yellow-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-yellow-700 mb-1",children:"Pending"}),s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(e==null?void 0:e.pending_orders)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-blue-700 mb-1",children:"Confirmed"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(e==null?void 0:e.confirmed_orders)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-purple-50 border border-purple-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-purple-700 mb-1",children:"Shipped"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(e==null?void 0:e.shipped_orders)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 border border-green-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-green-700 mb-1",children:"Delivered"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(e==null?void 0:e.delivered_orders)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-amber-50 border border-amber-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-amber-700 mb-1",children:"Total Revenue"}),s.jsxs("div",{className:"text-xl font-bold text-amber-700",children:["",((e==null?void 0:e.total_revenue)??0).toLocaleString("en-US",{maximumFractionDigits:0})]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[320px]",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search order #, buyer, seller...",value:c,onChange:U=>d(U.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-blue-300 bg-white text-base focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsxs("select",{value:m,onChange:U=>f(U.target.value),className:"px-3 py-2.5 border border-blue-300 bg-white text-base min-w-[120px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"shipped",children:"Shipped"}),s.jsx("option",{value:"delivered",children:"Delivered"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),s.jsxs("select",{value:p,onChange:U=>g(U.target.value),className:"px-3 py-2.5 border border-blue-300 bg-white text-base min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Sellers"}),a.map(U=>s.jsx("option",{value:U,children:U},U))]})]}),s.jsx("div",{className:"space-y-4",children:J?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"transition-all duration-500 ease-in-out",children:s.jsx(Zc,{orders:q,title:m!=="all"?`Orders: ${Oi[m]}`:`Orders: ${p}`,filterType:m!=="all"?"status":"seller",filterValue:m!=="all"?m:p,isCollapsed:j["filtered-orders"]??!1,onToggleCollapse:()=>_("filtered-orders"),selectedIds:v,onToggleSelect:I,onSelectAll:L,onViewOrder:z})}),q.length<r.length&&s.jsx("div",{className:"transition-all duration-500 ease-in-out",children:s.jsx(Zc,{orders:r.filter(U=>!(m!=="all"&&U.status===m||p!=="all"&&U.seller_name===p)),title:"Other Orders",isCollapsed:j["other-orders"]??!1,onToggleCollapse:()=>_("other-orders"),selectedIds:v,onToggleSelect:I,onSelectAll:L,onViewOrder:z})})]}):s.jsx(s.Fragment,{children:Object.entries(N).map(([U,C],F)=>C.length>0?s.jsx("div",{className:"transition-all duration-500 ease-in-out",style:{animationDelay:`${F*100}ms`,animation:"slideIn 0.4s ease-out forwards"},children:s.jsx(Zc,{orders:C,title:`${Oi[U]}`,filterType:"status",filterValue:U,isCollapsed:j[`status-${U}`]??!1,onToggleCollapse:()=>_(`status-${U}`),selectedIds:v,onToggleSelect:I,onSelectAll:L,onViewOrder:z})},U):null)})}),h.open&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>x({order:null,open:!1}),children:s.jsxs("div",{className:"bg-white w-full max-w-lg border border-black/15 shadow-xl overflow-y-auto max-h-[90vh]",onClick:U=>U.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-black/15 sticky top-0 bg-white",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Order Details"}),s.jsx("button",{onClick:()=>x({order:null,open:!1}),className:"p-1 hover:bg-slate-100",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),S?s.jsx("div",{className:"p-10 text-center text-slate-500",children:"Loading..."}):w?s.jsxs("div",{className:"p-5 space-y-5",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 border border-black/10",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-slate-500",children:"Order Number"}),s.jsx("div",{className:"text-lg font-bold text-slate-900",children:w.order_number})]}),s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium border rounded ${nv[w.status]}`,children:[Rs.createElement(Eu[w.status],{className:"w-4 h-4"}),Oi[w.status]]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center font-medium text-blue-700",children:w.buyer_name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Buyer"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.buyer_name})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-black/10",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center font-medium text-purple-700",children:w.seller_name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Seller"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.seller_name})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-black/10",children:[s.jsx(wn,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Total Amount"}),s.jsxs("div",{className:"text-sm font-bold text-slate-900",children:["",w.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-black/10",children:[s.jsx(ye,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Items"}),s.jsx("div",{className:"text-sm font-bold text-slate-900",children:w.total_items})]})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-black/10",children:[s.jsx(_t,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Order Date"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:M(w.created_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-black/10",children:[s.jsx(lt,{className:"w-5 h-5 text-slate-400"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Category"}),s.jsx("div",{className:"text-sm font-medium text-slate-900",children:w.category})]})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-900 mb-2",children:"Order Items"}),s.jsx("div",{className:"border border-black/10",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-black/10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2 font-bold",children:"Product"}),s.jsx("th",{className:"text-right px-3 py-2 font-bold",children:"Qty"}),s.jsx("th",{className:"text-right px-3 py-2 font-bold",children:"Price"})]})}),s.jsx("tbody",{className:"divide-y divide-black/10",children:w.items.map((U,C)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-2",children:U.name}),s.jsx("td",{className:"text-right px-3 py-2",children:U.qty}),s.jsxs("td",{className:"text-right px-3 py-2 font-medium",children:["",U.price.toLocaleString("en-US",{minimumFractionDigits:2})]})]},C))})]})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-900 mb-2",children:"Shipping Address"}),s.jsxs("div",{className:"p-3 bg-slate-50 border border-black/10 text-sm text-slate-700 space-y-1",children:[s.jsx("div",{children:s.jsx("strong",{children:w.address.full_name})}),s.jsx("div",{children:w.address.address_line}),s.jsxs("div",{children:[w.address.city,", ",w.address.province," ",w.address.postal_code]}),w.address.notes&&s.jsx("div",{className:"text-xs text-slate-600",children:w.address.notes}),s.jsxs("div",{className:"pt-2 border-t border-black/10",children:[s.jsx(fa,{className:"w-4 h-4 inline-block mr-1"}),w.address.phone]})]})]}),s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200",children:[s.jsx("div",{className:"text-xs text-blue-700 font-medium",children:"Payment Method"}),s.jsx("div",{className:"text-sm font-medium text-blue-900",children:w.payment_method})]})]}):null]})}),s.jsx("style",{children:`
        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function av({isOpen:e,onClose:t,voucher:r}){if(!e)return null;const n=r.expiration_date&&new Date(r.expiration_date)<=new Date,a=r.max_uses?r.max_uses-r.current_uses:null,l=r.max_uses?r.current_uses/r.max_uses*100:0,i=c=>new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),o=c=>`${c.toLocaleString()}`;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-xl font-bold",children:r.code}),r.seller_name&&s.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:["by ",r.seller_name]})]}),s.jsx("button",{onClick:t,className:"text-white hover:bg-blue-800 p-2 rounded-lg transition-colors",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-semibold text-white ${n?"bg-red-500":r.active?r.max_uses&&a===0?"bg-orange-500":"bg-emerald-500":"bg-slate-500"}`,children:n?"Expired":r.active?a===0?"Usage Limit Reached":"Active":"Inactive"})}),s.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600 font-medium",children:"Discount"}),s.jsx("div",{className:"flex items-center gap-2",children:r.discount_type==="percentage"?s.jsxs(s.Fragment,{children:[s.jsx(zk,{className:"w-6 h-6 text-blue-600"}),s.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:[r.value,"%"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(wn,{className:"w-6 h-6 text-blue-600"}),s.jsx("span",{className:"text-3xl font-bold text-blue-600",children:o(r.value)})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.expiration_date&&s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(_t,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase",children:"Expires"})]}),s.jsx("p",{className:`font-semibold ${n?"text-red-600":"text-slate-900"}`,children:i(r.expiration_date)})]}),r.max_uses&&s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(rc,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase",children:"Usage"})]}),s.jsxs("p",{className:"font-semibold text-slate-900 mb-2",children:[r.current_uses," / ",r.max_uses," uses"]}),s.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(l,100)}%`}})})]}),r.per_user_limit&&s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ko,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase",children:"Per User"})]}),s.jsxs("p",{className:"font-semibold text-slate-900",children:["Max ",r.per_user_limit," use(s)"]})]}),r.min_order_amount&&s.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Vm,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase",children:"Min Order"})]}),s.jsx("p",{className:"font-semibold text-slate-900",children:o(r.min_order_amount)})]})]}),s.jsxs("div",{className:"text-xs text-slate-500 pt-4 border-t border-slate-200",children:["Created on ",i(r.created_at)]})]}),s.jsx("div",{className:"border-t border-slate-200 p-6",children:s.jsx("button",{onClick:t,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Close"})})]})})}function lv({isOpen:e,onClose:t,onSuccess:r,editingVoucher:n}){const[a,l]=u.useState(!1),[i,o]=u.useState(""),[c,d]=u.useState(""),[m,f]=u.useState({code:"",discount_type:"percentage",value:0,use_expiration:!1,expiration_date:"",use_max_uses:!1,max_uses:"",use_per_user:!1,per_user_limit:"",use_min_order:!1,min_order_amount:""});if(u.useEffect(()=>{var y,j,b;f(n?{code:n.code,discount_type:n.discount_type,value:n.value,use_expiration:!!n.expiration_date,expiration_date:n.expiration_date?n.expiration_date.split("T")[0]:"",use_max_uses:!!n.max_uses,max_uses:((y=n.max_uses)==null?void 0:y.toString())||"",use_per_user:!!n.per_user_limit,per_user_limit:((j=n.per_user_limit)==null?void 0:j.toString())||"",use_min_order:!!n.min_order_amount,min_order_amount:((b=n.min_order_amount)==null?void 0:b.toString())||""}:{code:"",discount_type:"percentage",value:0,use_expiration:!1,expiration_date:"",use_max_uses:!1,max_uses:"",use_per_user:!1,per_user_limit:"",use_min_order:!1,min_order_amount:""}),o(""),d("")},[n,e]),!e)return null;const p=y=>{const{name:j,value:b,type:h}=y.target;if(h==="checkbox"){const x=y.target.checked;f(S=>({...S,[j]:x}))}else f(x=>({...x,[j]:b}))},g=()=>m.code.trim()?m.code.length<3||m.code.length>20?"Code must be 3-20 characters":/^[A-Za-z0-9_-]+$/.test(m.code)?m.value<=0?"Discount value must be greater than 0":m.discount_type==="percentage"&&m.value>100?"Percentage cannot exceed 100%":m.use_expiration&&!m.expiration_date?"Expiration date is required":m.use_expiration&&new Date(m.expiration_date)<=new Date?"Expiration date must be in the future":m.use_max_uses&&!m.max_uses?"Max uses is required":m.use_max_uses&&parseInt(m.max_uses)<=0?"Max uses must be greater than 0":m.use_per_user&&!m.per_user_limit?"Per user limit is required":m.use_per_user&&parseInt(m.per_user_limit)<=0?"Per user limit must be greater than 0":m.use_min_order&&!m.min_order_amount?"Minimum order amount is required":m.use_min_order&&parseFloat(m.min_order_amount)<=0?"Minimum order amount must be greater than 0":null:"Code must be alphanumeric, dash, or underscore only":"Code is required",v=async y=>{var b,h;y.preventDefault(),o(""),d("");const j=g();if(j){o(j);return}l(!0);try{const x={code:m.code,discount_type:m.discount_type,value:parseFloat(m.value.toString()),expiration_date:m.use_expiration?m.expiration_date:null,max_uses:m.use_max_uses?parseInt(m.max_uses):null,per_user_limit:m.use_per_user?parseInt(m.per_user_limit):null,min_order_amount:m.use_min_order?parseFloat(m.min_order_amount):null};n?(await wk(n._id,x),d("Voucher updated successfully!")):(await jk(x),d("Voucher created successfully!")),setTimeout(()=>{r(),t()},1500)}catch(x){o(((h=(b=x.response)==null?void 0:b.data)==null?void 0:h.detail)||"Failed to save voucher")}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 p-6 flex items-center justify-between",children:[s.jsx("h2",{className:"text-white text-xl font-bold",children:n?"Edit Discount Code":"Create Discount Code"}),s.jsx("button",{onClick:t,className:"text-white hover:bg-blue-800 p-2 rounded-lg transition-colors",children:s.jsx(Pe,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:v,className:"p-6 space-y-5",children:[i&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Pt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-600",children:i})]}),c&&s.jsx("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-emerald-600",children:c})}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Code ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"code",value:m.code,onChange:p,placeholder:"e.g., DAING20OFF",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!!n}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"3-20 characters, alphanumeric only"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Type ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{name:"discount_type",value:m.discount_type,onChange:p,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"percentage",children:"Percentage (%)"}),s.jsx("option",{value:"fixed",children:"Fixed Amount ()"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Value ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"number",name:"value",value:m.value||"",onChange:p,placeholder:"0",step:m.discount_type==="percentage"?"1":"0.01",min:"0",max:m.discount_type==="percentage"?"100":void 0,className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("span",{className:"ml-2 text-slate-600 font-medium",children:m.discount_type==="percentage"?"%":""})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"Optional Constraints"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"use_expiration",checked:m.use_expiration,onChange:p,className:"w-4 h-4 rounded border-slate-300 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Set Expiration Date"})]}),m.use_expiration&&s.jsx("input",{type:"date",name:"expiration_date",value:m.expiration_date,onChange:p,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ml-7"})]}),s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"use_max_uses",checked:m.use_max_uses,onChange:p,className:"w-4 h-4 rounded border-slate-300 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Set Max Total Uses"})]}),m.use_max_uses&&s.jsx("input",{type:"number",name:"max_uses",value:m.max_uses,onChange:p,placeholder:"100",min:"1",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ml-7"})]}),s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"use_per_user",checked:m.use_per_user,onChange:p,className:"w-4 h-4 rounded border-slate-300 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Set Per User Limit"})]}),m.use_per_user&&s.jsx("input",{type:"number",name:"per_user_limit",value:m.per_user_limit,onChange:p,placeholder:"2",min:"1",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ml-7"})]}),s.jsxs("div",{className:"space-y-3 mt-4",children:[s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",name:"use_min_order",checked:m.use_min_order,onChange:p,className:"w-4 h-4 rounded border-slate-300 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Set Min Order Amount"})]}),m.use_min_order&&s.jsxs("div",{className:"flex items-center ml-7",children:[s.jsx("span",{className:"text-slate-600 mr-2",children:""}),s.jsx("input",{type:"number",name:"min_order_amount",value:m.min_order_amount,onChange:p,placeholder:"1000",step:"0.01",min:"0",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-6 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 font-semibold rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":n?"Update":"Create"})]})]})]})})}function c3(){const[e,t]=u.useState([]),[r,n]=u.useState([]),[a,l]=u.useState(!0),[i,o]=u.useState(""),[c,d]=u.useState("all"),[m,f]=u.useState(""),[p,g]=u.useState({adminOwned:!0,allSellers:!0}),[v,y]=u.useState({isOpen:!1,voucher:null}),[j,b]=u.useState({isOpen:!1,editing:null}),[h,x]=u.useState(null);u.useEffect(()=>{S()},[c]);const S=async()=>{var I,L;l(!0),o("");try{const M=(await Ub(c)).vouchers||[];t(M),n([])}catch(z){o(((L=(I=z.response)==null?void 0:I.data)==null?void 0:L.detail)||"Failed to load vouchers")}finally{l(!1)}},E=async I=>{var L,z;if(window.confirm("Are you sure you want to delete this voucher code?")){x(I);try{await $b(I),n(M=>M.filter(J=>J._id!==I)),t(M=>M.filter(J=>J._id!==I))}catch(M){alert(((z=(L=M.response)==null?void 0:L.data)==null?void 0:z.detail)||"Failed to delete voucher")}finally{x(null)}}},w=I=>I?new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No limit",k=I=>I.expiration_date&&new Date(I.expiration_date)<=new Date,D=I=>k(I)?{label:"Expired",color:"text-red-600 bg-red-50"}:I.active?I.max_uses&&I.current_uses>=I.max_uses?{label:"Used Up",color:"text-orange-600 bg-orange-50"}:{label:"Active",color:"text-emerald-600 bg-emerald-50"}:{label:"Inactive",color:"text-slate-600 bg-slate-50"},q=r.filter(I=>I.code.toLowerCase().includes(m.toLowerCase())),N=e.filter(I=>I.code.toLowerCase().includes(m.toLowerCase())),_=({vouchers:I,isAdmin:L=!1,loading:z=!1})=>z?s.jsxs("div",{className:"px-6 py-12 text-center",children:[s.jsx(gs,{className:"w-6 h-6 text-blue-600 animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Loading..."})]}):I.length===0?s.jsx("div",{className:"px-6 py-8 text-center text-slate-500 text-sm",children:L?"No admin-created voucher codes":"No seller voucher codes"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-white border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Code"}),!L&&s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Seller"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Value"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Uses"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Expires"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:I.map(M=>{const J=D(M);return s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"font-bold text-base text-blue-600",children:M.code})}),!L&&s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"text-base text-slate-700",children:M.seller_name||"Unknown"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"text-base text-slate-700",children:M.discount_type==="percentage"?"Percentage":"Fixed"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"font-semibold text-base text-slate-900",children:M.discount_type==="percentage"?`${M.value}%`:`${M.value.toLocaleString()}`})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:"text-base text-slate-700",children:[M.current_uses,M.max_uses?` / ${M.max_uses}`:" / "]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"text-base text-slate-600",children:M.expiration_date?w(M.expiration_date):"No limit"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-1 text-sm font-medium border rounded ${J.color}`,children:J.label})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:()=>y({isOpen:!0,voucher:M}),className:"p-2 hover:bg-blue-100 text-slate-500 hover:text-blue-700 border border-transparent hover:border-blue-300 transition-all",title:"View details",children:s.jsx(Nn,{className:"w-4 h-4"})}),L&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>b({isOpen:!0,editing:M}),className:"p-2 hover:bg-blue-100 text-slate-500 hover:text-blue-700 border border-transparent hover:border-blue-300 transition-all",title:"Edit code",children:s.jsx(yo,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E(M._id),disabled:h===M._id,className:"p-2 hover:bg-red-100 text-slate-500 hover:text-red-700 border border-transparent hover:border-red-300 transition-all disabled:opacity-50",title:"Delete code",children:h===M._id?s.jsx(gs,{className:"w-4 h-4 animate-spin"}):s.jsx(Wt,{className:"w-4 h-4"})})]})]})})]},M._id)})})]})});return s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx(we,{title:"Voucher Management System",subtitle:"Create and manage all discount codes"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Voucher Management"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"System-wide discount code administration"})]}),s.jsxs("button",{onClick:()=>b({isOpen:!0,editing:null}),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:[s.jsx(ia,{className:"w-5 h-5"}),"Create New Code"]})]}),i&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3 mb-6",children:[s.jsx(Pt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-red-600 font-semibold",children:"Error loading vouchers"}),s.jsx("p",{className:"text-sm text-red-500",children:i})]})]}),s.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search code...",value:m,onChange:I=>f(I.target.value),className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active Only"}),s.jsx("option",{value:"expired",children:"Expired Only"})]})]})}),a&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gs,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading vouchers..."})]}),!a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden transition-all duration-300 rounded-lg mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:()=>g(I=>({...I,adminOwned:!I.adminOwned})),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-bold text-blue-900 text-base",children:"MY VOUCHERS (Admin)"}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:q.length})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-slate-600",children:p.adminOwned?`Showing ${q.length}`:"Click to expand"}),p.adminOwned?s.jsx(qs,{className:"w-5 h-5 text-blue-600"}):s.jsx(ct,{className:"w-5 h-5 text-blue-600"})]})]}),s.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${p.adminOwned?"max-h-[3000px] opacity-100":"max-h-0 opacity-0"}`,children:q.length===0?s.jsxs("div",{className:"px-6 py-8 text-center text-slate-500",children:[s.jsx("p",{children:"No admin-created voucher codes yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Create one to get started"})]}):s.jsx(_,{vouchers:q,isAdmin:!0})})]}),s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden transition-all duration-300 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:()=>g(I=>({...I,allSellers:!I.allSellers})),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-bold text-blue-900 text-base",children:"ALL SELLERS' VOUCHERS"}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:N.length})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-slate-600",children:p.allSellers?`Showing ${N.length}`:"Click to expand"}),p.allSellers?s.jsx(qs,{className:"w-5 h-5 text-blue-600"}):s.jsx(ct,{className:"w-5 h-5 text-blue-600"})]})]}),s.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${p.allSellers?"max-h-[3000px] opacity-100":"max-h-0 opacity-0"}`,children:s.jsx(_,{vouchers:N,isAdmin:!1,loading:a})})]})]})]}),s.jsx(av,{isOpen:v.isOpen,onClose:()=>y({isOpen:!1,voucher:null}),voucher:v.voucher}),s.jsx(lv,{isOpen:j.isOpen,onClose:()=>b({isOpen:!1,editing:null}),onSuccess:S,editingVoucher:j.editing})]})}const d3={pending:Hm,completed:tc},u3={pending:"bg-yellow-100 text-yellow-700 border-yellow-200",completed:"bg-green-100 text-green-700 border-green-200"},iv={pending:"Pending",completed:"Completed"};function m3({payouts:e,title:t,isCollapsed:r,onToggleCollapse:n,onStatusUpdate:a}){const[l,i]=u.useState(1),o=8,c=Math.ceil(e.length/o),d=e.slice((l-1)*o,l*o),m=p=>{if(!p)return"-";const g=new Date(p);return isNaN(g.getTime())?p:g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},f=p=>u3[p];return s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden transition-all duration-300",children:[t&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 cursor-pointer hover:bg-blue-50 transition-colors bg-gradient-to-r from-white to-blue-50",onClick:n,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded bg-blue-100",children:s.jsx(wn,{className:"w-5 h-5 text-blue-600"})}),s.jsx("span",{className:"font-bold text-blue-900 text-base",children:t}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:e.length})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm text-slate-600",children:r?"Click to expand":`Showing ${d.length} of ${e.length}`}),r?s.jsx(ct,{className:"w-5 h-5 text-blue-600"}):s.jsx(qs,{className:"w-5 h-5 text-blue-600"})]})]}),s.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${r?"max-h-0 opacity-0":"max-h-[3000px] opacity-100"}`,children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gradient-to-r from-blue-50 to-blue-25 border-b border-blue-200",children:[s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Seller"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Period"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Total Sales"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Commission"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"To Pay"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:d.map(p=>s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsxs("td",{className:"px-4 py-4 font-medium text-slate-900 flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(bs,{className:"w-4 h-4 text-blue-600"})}),p.seller_name]}),s.jsx("td",{className:"px-4 py-4 text-center text-slate-700 font-medium",children:p.period}),s.jsxs("td",{className:"px-4 py-4 text-right text-slate-900 font-semibold",children:["",p.total_sales.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.jsxs("td",{className:"px-4 py-4 text-right text-red-600 font-semibold",children:["-",p.commission_amount.toLocaleString("en-US",{minimumFractionDigits:2}),s.jsxs("span",{className:"text-xs text-slate-600 ml-1",children:["(",p.commission_percent,"%)"]})]}),s.jsxs("td",{className:"px-4 py-4 text-right text-green-600 font-bold text-lg",children:["",p.amount_to_pay.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-sm font-medium border rounded ${f(p.status)}`,children:[Rs.createElement(d3[p.status],{className:"w-3.5 h-3.5"}),iv[p.status]]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("div",{className:"flex items-center justify-center",children:p.status==="pending"?s.jsx("button",{onClick:()=>a(p.id,"completed"),className:"px-3 py-1 text-xs font-semibold bg-green-600 hover:bg-green-700 text-white rounded transition-colors",children:"Mark Paid"}):s.jsxs("span",{className:"text-xs text-slate-600",children:["Paid ",m(p.paid_at||"")]})})})]},p.id))})]})}),c>1&&s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-t border-blue-200 bg-slate-50",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",l," of ",c]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>i(Math.max(1,l-1)),disabled:l===1,className:"p-2 border border-blue-300 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(tt,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:()=>i(Math.min(c,l+1)),disabled:l===c,className:"p-2 border border-blue-300 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s.jsx(st,{className:"w-4 h-4 text-blue-600"})})]})]})]})]})}function h3(){const[e,t]=u.useState(null),[r,n]=u.useState([]),[a,l]=u.useState(!0),[i,o]=u.useState(""),[c,d]=u.useState("all"),[m,f]=u.useState({});u.useEffect(()=>{p()},[]);const p=async()=>{try{const[h,x]=await Promise.all([X.get("/payouts/admin/stats"),X.get("/payouts/admin?page=1&page_size=100")]);t(h.data.stats),n(x.data.payouts||[])}catch(h){console.error("Failed to load payouts:",h)}finally{l(!1)}},g=async(h,x)=>{try{await X.put(`/payouts/admin/${h}/status`,{status:x}),await p()}catch(S){console.error("Failed to update payout status:",S)}},v=u.useMemo(()=>r.filter(h=>!(c!=="all"&&h.status!==c||i&&!h.seller_name.toLowerCase().includes(i.toLowerCase()))),[r,c,i]),y=u.useMemo(()=>{const h={pending:[],completed:[]};return v.forEach(x=>{h[x.status].push(x)}),h},[v]),j=h=>{f(x=>({...x,[h]:!x[h]}))},b=h=>h.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return a?s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Payout Management",subtitle:"Track and manage seller payouts",backgroundImage:"/assets/page-hero/orders.jpg"}),s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:"Loading..."})]}):s.jsxs("div",{className:"space-y-6 w-full min-h-screen pb-6",children:[s.jsx(we,{title:"Payout Management",subtitle:"Track and manage seller payouts",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-blue-700 mb-1",children:"Total Payouts"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(e==null?void 0:e.total_payouts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-yellow-50 border border-yellow-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-yellow-700 mb-1",children:"Pending"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(e==null?void 0:e.pending_payouts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 border border-green-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-green-700 mb-1",children:"Completed"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:(e==null?void 0:e.completed_payouts)??"-"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-orange-50 border border-orange-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-orange-700 mb-1",children:"Pending Amount"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["",b((e==null?void 0:e.total_pending_amount)??0)]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-emerald-50 border border-emerald-200 shadow-md p-4 rounded-lg",children:[s.jsx("div",{className:"text-xs font-bold text-emerald-700 mb-1",children:"Total Paid"}),s.jsxs("div",{className:"text-lg font-bold text-slate-900",children:["",b((e==null?void 0:e.total_paid_amount)??0)]})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-stretch sm:items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(zt,{className:"absolute left-3 top-3.5 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search seller name...",value:i,onChange:h=>o(h.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-blue-300 bg-white text-base focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("select",{value:c,onChange:h=>d(h.target.value),className:"px-3 py-2.5 border border-blue-300 bg-white text-base min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"completed",children:"Completed"})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 space-y-4",children:Object.entries(y).map(([h,x],S)=>x.length>0&&s.jsx("div",{className:"transition-all duration-500 ease-in-out",style:{animationDelay:`${S*100}ms`,animation:"slideIn 0.4s ease-out forwards"},children:s.jsx(m3,{payouts:x,title:`${iv[h]} Payouts`,isCollapsed:m[`status-${h}`]??!1,onToggleCollapse:()=>j(`status-${h}`),onStatusUpdate:g})},h))}),v.length===0&&!a&&s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 text-center py-12",children:[s.jsx(Pt,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-500 text-lg",children:"No payouts found"})]})]})}function x3(){const[e,t]=u.useState("year"),[r,n]=u.useState(new Date().getFullYear()),[a,l]=u.useState([new Date().getFullYear()]),[i,o]=u.useState([]),[c,d]=u.useState(null),[m,f]=u.useState(!0),[p,g]=u.useState(!1);u.useEffect(()=>{v()},[r,e]);const v=async()=>{f(!0);try{const x=await gk(r,e==="first-half"?1:e==="second-half"?2:void 0);o(x.data||[]),x.available_years&&x.available_years.length>0&&l(x.available_years)}catch(h){console.error("Failed to load sales overview:",h),o([])}finally{f(!1)}},y=(h,x,S)=>{const E=Math.max(...i.map(w=>w.amount),1);return i.length===0?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsx("p",{className:"text-sm",children:"No sales data for this period"})}):s.jsxs("svg",{viewBox:`0 0 ${80*i.length+2*x} ${h+80}`,className:"w-full",style:{minHeight:`${h+80}px`},children:[[0,.25,.5,.75,1].map(w=>{const k=Math.round(E*w),D=h-h*w+30;return s.jsxs("g",{children:[s.jsx("line",{x1:x-5,y1:D,x2:80*i.length+x,y2:D,stroke:"#e2e8f0",strokeWidth:"1"}),s.jsxs("text",{x:x-10,y:D+4,textAnchor:"end",fontSize:S.yAxis,fill:"#64748b",fontFamily:"sans-serif",children:["",k.toLocaleString()]})]},`y-${w}`)}),s.jsx("line",{x1:x,y1:h+30,x2:80*i.length+x,y2:h+30,stroke:"#cbd5e1",strokeWidth:"1"}),i.map((w,k)=>{const q=x+k*80+40,N=E>0?w.amount/E*h:0,_=h+30-N,I=c===k,L=40;return s.jsxs("g",{onMouseEnter:()=>d(k),onMouseLeave:()=>d(null),style:{cursor:"pointer"},children:[s.jsx("rect",{x:q-L/2,y:_,width:L,height:Math.max(N,2),fill:I?"#2563eb":"#3b82f6",rx:"2",className:"transition-all"}),s.jsx("text",{x:q,y:h+50,textAnchor:"middle",fontSize:S.xAxis,fill:I?"#1e40af":"#475569",fontFamily:"sans-serif",fontWeight:I?"bold":"normal",children:w.period}),I&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:q-40,y:_-35,width:"80",height:"28",fill:"#1e40af",rx:"4"}),s.jsxs("text",{x:q,y:_-15,textAnchor:"middle",fontSize:S.tooltip,fill:"white",fontFamily:"sans-serif",fontWeight:"bold",children:["",w.amount.toLocaleString()]})]})]},`bar-${k}`)})]})};return m?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsx("p",{className:"text-sm",children:"Loading sales data..."})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4 relative",children:[s.jsx("button",{onClick:()=>g(!0),className:"absolute top-0 right-0 p-2 text-blue-600 hover:bg-blue-50 transition-colors border border-blue-200 z-10",title:"Expand view",children:s.jsx(pl,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("select",{value:r,onChange:h=>n(Number(h.target.value)),className:"px-3 py-2 border border-blue-200 text-blue-900 text-sm font-medium bg-white focus:outline-none focus:ring-2 focus:ring-blue-300",children:a.map(h=>s.jsx("option",{value:h,children:h},h))}),s.jsx("div",{className:"flex gap-1",children:[{value:"year",label:"Full Year"},{value:"first-half",label:"Jan - Jun"},{value:"second-half",label:"Jul - Dec"}].map(h=>s.jsx("button",{onClick:()=>t(h.value),className:`px-4 py-2 font-medium text-sm transition-all ${e===h.value?"bg-blue-600 text-white border border-blue-700":"bg-white text-blue-700 border border-blue-200 hover:bg-blue-50"}`,children:h.label},h.value))})]}),s.jsx("div",{className:"bg-white border border-blue-200 p-4 shadow-sm",children:y(250,50,{yAxis:13,xAxis:14,tooltip:14})})]}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white max-w-6xl w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"Sales Overview"}),s.jsx("button",{onClick:()=>g(!1),className:"p-1 hover:bg-slate-100 transition-colors",children:s.jsx(Pe,{className:"w-5 h-5 text-slate-600"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("select",{value:r,onChange:h=>n(Number(h.target.value)),className:"px-3 py-2 border border-blue-200 text-blue-900 text-sm font-medium bg-white focus:outline-none focus:ring-2 focus:ring-blue-300",children:a.map(h=>s.jsx("option",{value:h,children:h},h))}),s.jsx("div",{className:"flex gap-1",children:[{value:"year",label:"Full Year"},{value:"first-half",label:"Jan - Jun"},{value:"second-half",label:"Jul - Dec"}].map(h=>s.jsx("button",{onClick:()=>t(h.value),className:`px-4 py-2 font-medium text-sm transition-all ${e===h.value?"bg-blue-600 text-white border border-blue-700":"bg-white text-blue-700 border border-blue-200 hover:bg-blue-50"}`,children:h.label},h.value))})]}),s.jsx("div",{className:"bg-white border border-blue-200 p-6 shadow-sm",children:y(400,60,{yAxis:16,xAxis:16,tooltip:16})})]})]})})]})}const kf=["#3b82f6","#06b6d4","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#6366f1"];function f3(){const[e,t]=u.useState([]),[r,n]=u.useState(!0),[a,l]=u.useState(null),[i,o]=u.useState(!1);u.useEffect(()=>{c()},[]);const c=async()=>{n(!0);try{const g=await pk();t(g.categories||[])}catch(g){console.error("Failed to load sales categories:",g),t([])}finally{n(!1)}};if(r)return s.jsx("div",{className:"flex items-center justify-center h-48 text-slate-500",children:s.jsx("p",{className:"text-sm",children:"Loading..."})});if(e.length===0)return s.jsx("div",{className:"flex items-center justify-center h-48 text-slate-500",children:s.jsx("p",{className:"text-sm",children:"No category data available"})});const d=e.reduce((g,v)=>g+v.sold,0);if(d<=0)return s.jsx("div",{className:"flex items-center justify-center h-48 text-slate-500",children:s.jsx("p",{className:"text-sm",children:"No sales data yet"})});const m=e.map((g,v)=>({category:g.category,sold:g.sold,percentage:g.sold/d,color:kf[v%kf.length]})).sort((g,v)=>v.sold-g.sold),f=m.slice(0,3),p=(g,v)=>{const y=v/2,j=v/2,b=v*.35,h=v*.17,x=2*Math.PI*b;let S=0;return s.jsxs("div",{className:"relative",style:{width:v,height:v},children:[s.jsxs("svg",{width:v,height:v,viewBox:`0 0 ${v} ${v}`,children:[s.jsx("circle",{cx:y,cy:j,r:b,fill:"none",stroke:"#f1f5f9",strokeWidth:h}),g.map((E,w)=>{const k=E.percentage*x,D=-S;return S+=k,s.jsx("circle",{cx:y,cy:j,r:b,fill:"none",stroke:E.color,strokeWidth:a===w?h+6:h,strokeDasharray:`${k} ${x}`,strokeDashoffset:D,transform:`rotate(-90 ${y} ${j})`,className:"cursor-pointer transition-all",style:{opacity:a===null||a===w?1:.4,transformOrigin:"center"},onMouseEnter:()=>l(w),onMouseLeave:()=>l(null)},w)})]}),s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:a!==null?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm font-semibold text-blue-900",children:g[a].category}),s.jsx("p",{className:"text-2xl font-bold text-blue-900",children:g[a].sold.toLocaleString()}),s.jsxs("p",{className:"text-xs text-slate-500",children:[(g[a].percentage*100).toFixed(1),"% sold"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-3xl font-bold text-blue-900",children:d.toLocaleString()}),s.jsx("p",{className:"text-xs text-slate-500",children:"Total Sold"})]})})]})};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p(f,200),s.jsx("div",{className:"grid grid-cols-3 gap-4 w-full",children:f.map((g,v)=>s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xl font-bold",style:{color:g.color},children:g.sold.toLocaleString()}),s.jsx("p",{className:"text-xs font-medium text-slate-700 truncate",children:g.category})]},v))}),s.jsx("button",{onClick:()=>o(!0),className:"absolute top-0 right-0 p-2 text-blue-600 hover:bg-blue-50 transition-colors border border-blue-200",title:"Expand view",children:s.jsx(pl,{className:"w-4 h-4"})})]})}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-blue-200",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"Sales by Category"}),s.jsx("button",{onClick:()=>o(!1),className:"p-1 hover:bg-slate-100 transition-colors",children:s.jsx(Pe,{className:"w-5 h-5 text-slate-600"})})]}),s.jsxs("div",{className:"p-6 flex flex-col items-center gap-6",children:[p(m,300),s.jsx("div",{className:"w-full grid grid-cols-2 md:grid-cols-4 gap-4",children:m.map((g,v)=>s.jsxs("div",{className:"text-center p-3 border border-slate-200 bg-slate-50",children:[s.jsx("p",{className:"text-2xl font-bold",style:{color:g.color},children:g.sold.toLocaleString()}),s.jsx("p",{className:"text-sm font-medium text-slate-700 mt-1",children:g.category}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(g.percentage*100).toFixed(1),"%"]})]},v))})]})]})})]})}function p3(){const{showToast:e}=ht(),[t,r]=u.useState(null),[n,a]=u.useState([]),[l,i]=u.useState([]),[o,c]=u.useState(0),[d,m]=u.useState(1),[f,p]=u.useState(!0),g=async()=>{p(!0);try{const[h,x,S]=await Promise.all([xk(),fk(3),nf(d,4)]);r(h.kpis),a(x.orders),i(S.products),c(S.total)}catch(h){console.error("Failed to load dashboard data:",h),e("Failed to load dashboard data")}finally{p(!1)}};u.useEffect(()=>{g()},[d]);const v=async h=>{try{const x=await nf(h,4);i(x.products),m(h)}catch{e("Failed to load top products")}},y=[{label:"Total Products",value:(t==null?void 0:t.total_products.toString())||"0",icon:ye,color:"text-blue-600",bg:"bg-blue-100"},{label:"Total Orders",value:(t==null?void 0:t.total_orders.toString())||"0",icon:lt,color:"text-emerald-600",bg:"bg-emerald-100"},{label:"Total Earnings",value:`${(t==null?void 0:t.total_earnings.toLocaleString("en-US",{minimumFractionDigits:2}))||"0.00"}`,icon:wn,color:"text-amber-600",bg:"bg-amber-100"},{label:"Average Rating",value:(t==null?void 0:t.average_rating.toFixed(1))||"0.0",icon:Ls,color:"text-purple-600",bg:"bg-purple-100"}],j=Math.ceil(o/4),b={confirmed:"text-slate-600",pending:"text-amber-600",shipped:"text-blue-600",delivered:"text-emerald-600",cancelled:"text-red-600"};return s.jsxs(s.Fragment,{children:[s.jsx(we,{title:"Seller Dashboard",subtitle:"Manage your store, track sales, and grow your business",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"space-y-6 px-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-blue-900",children:"Dashboard Overview"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Real-time store performance metrics"})]}),s.jsxs("button",{onClick:g,className:"inline-flex items-center gap-2 px-4 py-2 border border-blue-200 text-blue-700 hover:bg-blue-50 transition-colors text-sm font-medium",children:[s.jsx(sc,{className:"w-4 h-4"}),"Refresh"]})]}),f?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 animate-pulse text-blue-300"}),s.jsx("p",{children:"Loading dashboard..."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:y.map(({label:h,value:x,icon:S,color:E,bg:w})=>s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-xl",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-500 font-medium uppercase tracking-wide",children:h}),s.jsx("div",{className:`w-9 h-9 rounded-lg ${w} text-blue-700 flex items-center justify-center`,children:s.jsx(S,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"mt-3 text-2xl font-bold text-blue-900",children:x})]},h))}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"xl:col-span-2 bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("h2",{className:"text-base font-bold text-blue-900 mb-4",children:"Sales Overview"}),s.jsx(x3,{})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("h3",{className:"text-base font-bold text-blue-900 mb-4",children:"Recent Orders"}),n.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-8",children:[s.jsx(lt,{className:"w-10 h-10 mx-auto mb-2 text-slate-300"}),s.jsx("p",{className:"text-sm",children:"No orders yet"})]}):s.jsx("div",{className:"space-y-2",children:n.map(h=>s.jsxs("div",{className:"flex items-center justify-between border border-slate-200 p-3 hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-slate-800",children:h.customer}),s.jsx("div",{className:"text-xs text-slate-500",children:h.order_number})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-semibold text-blue-900",children:["",h.total.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.jsx("div",{className:`text-xs font-medium capitalize ${b[h.status.toLowerCase()]||"text-slate-500"}`,children:h.status})]})]},h.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"xl:col-span-2 bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg overflow-hidden",children:[s.jsx("h3",{className:"text-base font-bold text-blue-900 mb-4",children:"Top Products"}),l.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-8",children:[s.jsx(ye,{className:"w-10 h-10 mx-auto mb-2 text-slate-300"}),s.jsx("p",{className:"text-sm",children:"No products yet"})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-blue-50 border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2 text-xs font-bold text-blue-900",children:"Product"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-bold text-blue-900",children:"Sold"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-bold text-blue-900",children:"Price"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-bold text-blue-900",children:"Stock"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:l.map(h=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"px-3 py-2",children:[s.jsx("div",{className:"text-sm font-medium text-slate-800",children:h.name}),h.category_name&&s.jsx("div",{className:"text-xs text-slate-500",children:h.category_name})]}),s.jsx("td",{className:"px-3 py-2 text-right text-sm text-slate-700",children:h.sold}),s.jsxs("td",{className:"px-3 py-2 text-right text-sm font-semibold text-blue-700",children:["",h.price.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.jsx("td",{className:"px-3 py-2 text-right",children:s.jsx("span",{className:`text-xs font-bold ${h.stock===0?"text-red-600":h.stock<10?"text-amber-600":"text-emerald-600"}`,children:h.stock===0?"Out":h.stock<10?`${h.stock} (Low)`:h.stock})})]},h.id))})]})}),j>1&&s.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-slate-200 pt-4",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",d," of ",j]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>v(d-1),disabled:d===1,className:"px-3 py-1.5 text-sm border border-blue-200 text-blue-700 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),s.jsx("button",{onClick:()=>v(d+1),disabled:d===j,className:"px-3 py-1.5 text-sm border border-blue-200 text-blue-700 hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-4 rounded-lg",children:[s.jsx("h3",{className:"text-base font-bold text-blue-900 mb-4",children:"Sales by Category"}),s.jsx(f3,{})]})]})]})]})]})}const g3=`name,description,price,category,stock_qty,status,images,main_image_index
Danggit Premium 500g,Premium dried fish,249.00,Danggit,24,available,https://example.com/image1.jpg|https://example.com/image2.jpg,0`,Cf={name:"",description:"",price:0,category_id:"",stock_qty:0,status:"available",main_image_index:0};function b3(){const{user:e}=rt(),[t,r]=u.useState([]),[n,a]=u.useState([]),[l,i]=u.useState(!1),[o,c]=u.useState(null),[d,m]=u.useState(""),[f,p]=u.useState(""),[g,v]=u.useState("all"),[y,j]=u.useState(!0),[b,h]=u.useState(1),x=5,[S,E]=u.useState(0),[w,k]=u.useState([]),[D,q]=u.useState(null),[N,_]=u.useState(null),[I,L]=u.useState({stock_qty:0,status:"available"}),[z,M]=u.useState(!0),[J,U]=u.useState(!0),[C,F]=u.useState(!0),[B,Q]=u.useState(!1),[$,O]=u.useState(null),[G,H]=u.useState(""),[V,K]=u.useState([]),[de,ge]=u.useState(1),[fe,le]=u.useState(0),[Ie,ue]=u.useState([]),[Y,se]=u.useState(!1),be=3,[Re,T]=u.useState(!1),[A,re]=u.useState("create"),[oe,Se]=u.useState(null),[me,Le]=u.useState({...Cf}),[Me,it]=u.useState({}),[gt,At]=u.useState(!1),[Kr,Os]=u.useState(!1),[bt,Qt]=u.useState({name:"",description:"",id:""}),[js,Z]=u.useState({}),[_e,Fe]=u.useState(!1),[Ee,Ue]=u.useState(null),je=async()=>{i(!0),c(null);try{const[P,ce]=await Promise.all([_b({search:d,category_id:f||void 0,in_stock:g==="all"?void 0:g==="in",include_disabled:y,page:b,page_size:x}),E5()]);r(P.products||[]),E(P.total||0),a(ce.categories||[])}catch(P){c(P.message||"Failed to load products")}finally{i(!1)}};u.useEffect(()=>{je()},[]),u.useEffect(()=>{const P=setTimeout(()=>{h(1)},350);return()=>clearTimeout(P)},[d,f,g,y]),u.useEffect(()=>{je()},[b,d,f,g,y]),u.useEffect(()=>{k(P=>P.filter(ce=>t.some(Te=>Te.id===ce))),D&&!t.some(P=>P.id===D)&&(q(null),_(null))},[t,D]);const Be=u.useMemo(()=>{const P=t.length,ce=t.filter(Yr=>!Yr.is_disabled).length,Te=t.filter(Yr=>Yr.stock_qty<=0).length,Ns=t.reduce((Yr,Vl)=>Yr+(Vl.stock_qty||0),0),uv=t.reduce((Yr,Vl)=>Yr+(Vl.stock_qty||0)*(Vl.price||0),0);return[{label:"Total Products",value:P.toString()},{label:"Active Products",value:ce.toString()},{label:"Out of Stock",value:Te.toString()},{label:"Inventory Units",value:Ns.toString()},{label:"Inventory Value",value:td(uv)}]},[t]),ls=Math.max(1,Math.ceil(S/x)),is=u.useMemo(()=>{const P=new Map;return t.forEach(ce=>{const Te=ce.category_id||"uncategorized";P.set(Te,(P.get(Te)||0)+1)}),P},[t]),{myCategories:ws,otherCategories:Ms}=u.useMemo(()=>{const P=n.filter(Te=>Te.created_by===(e==null?void 0:e.id)),ce=n.filter(Te=>Te.created_by!==(e==null?void 0:e.id));return{myCategories:P,otherCategories:ce}},[n,e==null?void 0:e.id]),cr=u.useMemo(()=>t.map(P=>P.id),[t]),Ul=u.useMemo(()=>cr.length>0&&cr.every(P=>w.includes(P)),[cr,w]),ac=()=>{k(Ul?P=>P.filter(ce=>!cr.includes(ce)):P=>Array.from(new Set([...P,...cr])))},Sn=P=>{k(ce=>ce.includes(P)?ce.filter(Te=>Te!==P):[...ce,P])},Fs=P=>{if(D===P.id){q(null),_(null);return}q(P.id),_(P),L({stock_qty:P.stock_qty,status:P.status||"available"}),ge(1)},$l=async(P,ce)=>{se(!0);try{const Te=await Yn(P,ce,be);ue(Te.reviews||[]),le(Te.total||0)}finally{se(!1)}},ga=(P,ce)=>{re(P),Se(ce||null),Le(ce?{name:ce.name,description:ce.description||"",price:ce.price,category_id:ce.category_id||"",stock_qty:ce.stock_qty,status:ce.status||"available",main_image_index:ce.main_image_index||0}:{...Cf}),K([]),it({}),T(!0)},zl=()=>{const P={},ce=KC(me.name);ce.valid||(P.name=ce.error);const Te=pf(me.description);Te.valid||(P.description=Te.error);const Ns=GC(me.price);return Ns.valid||(P.price=Ns.error),(Number.isNaN(Number(me.stock_qty))||Number(me.stock_qty)<0)&&(P.stock_qty="Stock cannot be negative."),["available","draft"].includes(me.status)||(P.status="Invalid status."),it(P),Object.keys(P).length===0},lc=()=>{const P={},ce=YC(bt.name);ce.valid||(P.name=ce.error);const Te=pf(bt.description);return Te.valid||(P.description=Te.error),Z(P),Object.keys(P).length===0},dr=async()=>{if(!zl()){c("Please fix the highlighted fields.");return}At(!0),c(null);try{const P=Ps(me.name.trim()),ce=Ps(me.description.trim());let Te;if(A==="create")Te=(await A5({name:P,description:ce,price:Number(me.price),category_id:me.category_id||void 0,stock_qty:Number(me.stock_qty),status:me.status})).product;else if(oe)Te=(await qc(oe.id,{name:P,description:ce,price:Number(me.price),category_id:me.category_id||null,stock_qty:Number(me.stock_qty),status:me.status,main_image_index:me.main_image_index})).product;else return;V.length>0&&await L5(Te.id,V,me.main_image_index),T(!1),K([]),it({}),await je()}catch(P){c(P.message||"Failed to save product")}finally{At(!1)}},Bl=async P=>{await ef(P.id,!P.is_disabled),await je()},Hl=async P=>{confirm(`Permanently delete ${P.name}? This cannot be undone.`)&&(await tf(P.id),await je())},ic=async()=>{if(N){At(!0);try{await qc(N.id,{stock_qty:Number(I.stock_qty),status:I.status}),await je()}finally{At(!1)}}},ba=Math.max(1,Math.ceil(fe/be));u.useEffect(()=>{N&&$l(N.id,de)},[N,de]);const R=P=>{P&&K(ce=>[...ce,...Array.from(P)])},ie=P=>{K(ce=>ce.filter((Te,Ns)=>Ns!==P))},ke=async(P,ce)=>{await D5(P,ce),await je();const Te=t.find(Ns=>Ns.id===P);Te&&Se(Te)},Ze=async P=>{await Promise.all(w.map(ce=>ef(ce,P))),k([]),await je()},Jt=async()=>{confirm(`Delete ${w.length} products permanently? This cannot be undone.`)&&(await Promise.all(w.map(P=>tf(P))),k([]),await je())},ov=async()=>{G&&(await Promise.all(w.map(P=>qc(P,{category_id:G}))),k([]),H(""),await je())},cv=async()=>{if(!lc()){c("Please fix the highlighted fields.");return}At(!0);try{const P=Ps(bt.name.trim()),ce=Ps(bt.description.trim());bt.id?await I5(bt.id,{name:P,description:ce}):await P5({name:P,description:ce}),Os(!1),Qt({name:"",description:"",id:""}),Z({}),await je()}finally{At(!1)}},dv=async P=>{Fe(!0),Ue(null);try{const ce=await G5(P);Ue({inserted:ce.inserted,errors:ce.errors||[]}),await je()}catch(ce){Ue({inserted:0,errors:[{row:0,error:ce.message||"Import failed"}]})}finally{Fe(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(we,{title:"Product Management",subtitle:"Manage your inventory and product listings",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"space-y-6 px-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Product Catalog"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage products, inventory, categories, and imports."})]}),s.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-blue-600 text-white text-sm font-semibold",onClick:()=>ga("create"),children:[s.jsx(ia,{className:"w-4 h-4"}),"Add Product"]})]}),o&&s.jsx("div",{className:"bg-red-50 border border-red-300 text-red-700 px-4 py-2 rounded-lg text-sm",children:o}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4",children:Be.map(P=>s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl p-4 shadow-md",children:[s.jsx("div",{className:"text-xs text-slate-500 font-semibold uppercase",children:P.label}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 mt-2",children:P.value})]},P.label))}),s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Products"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Manage products with bulk selection and visibility toggles."})]}),s.jsxs("button",{className:"inline-flex items-center gap-2 text-sm text-blue-700",onClick:()=>M(P=>!P),children:[z?"Collapse":"Expand",z?s.jsx(qs,{className:"w-4 h-4"}):s.jsx(ct,{className:"w-4 h-4"})]})]}),z&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),s.jsx("input",{value:d,onChange:P=>m(P.target.value),placeholder:"Search products...",className:"pl-9 pr-3 py-2 text-sm border border-blue-200 rounded-lg focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500"})]}),s.jsxs("select",{value:f,onChange:P=>p(P.target.value),className:"px-3 py-2 text-sm border border-blue-200 rounded-lg",children:[s.jsx("option",{value:"",children:"All Categories"}),n.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]}),s.jsxs("select",{value:g,onChange:P=>v(P.target.value),className:"px-3 py-2 text-sm border border-blue-200 rounded-lg",children:[s.jsx("option",{value:"all",children:"All Stock"}),s.jsx("option",{value:"in",children:"In Stock"}),s.jsx("option",{value:"out",children:"Out of Stock"})]}),s.jsx(_f,{label:"Show disabled",checked:y,onChange:()=>j(P=>!P)})]}),w.length>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs",children:[s.jsx("span",{className:"font-semibold text-blue-900",children:"Bulk actions:"}),s.jsx("button",{className:"px-2 py-1 border border-blue-200 rounded",onClick:()=>Ze(!0),children:"Disable"}),s.jsx("button",{className:"px-2 py-1 border border-blue-200 rounded",onClick:()=>Ze(!1),children:"Enable"}),s.jsx("button",{className:"px-2 py-1 border border-red-200 text-red-600 rounded",onClick:Jt,children:"Delete"}),s.jsxs("select",{value:G,onChange:P=>H(P.target.value),className:"px-2 py-1 border border-blue-200 rounded",children:[s.jsx("option",{value:"",children:"Set category..."}),n.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]}),s.jsx("button",{className:"px-2 py-1 border border-blue-200 rounded",onClick:ov,children:"Apply"})]}),s.jsx("div",{className:"overflow-x-auto border border-blue-200 rounded-xl shadow-md bg-white",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-blue-50 text-slate-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2 w-10",children:s.jsx("input",{type:"checkbox",checked:Ul,onChange:ac})}),s.jsx("th",{className:"text-left px-3 py-2",children:"Product"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Price"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Stock"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Category"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Visible"}),s.jsx("th",{className:"text-right px-3 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:l?s.jsx("tr",{children:s.jsx("td",{className:"px-3 py-6 text-center text-slate-500",colSpan:7,children:"Loading products..."})}):t.length===0?s.jsx("tr",{children:s.jsx("td",{className:"px-3 py-6 text-center text-slate-500",colSpan:7,children:"No products found."})}):t.map(P=>s.jsxs("tr",{className:"border-t border-blue-100",children:[s.jsx("td",{className:"px-3 py-3",children:s.jsx("input",{type:"checkbox",checked:w.includes(P.id),onChange:()=>Sn(P.id)})}),s.jsx("td",{className:"px-3 py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ef,{images:P.images,mainIndex:P.main_image_index}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-slate-800",children:P.name}),s.jsx("div",{className:"text-xs text-slate-500 line-clamp-1",children:P.description||""})]})]})}),s.jsx("td",{className:"px-3 py-3 text-slate-700",children:td(P.price)}),s.jsx("td",{className:"px-3 py-3",children:s.jsxs("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${P.stock_qty<=0?"bg-red-100 text-red-700":P.stock_qty<=5?"bg-amber-100 text-amber-700":"bg-emerald-100 text-emerald-700"}`,children:[P.stock_qty," pcs"]})}),s.jsx("td",{className:"px-3 py-3 text-slate-600",children:P.category_name||"Uncategorized"}),s.jsx("td",{className:"px-3 py-3",children:s.jsx(_f,{checked:!P.is_disabled,onChange:()=>Bl(P)})}),s.jsx("td",{className:"px-3 py-3 text-right",children:s.jsxs("div",{className:"inline-flex items-center gap-2",children:[s.jsx("button",{className:"px-2 py-1 text-xs border border-blue-200 rounded",onClick:()=>O(P),children:"View Details"}),s.jsx("button",{className:"px-2 py-1 text-xs border border-blue-200 rounded",onClick:()=>Fs(P),children:"Inventory & Reviews"}),s.jsx("button",{className:"px-2 py-1 text-xs border border-blue-200 rounded",onClick:()=>ga("edit",P),children:s.jsx(Gc,{className:"w-4 h-4"})}),s.jsx("button",{className:"px-2 py-1 text-xs border border-red-200 text-red-600 rounded",onClick:()=>Hl(P),children:s.jsx(Wt,{className:"w-4 h-4"})})]})})]},P.id))})]})}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[s.jsxs("span",{children:["Page ",b," of ",ls]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"px-3 py-1 border border-blue-200 rounded-lg disabled:opacity-50",onClick:()=>h(P=>Math.max(1,P-1)),disabled:b<=1,children:"Prev"}),s.jsx("button",{className:"px-3 py-1 border border-blue-200 rounded-lg disabled:opacity-50",onClick:()=>h(P=>Math.min(ls,P+1)),disabled:b>=ls,children:"Next"})]})]}),N&&D===N.id&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl shadow-md p-4",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Inventory"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Cs,{label:"Stock Quantity",children:s.jsx("input",{type:"number",min:"0",value:I.stock_qty,onChange:P=>L({...I,stock_qty:Number(P.target.value)}),className:"w-full px-3 py-2 text-sm border border-blue-200 rounded-lg"})}),s.jsx(Cs,{label:"Status",children:s.jsxs("select",{value:I.status,onChange:P=>L({...I,status:P.target.value}),className:"w-full px-3 py-2 text-sm border border-blue-200 rounded-lg",children:[s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"draft",children:"Draft"})]})}),s.jsx("button",{className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg",onClick:ic,disabled:gt,children:gt?"Saving...":"Save Inventory"})]})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl shadow-md p-4",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Reviews & Ratings"}),Y?s.jsx("div",{className:"text-sm text-slate-500",children:"Loading reviews..."}):Ie.length===0?s.jsx("div",{className:"text-sm text-slate-500",children:"No reviews yet."}):s.jsxs("div",{className:"space-y-3 text-sm text-slate-600",children:[Ie.map(P=>s.jsxs("button",{className:"text-left w-full border border-blue-100 rounded-lg p-3 bg-white",onClick:()=>O(N),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-semibold text-slate-700",children:P.user_name||"Anonymous"}),s.jsxs("div",{className:"text-xs text-amber-600 font-semibold",children:[P.rating," "]})]}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:P.created_at||""}),s.jsx("div",{className:"text-sm text-slate-700 mt-1",children:P.comment})]},P.id)),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[s.jsxs("span",{children:["Page ",de," of ",ba]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"px-2 py-1 border border-blue-200 rounded",onClick:()=>ge(P=>Math.max(1,P-1)),disabled:de<=1,children:"Prev"}),s.jsx("button",{className:"px-2 py-1 border border-blue-200 rounded",onClick:()=>ge(P=>Math.min(ba,P+1)),disabled:de>=ba,children:"Next"})]})]})]})]})]})]})]}),s.jsxs("section",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Categories"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Manage global product categories."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{className:"inline-flex items-center gap-2 text-sm text-blue-700",onClick:()=>U(P=>!P),children:[J?"Collapse All":"Expand All",J?s.jsx(qs,{className:"w-4 h-4"}):s.jsx(ct,{className:"w-4 h-4"})]}),s.jsxs("button",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-blue-200 text-blue-700 text-sm",onClick:()=>{Qt({name:"",description:"",id:""}),Os(!0)},children:[s.jsx(ia,{className:"w-4 h-4"}),"Add Category"]})]})]}),J&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-blue-200 rounded-xl shadow-md bg-white overflow-hidden",children:[s.jsxs("button",{onClick:()=>F(P=>!P),className:"w-full px-4 py-3 bg-blue-50 flex items-center justify-between border-b border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-blue-900 text-sm font-semibold",children:" My Categories"}),s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",ws.length,")"]})]}),C?s.jsx(qs,{className:"w-4 h-4 text-slate-600"}):s.jsx(ct,{className:"w-4 h-4 text-slate-600"})]}),C&&s.jsx("div",{className:"overflow-x-auto",children:ws.length===0?s.jsx("div",{className:"px-4 py-8 text-center text-slate-500 text-sm",children:"You haven't created any categories yet"}):s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-blue-50 text-slate-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2",children:"Category"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Products"}),s.jsx("th",{className:"text-right px-3 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:ws.map(P=>s.jsxs("tr",{className:"border-t border-blue-100",children:[s.jsxs("td",{className:"px-3 py-2",children:[s.jsx("div",{className:"font-semibold text-slate-800",children:P.name}),s.jsx("div",{className:"text-xs text-slate-500",children:P.description||""})]}),s.jsx("td",{className:"px-3 py-2 text-slate-600",children:is.get(P.id)||0}),s.jsxs("td",{className:"px-3 py-2 text-right",children:[s.jsx("button",{className:"px-2 py-1 text-xs border border-blue-200 rounded mr-2",onClick:()=>{Qt({name:P.name,description:P.description||"",id:P.id}),Os(!0)},title:"Edit category",children:s.jsx(Gc,{className:"w-4 h-4"})}),s.jsx("button",{className:"px-2 py-1 text-xs border border-red-200 text-red-600 rounded",onClick:()=>{window.confirm("Delete this category?")&&T5(P.id).then(je)},title:"Delete category",children:s.jsx(Wt,{className:"w-4 h-4"})})]})]},P.id))})]})})]}),Ms.length>0&&s.jsxs("div",{className:"border border-blue-200 rounded-xl shadow-md bg-white overflow-hidden",children:[s.jsxs("button",{onClick:()=>Q(P=>!P),className:"w-full px-4 py-3 bg-blue-50 flex items-center justify-between border-b border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-blue-900 text-sm font-semibold",children:" Other Sellers' Categories"}),s.jsxs("span",{className:"text-slate-500 text-sm",children:["(",Ms.length,")"]})]}),B?s.jsx(qs,{className:"w-4 h-4 text-slate-600"}):s.jsx(ct,{className:"w-4 h-4 text-slate-600"})]}),B&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-blue-50 text-slate-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2",children:"Category"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Products"}),s.jsx("th",{className:"text-right px-3 py-2",children:"Actions"})]})}),s.jsx("tbody",{children:Ms.map(P=>s.jsxs("tr",{className:"border-t border-blue-100",children:[s.jsxs("td",{className:"px-3 py-2",children:[s.jsx("div",{className:"font-semibold text-slate-800",children:P.name}),s.jsxs("div",{className:"text-xs text-slate-500",children:[P.description||"",s.jsx("span",{className:"ml-2 text-amber-600 font-medium",children:"(Read-only)"})]})]}),s.jsx("td",{className:"px-3 py-2 text-slate-600",children:is.get(P.id)||0}),s.jsxs("td",{className:"px-3 py-2 text-right",children:[s.jsx("button",{className:"px-2 py-1 text-xs border border-slate-200 text-slate-400 cursor-not-allowed opacity-50 rounded mr-2",disabled:!0,title:"Only the creator can edit this category",children:s.jsx(Gc,{className:"w-4 h-4"})}),s.jsx("button",{className:"px-2 py-1 text-xs border border-slate-200 text-slate-400 cursor-not-allowed opacity-50 rounded",disabled:!0,title:"Only the creator can delete this category",children:s.jsx(Wt,{className:"w-4 h-4"})})]})]},P.id))})]})})]})]})]}),s.jsxs("section",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-blue-900",children:"Import Products (CSV)"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Use the template to format CSV files. Required columns must be present."})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-blue-200 text-blue-700 text-sm cursor-pointer",children:[s.jsx(Jb,{className:"w-4 h-4"}),_e?"Importing...":"Upload CSV",s.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:P=>P.target.files&&dv(P.target.files[0])})]}),s.jsx("a",{href:`data:text/csv;charset=utf-8,${encodeURIComponent(g3)}`,download:"products-template.csv",className:"text-sm text-blue-600",children:"Download template"})]}),s.jsx("div",{className:"overflow-x-auto border border-blue-200 rounded-xl shadow-md bg-white",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{className:"bg-blue-50 text-slate-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-3 py-2",children:"Column"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Required"}),s.jsx("th",{className:"text-left px-3 py-2",children:"Example"})]})}),s.jsxs("tbody",{children:[s.jsx(hr,{name:"name",required:!0,example:"Danggit Premium 500g"}),s.jsx(hr,{name:"price",required:!0,example:"249.00"}),s.jsx(hr,{name:"stock_qty",required:!0,example:"24"}),s.jsx(hr,{name:"category",required:!0,example:"Danggit"}),s.jsx(hr,{name:"description",example:"Premium dried fish"}),s.jsx(hr,{name:"status",example:"available"}),s.jsx(hr,{name:"images",example:"url1|url2"}),s.jsx(hr,{name:"main_image_index",example:"0"})]})]})}),Ee&&s.jsxs("div",{className:"text-sm text-slate-700",children:[s.jsxs("div",{className:"font-semibold",children:["Inserted: ",Ee.inserted]}),Ee.errors.length>0&&s.jsx("ul",{className:"mt-2 text-xs text-red-600",children:Ee.errors.slice(0,5).map((P,ce)=>s.jsxs("li",{children:["Row ",P.row,": ",P.error]},ce))})]})]}),Re&&s.jsx(ed,{title:A==="create"?"Add Product":"Edit Product",onClose:()=>T(!1),children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[s.jsxs("div",{className:"rounded-xl border border-blue-200 bg-gradient-to-b from-white to-blue-50 p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Image Preview"}),s.jsx("div",{className:"w-full aspect-square rounded-lg border border-dashed border-blue-200 flex items-center justify-center text-xs text-slate-400",children:V.length?"Preview below":"Upload images"})]}),s.jsxs("div",{className:"rounded-xl border border-blue-200 bg-white p-3",children:[s.jsx("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Upload Images"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"px-3 py-2 text-xs border border-blue-200 rounded-lg text-blue-700 cursor-pointer",children:["Choose files",s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:P=>R(P.target.files)})]}),s.jsxs("label",{className:"px-3 py-2 text-xs border border-blue-200 rounded-lg text-blue-700 cursor-pointer",children:["Add more images",s.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:P=>R(P.target.files)})]})]}),V.length>0&&s.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2",children:V.map((P,ce)=>s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-blue-100",children:[s.jsx("img",{src:URL.createObjectURL(P),alt:"Preview",className:"w-full h-20 object-cover"}),s.jsx("button",{className:"absolute top-1 right-1 bg-white/90 rounded-full p-1",onClick:()=>ie(ce),type:"button",children:s.jsx(Pe,{className:"w-3 h-3"})})]},`${P.name}-${ce}`))}),oe&&oe.images.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Main Image"}),s.jsx(Ef,{images:oe.images,mainIndex:me.main_image_index,onChangeMain:P=>Le({...me,main_image_index:P})}),s.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2",children:oe.images.map((P,ce)=>s.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-blue-100",children:[s.jsx("img",{src:P.url,alt:"Product",className:"w-full h-20 object-cover"}),s.jsx("button",{className:"absolute top-1 right-1 bg-white/90 rounded-full p-1",onClick:()=>ke(oe.id,ce),type:"button",children:s.jsx(Pe,{className:"w-3 h-3"})})]},P.url))})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs(Cs,{label:"Name",children:[s.jsx("input",{value:me.name,onChange:P=>Le({...me,name:P.target.value}),className:`w-full px-3 py-2 text-sm border rounded-lg ${Me.name?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,placeholder:"e.g., Premium Danggit 500g"}),Me.name&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:Me.name})]}),s.jsx(Cs,{label:"Category",children:s.jsxs("select",{value:me.category_id,onChange:P=>Le({...me,category_id:P.target.value}),className:"w-full px-3 py-2 text-sm border border-blue-200 rounded-lg",children:[s.jsx("option",{value:"",children:"Uncategorized"}),n.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})})]}),s.jsxs(Cs,{label:"Description",children:[s.jsx("textarea",{value:me.description,onChange:P=>Le({...me,description:P.target.value}),className:`w-full px-3 py-2 text-sm border rounded-lg ${Me.description?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,rows:4,placeholder:"Describe your product..."}),Me.description&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:Me.description})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs(Cs,{label:"Price",children:[s.jsx("input",{type:"number",min:"0",step:"0.01",value:me.price,onChange:P=>Le({...me,price:Number(P.target.value)}),className:`w-full px-3 py-2 text-sm border rounded-lg ${Me.price?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,placeholder:"0.00"}),Me.price&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:Me.price})]}),s.jsxs(Cs,{label:"Stock",children:[s.jsx("input",{type:"number",min:"0",value:me.stock_qty,onChange:P=>Le({...me,stock_qty:Number(P.target.value)}),className:`w-full px-3 py-2 text-sm border rounded-lg ${Me.stock_qty?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,placeholder:"0"}),Me.stock_qty&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:Me.stock_qty})]}),s.jsxs(Cs,{label:"Status",children:[s.jsxs("select",{value:me.status,onChange:P=>Le({...me,status:P.target.value}),className:`w-full px-3 py-2 text-sm border rounded-lg ${Me.status?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,children:[s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"draft",children:"Draft"})]}),Me.status&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:Me.status})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{className:"px-3 py-2 text-sm border border-slate-200 rounded-lg",onClick:()=>T(!1),children:"Cancel"}),s.jsx("button",{className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg",onClick:dr,disabled:gt,children:gt?"Saving...":"Save"})]})]})]})}),$&&s.jsx(ed,{title:"Product Details",onClose:()=>O(null),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Images"}),$.images.length>0?s.jsx("div",{className:"grid grid-cols-2 gap-3",children:$.images.map((P,ce)=>s.jsx("div",{className:`rounded-lg overflow-hidden border ${ce===$.main_image_index?"border-blue-500":"border-blue-200"}`,children:s.jsx("img",{src:P.url,alt:"Product",className:"w-full h-40 object-cover"})},P.url))}):s.jsx("div",{className:"text-sm text-slate-500",children:"No images uploaded."})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Details"}),s.jsxs("div",{className:"text-sm text-slate-700 space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Name:"})," ",$.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Category:"})," ",$.category_name||"Uncategorized"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Price:"})," ",td($.price)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Stock:"})," ",$.stock_qty]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Status:"})," ",$.status]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold",children:"Visibility:"})," ",$.is_disabled?"Disabled":"Visible"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Inventory"}),s.jsxs("div",{className:"text-sm text-slate-600",children:["Stock quantity: ",$.stock_qty]})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Reviews & Ratings"}),s.jsx("div",{className:"text-sm text-slate-600",children:"Reviews will appear here when connected."})]})]})]})}),Kr&&s.jsx(ed,{title:bt.id?"Edit Category":"Add Category",onClose:()=>Os(!1),children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Cs,{label:"Name",children:[s.jsx("input",{value:bt.name,onChange:P=>Qt({...bt,name:P.target.value}),className:`w-full px-3 py-2 text-sm border rounded-lg ${js.name?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,placeholder:"e.g., Danggit, Boneless Bangus"}),js.name&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:js.name})]}),s.jsxs(Cs,{label:"Description",children:[s.jsx("textarea",{value:bt.description,onChange:P=>Qt({...bt,description:P.target.value}),className:`w-full px-3 py-2 text-sm border rounded-lg ${js.description?"border-red-300 focus:ring-red-500":"border-blue-200 focus:ring-blue-500"}`,rows:3,placeholder:"Describe this category..."}),js.description&&s.jsx("div",{className:"text-xs text-red-500 mt-1",children:js.description})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{className:"px-3 py-2 text-sm border border-slate-200 rounded-lg",onClick:()=>Os(!1),children:"Cancel"}),s.jsx("button",{className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-lg",onClick:cv,disabled:gt,children:gt?"Saving...":"Save"})]})]})})]})]})}function _f({checked:e,onChange:t,label:r}){return s.jsxs("button",{type:"button",className:"inline-flex items-center gap-2",onClick:t,children:[s.jsx("span",{className:`w-10 h-5 rounded-full transition-colors ${e?"bg-blue-600":"bg-slate-200"} relative`,children:s.jsx("span",{className:`absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform ${e?"translate-x-5":""}`})}),r&&s.jsx("span",{className:"text-xs text-slate-600",children:r})]})}function hr({name:e,required:t,example:r}){return s.jsxs("tr",{className:"border-t border-blue-100",children:[s.jsx("td",{className:"px-3 py-2 text-slate-700 font-semibold",children:e}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-semibold ${t?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}`,children:t?"Required":"Optional"})}),s.jsx("td",{className:"px-3 py-2 text-slate-500",children:r})]})}function Ef({images:e,mainIndex:t,onChangeMain:r}){const[n,a]=u.useState(t||0),l=e.length,i=l===0?0:Math.max(0,Math.min(n,l-1));return u.useEffect(()=>{a(t||0)},[t]),l===0?s.jsx("div",{className:"w-14 h-14 rounded-lg bg-blue-100 flex items-center justify-center text-xs text-blue-600",children:"No image"}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border border-blue-200 flex items-center justify-center",onClick:()=>a(o=>(o-1+l)%l),children:s.jsx(tt,{className:"w-3 h-3"})}),s.jsx("div",{className:"w-14 h-14 rounded-lg border border-blue-200 overflow-hidden bg-white",children:s.jsx("img",{src:e[i].url,alt:"Product",className:"w-full h-full object-cover"})}),s.jsx("button",{type:"button",className:"w-6 h-6 rounded-full border border-blue-200 flex items-center justify-center",onClick:()=>a(o=>(o+1)%l),children:s.jsx(st,{className:"w-3 h-3"})}),r&&s.jsx("button",{type:"button",className:"px-2 py-1 text-xs border border-blue-200 rounded-lg",onClick:()=>r(i),children:"Set main"})]})}function Cs({label:e,children:t}){return s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-semibold text-slate-600",children:e}),t]})}function ed({title:e,children:t,onClose:r}){return s.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl border border-blue-200 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 bg-gradient-to-r from-blue-50 to-white border-b border-blue-100",children:[s.jsx("div",{className:"font-semibold text-blue-900 text-lg",children:e}),s.jsx("button",{className:"p-1 text-slate-500",onClick:r,children:s.jsx(Pe,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"p-5",children:t})]})})}function td(e){return`$${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}const xi=[{value:"confirmed",label:"Confirmed"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],Pf={confirmed:"bg-slate-100 text-slate-700 border-slate-200",shipped:"bg-orange-100 text-orange-700 border-orange-200",delivered:"bg-green-100 text-green-700 border-green-200",cancelled:"bg-red-100 text-red-700 border-red-200"},sd=e=>{switch(e){case"shipped":return s.jsx(Br,{className:"w-4 h-4"});case"delivered":return s.jsx(Gt,{className:"w-4 h-4"});case"cancelled":return s.jsx(gl,{className:"w-4 h-4"});default:return s.jsx(ye,{className:"w-4 h-4"})}},xr=e=>{const t=(e||"").toLowerCase();return t==="shipped"?"shipped":t==="delivered"?"delivered":t==="cancelled"||t==="canceled"?"cancelled":"confirmed"};function v3(){var x,S,E,w,k,D,q,N,_,I,L,z,M,J,U,C,F,B,Q;const{showToast:e}=ht(),[t,r]=u.useState([]),[n,a]=u.useState(!0),[l,i]=u.useState(null),[o,c]=u.useState({}),[d,m]=u.useState(null),[f,p]=u.useState(!1),g=async()=>{a(!0);try{const $=await Tb(1,50);r($.orders||[]);const O={};for(const G of $.orders||[])O[G.id]=xr(G.status);c(O)}catch{e("Failed to load seller orders")}finally{a(!1)}};u.useEffect(()=>{g()},[]);const v=u.useMemo(()=>t.map($=>{var H,V;const O=((H=$.address)==null?void 0:H.full_name)||"Customer",G=$.total_items||((V=$.items)==null?void 0:V.reduce((K,de)=>K+(de.qty||0),0))||0;return{id:$.id,order_number:$.order_number||$.id,customer:O,status:xr($.status),total:$.total,itemsCount:G,created_at:$.created_at}}),[t]),y=($,O)=>{c(G=>({...G,[$]:O}))},j=async $=>{var G,H;const O=o[$];if(O){i($);try{const V=await H5($,O);r(K=>K.map(de=>de.id===$?V.order:de)),e("Order status updated"),(d==null?void 0:d.id)===$&&m(V.order)}catch(V){e(((H=(G=V==null?void 0:V.response)==null?void 0:G.data)==null?void 0:H.detail)||"Failed to update order")}finally{i(null)}}},b=$=>{m($)},h=($,O)=>{O.stopPropagation(),m($),p(!0)};return s.jsxs(s.Fragment,{children:[s.jsx(we,{title:"Order Management",subtitle:"Track and manage customer orders",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"flex h-[calc(100vh-14rem)] gap-4 overflow-hidden px-6 py-4",children:[s.jsxs("div",{className:"w-2/5 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-blue-900",children:"Orders"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Track and update fulfillment status."})]}),s.jsxs("button",{onClick:g,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-blue-200 text-blue-700 hover:bg-blue-50 transition-colors text-sm",children:[s.jsx(sc,{className:"w-4 h-4"}),"Refresh"]})]}),s.jsxs("div",{className:"flex-1 bg-white border border-blue-200 shadow-sm overflow-hidden rounded-lg flex flex-col",children:[s.jsx("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 bg-gradient-to-r from-white to-blue-50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 text-blue-700",children:s.jsx(ye,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-bold text-blue-900 text-base",children:"Order List"}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:t.length})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:n?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 animate-pulse text-slate-300"}),s.jsx("p",{children:"Loading orders..."})]})}):v.length===0?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),s.jsx("p",{children:"No orders yet."})]})}):s.jsx("div",{className:"divide-y divide-blue-100",children:v.map($=>{var H;const O=t.find(V=>V.id===$.id),G=(d==null?void 0:d.id)===$.id;return s.jsxs("div",{onClick:()=>b(O),className:`px-4 py-4 cursor-pointer transition-colors hover:bg-blue-50 ${G?"bg-blue-100 border-l-4 border-blue-600":""}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-slate-900 text-sm mb-1",children:$.order_number}),s.jsx("div",{className:"text-xs text-slate-500 mb-2",children:$.created_at?new Date($.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""})]}),s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 text-xs font-semibold border rounded ${Pf[$.status]}`,children:[sd($.status),(H=xi.find(V=>V.value===$.status))==null?void 0:H.label]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"text-slate-600",children:[s.jsx(bs,{className:"w-3.5 h-3.5 inline mr-1"}),$.customer]}),s.jsxs("div",{className:"font-semibold text-blue-700",children:["",$.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-2",children:[s.jsx(zr,{className:"w-3.5 h-3.5"}),$.itemsCount," item",$.itemsCount!==1?"s":""]})]},$.id)})})})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:d?s.jsxs("div",{className:"flex-1 bg-white border border-blue-200 shadow-sm rounded-lg overflow-hidden flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-blue-900",children:["Order #",d.order_number||d.id]}),s.jsx("p",{className:"text-sm text-slate-600",children:d.created_at?new Date(d.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""})]}),s.jsx("button",{onClick:$=>h(d,$),className:"px-3 py-1.5 text-sm border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50",children:"View Full Details"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-5",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-5",children:[s.jsxs("h3",{className:"text-base font-bold text-blue-900 mb-4 flex items-center gap-2",children:[s.jsx(Br,{className:"w-5 h-5"}),"Delivery Summary"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white/70 rounded-md p-3 text-center",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Status"}),s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[sd(xr(d.status)),s.jsx("span",{className:"font-semibold text-sm text-slate-900",children:(x=xi.find($=>$.value===xr(d.status)))==null?void 0:x.label})]})]}),s.jsxs("div",{className:"bg-white/70 rounded-md p-3 text-center",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Items"}),s.jsx("p",{className:"font-bold text-lg text-slate-900",children:d.total_items||((S=d.items)==null?void 0:S.length)||0})]}),s.jsxs("div",{className:"bg-white/70 rounded-md p-3 text-center",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Amount"}),s.jsxs("p",{className:"font-bold text-lg text-blue-700",children:["",d.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),s.jsx("div",{className:"bg-white/70 rounded-md p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($r,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Delivery Address"}),s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:((E=d.address)==null?void 0:E.full_name)||"N/A"}),s.jsx("p",{className:"text-sm text-slate-700",children:((w=d.address)==null?void 0:w.address_line)||"No address provided"}),s.jsx("p",{className:"text-sm text-slate-700",children:[(k=d.address)==null?void 0:k.city,(D=d.address)==null?void 0:D.province,(q=d.address)==null?void 0:q.postal_code].filter(Boolean).join(", ")||""}),((N=d.address)==null?void 0:N.phone)&&s.jsxs("p",{className:"text-sm text-slate-600 mt-1 flex items-center gap-1",children:[s.jsx(fa,{className:"w-3.5 h-3.5"}),d.address.phone]})]})]})})]})]}),s.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center gap-2",children:[s.jsx(bs,{className:"w-4 h-4"}),"Customer Information"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase mb-1",children:"Name"}),s.jsx("p",{className:"text-slate-900 font-medium",children:((_=d.address)==null?void 0:_.full_name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase mb-1",children:"Phone"}),s.jsx("p",{className:"text-slate-900",children:((I=d.address)==null?void 0:I.phone)||"N/A"})]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center gap-2",children:[s.jsx(ye,{className:"w-4 h-4"}),"Order Items (",((L=d.items)==null?void 0:L.length)||0,")"]}),s.jsx("div",{className:"space-y-3",children:(d.items||[]).map(($,O)=>s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-md border border-slate-200",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-md flex-shrink-0 flex items-center justify-center overflow-hidden",children:$.image_url?s.jsx("img",{src:$.image_url,alt:$.name,className:"w-full h-full object-cover"}):s.jsx(ye,{className:"w-6 h-6 text-slate-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm text-slate-900 mb-1 line-clamp-2",children:$.name}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"text-slate-600",children:["Qty: ",$.qty]}),s.jsxs("span",{className:"font-semibold text-blue-700",children:["",$.price.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]},O))})]}),s.jsxs("div",{className:"bg-white border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-900 mb-3",children:"Update Order Status"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("select",{value:o[d.id]||xr(d.status),onChange:$=>y(d.id,$.target.value),className:"flex-1 px-3 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:xi.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))}),s.jsx("button",{onClick:()=>j(d.id),disabled:l===d.id,className:"px-5 py-2 text-sm font-semibold bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:l===d.id?"Updating...":"Update Status"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:'Note: Changing status to "Shipped" or "Delivered" will automatically deduct inventory.'})]})]})]}):s.jsx("div",{className:"flex-1 bg-white border border-blue-200 shadow-sm rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-slate-400",children:[s.jsx(ye,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"Select an order to view details"}),s.jsx("p",{className:"text-sm",children:"Click on an order from the list to see delivery summary and manage status"})]})})}),f&&d&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>p(!1),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:$=>$.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-50 to-blue-100 border-b border-blue-200 px-6 py-5 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Full Order Details"}),s.jsxs("p",{className:"text-sm text-slate-600",children:["Order #",d.order_number||d.id]})]}),s.jsx("button",{onClick:()=>p(!1),className:"text-slate-500 hover:text-slate-700 p-1",children:s.jsx(Pe,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"px-6 py-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Order Status"}),s.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border ${Pf[xr(d.status)]}`,children:[sd(xr(d.status)),s.jsx("span",{className:"font-medium",children:(z=xi.find($=>$.value===xr(d.status)))==null?void 0:z.label})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[s.jsx(bs,{className:"w-4 h-4"}),"Customer Details"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Name"}),s.jsx("p",{className:"text-slate-900 font-medium",children:((M=d.address)==null?void 0:M.full_name)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Phone"}),s.jsx("p",{className:"text-slate-900",children:((J=d.address)==null?void 0:J.phone)||"N/A"})]})]})]}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4"}),"Delivery Address"]}),s.jsxs("div",{className:"text-sm text-slate-700 space-y-1",children:[s.jsx("p",{children:((U=d.address)==null?void 0:U.address_line)||"N/A"}),s.jsx("p",{children:[(C=d.address)==null?void 0:C.city,(F=d.address)==null?void 0:F.province,(B=d.address)==null?void 0:B.postal_code].filter(Boolean).join(", ")||""})]})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-slate-900 mb-3",children:["Items (",((Q=d.items)==null?void 0:Q.length)||0,")"]}),s.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(d.items||[]).map(($,O)=>s.jsxs("div",{className:"flex gap-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("div",{className:"w-20 h-20 bg-slate-200 rounded-lg flex-shrink-0 flex items-center justify-center overflow-hidden",children:$.image_url?s.jsx("img",{src:$.image_url,alt:$.name,className:"w-full h-full object-cover"}):s.jsx(ye,{className:"w-8 h-8 text-slate-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-slate-900 mb-1",children:$.name}),s.jsxs("p",{className:"text-xs text-slate-600 mb-2",children:["Quantity: ",$.qty]}),s.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["",$.price.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]},O))})]}),s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-5 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Payment Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Subtotal"}),s.jsxs("span",{className:"text-slate-900",children:["",d.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-blue-200",children:[s.jsx("span",{className:"font-bold text-slate-900",children:"Total"}),s.jsxs("span",{className:"font-bold text-blue-700 text-lg",children:["",d.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),s.jsxs("div",{className:"text-sm text-slate-600 flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4"}),"Placed on"," ",d.created_at?new Date(d.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""]}),s.jsx("button",{onClick:()=>p(!1),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Close"})]})]})})]})]})}const If=5;function y3(){const{showToast:e}=ht(),[t,r]=u.useState([]),[n,a]=u.useState(!0),[l,i]=u.useState(null),[o,c]=u.useState([]),[d,m]=u.useState(!1),[f,p]=u.useState(0),[g,v]=u.useState(1),[y,j]=u.useState(""),[b,h]=u.useState(null),x=async()=>{a(!0);try{const N=await _b({page:1,page_size:100});r(N.products||[]),N.products.length>0&&!l&&i(N.products[0])}catch{e("Failed to load products")}finally{a(!1)}},S=async(N,_=1)=>{m(!0);try{const I=await Yn(N,_,If);c(I.reviews||[]),p(I.total||0),v(_)}catch{e("Failed to load reviews")}finally{m(!1)}};u.useEffect(()=>{x()},[]),u.useEffect(()=>{l&&S(l.id)},[l]);const E=u.useMemo(()=>{if(!y.trim())return t;const N=y.toLowerCase();return t.filter(_=>_.name.toLowerCase().includes(N))},[t,y]),w=u.useMemo(()=>b===null?o:o.filter(N=>N.rating===b),[o,b]),k=Math.ceil(f/If),D=N=>{i(N),h(null)},q=N=>{l&&S(l.id,N)};return s.jsxs(s.Fragment,{children:[s.jsx(we,{title:"Customer Reviews",subtitle:"View and respond to customer feedback",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"flex h-[calc(100vh-14rem)] gap-4 overflow-hidden px-6 py-4",children:[s.jsxs("div",{className:"w-2/5 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-blue-900",children:"Reviews"}),s.jsx("p",{className:"text-sm text-slate-600",children:"View customer ratings and feedback."})]}),s.jsxs("button",{onClick:x,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-blue-200 text-blue-700 hover:bg-blue-50 transition-colors text-sm",children:[s.jsx(sc,{className:"w-4 h-4"}),"Refresh"]})]}),s.jsxs("div",{className:"flex-1 bg-white border border-blue-200 shadow-sm overflow-hidden rounded-lg flex flex-col",children:[s.jsx("div",{className:"flex items-center justify-between px-5 py-4 border-b border-blue-200 bg-gradient-to-r from-white to-blue-50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 text-blue-700",children:s.jsx(ye,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-bold text-blue-900 text-base",children:"Your Products"}),s.jsx("span",{className:"text-sm text-white bg-blue-600 px-2 py-0.5 rounded",children:t.length})]})}),s.jsx("div",{className:"px-4 py-3 border-b border-blue-100 bg-slate-50",children:s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search products...",value:y,onChange:N=>j(N.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-slate-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:n?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 animate-pulse text-slate-300"}),s.jsx("p",{children:"Loading products..."})]})}):E.length===0?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),s.jsx("p",{children:y?"No products found.":"No products yet."})]})}):s.jsx("div",{className:"divide-y divide-blue-100",children:E.map(N=>{var L,z;const _=(l==null?void 0:l.id)===N.id,I=((L=N.images[N.main_image_index])==null?void 0:L.url)||((z=N.images[0])==null?void 0:z.url);return s.jsx("div",{onClick:()=>D(N),className:`px-4 py-4 cursor-pointer transition-colors hover:bg-blue-50 ${_?"bg-blue-100 border-l-4 border-blue-600":""}`,children:s.jsxs("div",{className:"flex gap-3",children:[I&&s.jsx("img",{src:I,alt:N.name,className:"w-16 h-16 object-cover rounded border border-slate-200"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-slate-900 text-sm mb-1 truncate",children:N.name}),s.jsxs("div",{className:"text-sm font-semibold text-blue-700 mb-1",children:["",N.price.toLocaleString("en-US",{minimumFractionDigits:2})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[s.jsx("span",{className:N.stock_qty>0?"text-green-600":"text-red-600",children:N.stock_qty>0?`${N.stock_qty} in stock`:"Out of stock"}),N.category_name&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:N.category_name})]})]})]})]})},N.id)})})})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:l?s.jsxs("div",{className:"flex-1 bg-white border border-blue-200 shadow-sm rounded-lg overflow-hidden flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-blue-900",children:l.name}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Customer Reviews & Ratings"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-900",children:f}),s.jsx("div",{className:"text-xs text-slate-500",children:"Total Reviews"})]})]})}),s.jsx("div",{className:"px-6 py-3 border-b border-blue-100 bg-slate-50",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(or,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Filter by rating:"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>h(null),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${b===null?"bg-blue-600 text-white":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:"All"}),[5,4,3,2,1].map(N=>s.jsxs("button",{onClick:()=>h(N),className:`px-3 py-1 text-xs font-medium rounded transition-colors flex items-center gap-1 ${b===N?"bg-blue-600 text-white":"bg-white border border-slate-300 text-slate-700 hover:bg-slate-50"}`,children:[N,s.jsx(Ls,{className:`w-3 h-3 ${b===N?"fill-white":"fill-yellow-400 text-yellow-400"}`})]},N))]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:d?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(So,{className:"w-12 h-12 mx-auto mb-3 animate-pulse text-slate-300"}),s.jsx("p",{children:"Loading reviews..."})]})}):w.length===0?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(So,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),s.jsx("p",{children:b!==null?`No ${b}-star reviews yet.`:"No reviews yet."})]})}):s.jsx("div",{className:"space-y-4",children:w.map(N=>s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(bs,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-slate-900 text-sm",children:N.user_name}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5}).map((_,I)=>s.jsx(Ls,{className:`w-4 h-4 ${I<N.rating?"fill-yellow-400 text-yellow-400":"text-slate-300"}`},I))})]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[s.jsx(_t,{className:"w-3.5 h-3.5"}),new Date(N.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:N.comment})]},N.id))})}),!d&&w.length>0&&k>1&&b===null&&s.jsx("div",{className:"px-6 py-4 border-t border-blue-200 bg-slate-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-slate-600",children:["Page ",g," of ",k]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>q(g-1),disabled:g===1,className:"px-3 py-1.5 text-sm border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),s.jsx("button",{onClick:()=>q(g+1),disabled:g===k,className:"px-3 py-1.5 text-sm border border-blue-300 text-blue-700 rounded-md hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}):s.jsx("div",{className:"flex-1 bg-white border border-blue-200 shadow-sm rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-slate-500",children:[s.jsx(ye,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),s.jsx("p",{className:"text-lg font-medium",children:"Select a product"}),s.jsx("p",{className:"text-sm",children:"Choose a product to view its reviews"})]})})})]})]})}function j3(){const[e,t]=u.useState([]),[r,n]=u.useState(!0),[a,l]=u.useState(""),[i,o]=u.useState("all"),[c,d]=u.useState(""),[m,f]=u.useState({isOpen:!1,voucher:null}),[p,g]=u.useState({isOpen:!1,editing:null}),[v,y]=u.useState(null);u.useEffect(()=>{j()},[i]);const j=async()=>{var w,k;n(!0),l("");try{const D=await Ub(i);t(D.vouchers||[])}catch(D){l(((k=(w=D.response)==null?void 0:w.data)==null?void 0:k.detail)||"Failed to load vouchers")}finally{n(!1)}},b=async w=>{var k,D;if(window.confirm("Are you sure you want to delete this voucher code?")){y(w);try{await $b(w),t(q=>q.filter(N=>N._id!==w))}catch(q){alert(((D=(k=q.response)==null?void 0:k.data)==null?void 0:D.detail)||"Failed to delete voucher")}finally{y(null)}}},h=e.filter(w=>w.code.toLowerCase().includes(c.toLowerCase())),x=w=>w?new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No limit",S=w=>w.expiration_date&&new Date(w.expiration_date)<=new Date,E=w=>S(w)?{label:"Expired",color:"text-red-600 bg-red-50"}:w.active?w.max_uses&&w.current_uses>=w.max_uses?{label:"Used Up",color:"text-orange-600 bg-orange-50"}:{label:"Active",color:"text-emerald-600 bg-emerald-50"}:{label:"Inactive",color:"text-slate-600 bg-slate-50"};return s.jsxs("div",{className:"min-h-screen bg-slate-50",children:[s.jsx(we,{title:"Discount & Voucher Codes",subtitle:"Create and manage your discount codes"}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Discount Codes"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage and track your voucher codes"})]}),s.jsxs("button",{onClick:()=>g({isOpen:!0,editing:null}),className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:[s.jsx(ia,{className:"w-5 h-5"}),"Create New"]})]}),a&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3 mb-6",children:[s.jsx(Pt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-red-600 font-semibold",children:"Error loading vouchers"}),s.jsx("p",{className:"text-sm text-red-500",children:a})]})]}),s.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search code (e.g., DAING20)...",value:c,onChange:w=>d(w.target.value),className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsxs("select",{value:i,onChange:w=>o(w.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"active",children:"Active Only"}),s.jsx("option",{value:"expired",children:"Expired Only"})]})]})}),r&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gs,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600",children:"Loading vouchers..."})]}),!r&&h.length===0&&s.jsxs("div",{className:"bg-white border border-dashed border-slate-300 rounded-lg p-12 text-center",children:[s.jsx("p",{className:"text-slate-600 text-lg mb-4",children:"No discount codes yet"}),s.jsx("p",{className:"text-slate-500 text-sm mb-6",children:c?"Try adjusting your search":"Create your first voucher code to get started"}),!c&&s.jsx("button",{onClick:()=>g({isOpen:!0,editing:null}),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Create First Code"})]}),!r&&h.length>0&&s.jsx("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden transition-all duration-300 rounded-lg",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-blue-50 to-white border-b border-blue-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Code"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Value"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Uses"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Expires"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:h.map(w=>{const k=E(w);return s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"font-bold text-base text-blue-600",children:w.code})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"text-base text-slate-700",children:w.discount_type==="percentage"?"Percentage":"Fixed"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"font-semibold text-base text-slate-900",children:w.discount_type==="percentage"?`${w.value}%`:`${w.value.toLocaleString()}`})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:"text-base text-slate-700",children:[w.current_uses,w.max_uses?` / ${w.max_uses}`:" / "]})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:"text-base text-slate-600",children:w.expiration_date?x(w.expiration_date):"No limit"})}),s.jsx("td",{className:"px-4 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-1 text-sm font-medium border rounded ${k.color}`,children:k.label})}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:()=>f({isOpen:!0,voucher:{...w,seller_name:"You"}}),className:"p-2 hover:bg-blue-100 text-slate-500 hover:text-blue-700 border border-transparent hover:border-blue-300 transition-all",title:"View details",children:s.jsx(Nn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>g({isOpen:!0,editing:w}),className:"p-2 hover:bg-blue-100 text-slate-500 hover:text-blue-700 border border-transparent hover:border-blue-300 transition-all",title:"Edit code",children:s.jsx(yo,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>b(w._id),disabled:v===w._id,className:"p-2 hover:bg-red-100 text-slate-500 hover:text-red-700 border border-transparent hover:border-red-300 transition-all disabled:opacity-50",title:"Delete code",children:v===w._id?s.jsx(gs,{className:"w-4 h-4 animate-spin"}):s.jsx(Wt,{className:"w-4 h-4"})})]})})]},w._id)})})]})})})]}),s.jsx(av,{isOpen:m.isOpen,onClose:()=>f({isOpen:!1,voucher:null}),voucher:m.voucher}),s.jsx(lv,{isOpen:p.isOpen,onClose:()=>g({isOpen:!1,editing:null}),onSuccess:j,editingVoucher:p.editing})]})}const w3={pending:"bg-yellow-100 text-yellow-700 border-yellow-200",completed:"bg-green-100 text-green-700 border-green-200"},N3={pending:"Pending",completed:"Paid"},S3={pending:Hm,completed:Gt};function k3(){const{user:e}=rt(),[t,r]=u.useState(null),[n,a]=u.useState(!0);u.useEffect(()=>{if(!e)return;(async()=>{try{const m=await X.get("/payouts/mysales");r(m.data)}catch(m){console.error("Failed to load earnings:",m)}finally{a(!1)}})()},[e]);const l=d=>{if(!d)return"-";const m=new Date(d);return isNaN(m.getTime())?d:m.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},i=d=>d.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});if(n)return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"My Earnings",subtitle:"View your sales and payout history",backgroundImage:"/assets/page-hero/orders.jpg"}),s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:"Loading..."})]});const o=t==null?void 0:t.current_period,c=(t==null?void 0:t.payouts)||[];return s.jsxs("div",{className:"space-y-6 w-full min-h-screen pb-6",children:[s.jsx(we,{title:"My Earnings",subtitle:"Track your sales and payout history",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[o&&s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[s.jsx(_t,{className:"w-5 h-5 text-blue-600"}),"This Month's Earnings"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 shadow-md p-6 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-semibold text-blue-700",children:"Total Sales"}),s.jsx(rc,{className:"w-5 h-5 text-blue-600"})]}),s.jsxs("div",{className:"text-3xl font-bold text-slate-900",children:["",i(o.total_sales)]}),s.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[o.order_count," orders"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-red-50 border border-red-200 shadow-md p-6 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-semibold text-red-700",children:"Commission"}),s.jsx(Pt,{className:"w-5 h-5 text-red-600"})]}),s.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["-",i(o.commission_amount)]}),s.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[o.commission_percent,"% platform fee"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-green-50 border border-green-200 shadow-md p-6 rounded-lg lg:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-semibold text-green-700",children:"You Get"}),s.jsx(wn,{className:"w-5 h-5 text-green-600"})]}),s.jsxs("div",{className:"text-4xl font-bold text-green-600",children:["",i(o.amount_to_pay)]}),s.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Amount to be paid out"})]})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-5 mb-8",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Pt,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-slate-700",children:[s.jsx("p",{className:"font-semibold text-slate-900 mb-1",children:"How Payouts Work"}),s.jsxs("p",{children:["Your earnings are calculated automatically each month based on orders. We deduct a ",(o==null?void 0:o.commission_percent)||"5","% platform fee, and the remainder is paid out monthly. Payouts are processed around the 5th of the following month."]})]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[s.jsx(_t,{className:"w-5 h-5 text-blue-600"}),"Payout History"]}),c.length>0?s.jsx("div",{className:"bg-white border border-blue-200 shadow-sm overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gradient-to-r from-blue-50 to-blue-25 border-b border-blue-200",children:[s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Period"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Total Sales"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Commission"}),s.jsx("th",{className:"text-right px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"You Get"}),s.jsx("th",{className:"text-left px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"text-center px-4 py-4 text-sm font-bold text-blue-900 uppercase tracking-wider",children:"Date"})]})}),s.jsx("tbody",{className:"divide-y divide-blue-100",children:c.map(d=>{const m=S3[d.status];return s.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[s.jsx("td",{className:"px-4 py-4 font-semibold text-slate-900",children:d.period}),s.jsxs("td",{className:"px-4 py-4 text-right text-slate-700 font-medium",children:["",i(d.total_sales)]}),s.jsxs("td",{className:"px-4 py-4 text-right text-red-600 font-semibold",children:["-",i(d.commission_amount)]}),s.jsxs("td",{className:"px-4 py-4 text-right text-green-600 font-bold text-lg",children:["",i(d.amount_to_pay)]}),s.jsx("td",{className:"px-4 py-4",children:s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-sm font-medium border rounded ${w3[d.status]}`,children:[s.jsx(m,{className:"w-3.5 h-3.5"}),N3[d.status]]})}),s.jsx("td",{className:"px-4 py-4 text-center text-slate-700",children:d.status==="completed"?l(d.paid_at||""):l(d.created_at)})]},d.id)})})]})})}):s.jsxs("div",{className:"bg-white border border-blue-200 shadow-sm p-12 text-center",children:[s.jsx(_t,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-500 text-lg",children:"No payout history yet"}),s.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Your first payout will appear here next month"})]})]}),s.jsx("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-slate-50 border border-blue-200 rounded-lg p-6",children:s.jsxs("p",{className:"text-sm text-slate-700",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Questions about your earnings?"})," Contact our support team at"," ",s.jsx("a",{href:"mailto:support@dainggrader.com",className:"text-blue-600 hover:underline",children:"support@dainggrader.com"})]})})]})]})}function Tf({title:e,icon:t,products:r,onProductClick:n,wishlistIds:a,onToggleWishlist:l,isLoggedIn:i,userId:o,userRole:c}){const d=u.useRef(null),[m,f]=u.useState(!1),[p,g]=u.useState(!1),v=()=>{if(!d.current)return;const{scrollLeft:j,scrollWidth:b,clientWidth:h}=d.current;f(j>0),g(j<b-h-10)};u.useEffect(()=>{v();const j=d.current;return j&&j.addEventListener("scroll",v),()=>{j&&j.removeEventListener("scroll",v)}},[r]);const y=j=>{if(!d.current)return;const b=220;d.current.scrollBy({left:j==="left"?-b*2:b*2,behavior:"smooth"})};return s.jsxs("div",{className:"relative group/carousel",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(t,{className:"w-5 h-5 text-blue-600"}),s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e})]}),r.length===0?s.jsx("div",{className:"flex items-center justify-center py-8 bg-blue-50 border border-dashed border-blue-300 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-600",children:"No products available"})}):s.jsxs(s.Fragment,{children:[m&&s.jsx("button",{onClick:()=>y("left"),className:"absolute left-0 top-1/2 mt-3 -translate-y-1/2 z-10 w-10 h-24 bg-blue-600/70 hover:bg-blue-700 flex items-center justify-center opacity-0 group-hover/carousel:opacity-100 transition-all duration-200 rounded-l",children:s.jsx(tt,{className:"w-6 h-6 text-white"})}),p&&s.jsx("button",{onClick:()=>y("right"),className:"absolute right-0 top-1/2 mt-3 -translate-y-1/2 z-10 w-10 h-24 bg-blue-600/70 hover:bg-blue-700 flex items-center justify-center opacity-0 group-hover/carousel:opacity-100 transition-all duration-200 rounded-r",children:s.jsx(st,{className:"w-6 h-6 text-white"})}),s.jsx("div",{ref:d,className:"flex gap-2 overflow-x-auto scrollbar-hide scroll-smooth pb-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.map(j=>{var E;const h=j.images&&j.images.length>0?(E=j.images[j.main_image_index||0])==null?void 0:E.url:null,x=a.includes(j.id),S=c==="seller"&&o&&j.seller_id===o;return s.jsx("div",{onClick:()=>n(j.id),className:"flex-shrink-0 w-[200px] rounded-md overflow-hidden cursor-pointer group hover:scale-105 hover:z-10 transition-transform duration-200 relative border border-blue-200 bg-white",children:s.jsxs("div",{className:"relative aspect-[16/9] overflow-hidden bg-slate-100",children:[h?s.jsx("img",{src:h,alt:j.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-blue-50",children:s.jsx(ye,{className:"w-10 h-10 text-blue-300"})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2",children:[s.jsx("h4",{className:"font-bold text-white text-sm line-clamp-2 drop-shadow-lg",children:j.name}),s.jsx("div",{className:"flex items-center gap-2 mt-1 text-white/80 text-xs",children:s.jsxs("span",{className:"font-semibold text-blue-300",children:["",j.price.toLocaleString()]})})]}),j.category_name&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-600 text-white text-[10px] font-medium uppercase rounded",children:j.category_name})}),S&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-semibold uppercase rounded",children:"My Product"})}),i&&s.jsx("button",{onClick:w=>{w.stopPropagation(),l(j.id)},className:"absolute top-2 right-2 p-1.5 bg-white/90 rounded-full hover:bg-white transition-colors",children:s.jsx(Je,{className:`w-4 h-4 ${x?"fill-red-500 text-red-500":"text-slate-400"}`})})]})},j.id)})})]})]})}function C3(){const e=mt(),{isLoggedIn:t,user:r}=rt(),{showToast:n}=ht(),[a,l]=u.useState([]),[i,o]=u.useState([]),[c,d]=u.useState(!0),[m,f]=u.useState(""),[p,g]=u.useState(""),[v,y]=u.useState(""),[j,b]=u.useState("latest"),[h,x]=u.useState([]),[S,E]=u.useState([]),[w,k]=u.useState([]),[D,q]=u.useState(!1),[N,_]=u.useState(!0),[I,L]=u.useState(1),[z,M]=u.useState(0),J=12,[U,C]=u.useState([]);u.useEffect(()=>{(async()=>{d(!0);try{const[V,K]=await Promise.all([Eb(),Lb()]);l(V.categories||[]),o(K.sellers||[])}catch(V){console.error("Failed to load filters:",V)}finally{d(!1)}})()},[]),u.useEffect(()=>{(async()=>{_(!0);try{const[V,K]=await Promise.all([Wa({sort:"latest",page_size:7}),Wa({sort:"most_sold",page_size:7})]);x(V.products||[]),E(K.products||[])}catch(V){console.error("Failed to load carousels:",V)}finally{_(!1)}})()},[]),u.useEffect(()=>{if(!t){C([]);return}(async()=>{try{const V=await Mb();C(V.product_ids||[])}catch(V){console.error("Failed to load wishlist:",V)}})()},[t]),u.useEffect(()=>{const H=setTimeout(()=>{L(1),F(1)},300);return()=>clearTimeout(H)},[m,p,v,j]),u.useEffect(()=>{F(I)},[I]);const F=async H=>{q(!0);try{const V=await Wa({search:m||void 0,category_id:p||void 0,seller_id:v||void 0,sort:j,page:H,page_size:J});k(V.products||[]),M(V.total||0)}catch(V){console.error("Failed to load products:",V)}finally{q(!1)}},B=H=>{e(`/catalog/${H}`)},Q=async H=>{if(!t){n("Please login to add items to wishlist"),e("/login");return}try{const V=await ec(H);V.in_wishlist?C(K=>[...K,H]):C(K=>K.filter(de=>de!==H)),n(V.message)}catch{n("Failed to update wishlist")}},$=()=>{f(""),g(""),y(""),b("latest"),L(1)},O=()=>{window.scrollTo({top:0,behavior:"smooth"})},G=Math.ceil(z/J);return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Shop Fresh Daings",subtitle:"Discover premium quality dried fish from trusted local sellers. Fresh, authentic, and delivered right to your doorstep.",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-[320px]",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:H=>f(H.target.value),className:"w-full pl-10 pr-3 py-2 border border-blue-300 bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]}),s.jsxs("select",{value:p,onChange:H=>g(H.target.value),disabled:c,className:"px-3 py-2 border border-blue-300 bg-white text-sm min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded disabled:opacity-50",children:[s.jsx("option",{value:"",children:"All Categories"}),a.map(H=>s.jsx("option",{value:H.id,children:H.name},H.id))]}),s.jsxs("select",{value:v,onChange:H=>y(H.target.value),disabled:c,className:"px-3 py-2 border border-blue-300 bg-white text-sm min-w-[160px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded disabled:opacity-50",children:[s.jsx("option",{value:"",children:"All Sellers"}),i.map(H=>s.jsx("option",{value:H.id,children:H.name},H.id))]}),s.jsxs("select",{value:j,onChange:H=>b(H.target.value),className:"px-3 py-2 border border-blue-300 bg-white text-sm min-w-[140px] focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded",children:[s.jsx("option",{value:"latest",children:"Date: Newest"}),s.jsx("option",{value:"most_sold",children:"Most Sold"}),s.jsx("option",{value:"price_low",children:"Price: Low to High"}),s.jsx("option",{value:"price_high",children:"Price: High to Low"})]}),s.jsx("button",{onClick:$,className:"px-4 py-2 text-slate-600 border border-slate-300 bg-white hover:bg-slate-50 text-sm rounded transition-colors",children:"Clear All"})]}),N?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading products..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Tf,{title:"Latest Products",icon:Hm,products:h,onProductClick:B,wishlistIds:U,onToggleWishlist:Q,isLoggedIn:t,userId:r==null?void 0:r.id,userRole:r==null?void 0:r.role}),s.jsx(Tf,{title:"Most Sold",icon:rc,products:S,onProductClick:B,wishlistIds:U,onToggleWishlist:Q,isLoggedIn:t,userId:r==null?void 0:r.id,userRole:r==null?void 0:r.role})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[220px_1fr_260px] gap-6 items-start",children:[s.jsx("div",{className:"hidden lg:block sticky top-24",children:s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 p-4 shadow-lg hover:shadow-xl transition-shadow rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Filters"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:m,onChange:H=>f(H.target.value),placeholder:"Search...",className:"w-full pl-8 pr-3 py-2 border border-blue-300 bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1.5",children:"Category"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>g(""),className:`w-full text-left px-3 py-2 text-sm transition-colors ${p===""?"bg-blue-50 text-blue-600 font-medium border-l-2 border-blue-600":"text-slate-600 hover:bg-slate-50"}`,children:"All Categories"}),a.map(H=>s.jsx("button",{onClick:()=>g(H.id),className:`w-full text-left px-3 py-2 text-sm transition-colors ${p===H.id?"bg-blue-50 text-blue-600 font-medium border-l-2 border-blue-600":"text-slate-600 hover:bg-slate-50"}`,children:H.name},H.id))]})]}),s.jsxs("button",{onClick:O,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold transition-colors rounded",children:[s.jsx(vo,{className:"w-4 h-4"}),"Back to Top"]})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"All Products"}),s.jsx("span",{className:"text-sm text-slate-500",children:D?"Loading...":`${z} products found`})]}),!t&&s.jsxs("div",{className:"text-sm text-slate-700 bg-blue-50 border border-blue-200 rounded-lg px-3 py-2",children:["Login to buy, wishlist, and review products."," ",s.jsx(ae,{to:"/login",className:"text-blue-700 font-semibold hover:underline",children:"Login"})]}),D?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),"Loading products..."]}):w.length===0?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),s.jsx("p",{children:"No products found matching your filters."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:w.map(H=>{var fe;const K=H.images&&H.images.length>0?(fe=H.images[H.main_image_index||0])==null?void 0:fe.url:null,de=U.includes(H.id),ge=(r==null?void 0:r.role)==="seller"&&(r==null?void 0:r.id)&&H.seller_id===r.id;return s.jsxs("div",{className:"bg-white border border-blue-200 overflow-hidden group relative cursor-pointer shadow-md hover:shadow-lg hover:border-blue-400 transition-all duration-200 rounded-lg",onClick:()=>e(`/catalog/${H.id}`),children:[t&&s.jsx("button",{onClick:le=>{le.stopPropagation(),Q(H.id)},className:"absolute top-2 right-2 z-10 p-2 bg-white/90 rounded-full border border-slate-200 hover:bg-white transition-colors",children:s.jsx(Je,{className:`w-4 h-4 ${de?"fill-red-500 text-red-500":"text-slate-400"}`})}),s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-blue-50",children:[K?s.jsx("img",{src:K,alt:H.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(ye,{className:"w-12 h-12 text-blue-300"})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:s.jsx("div",{className:"flex items-center gap-4 text-white text-xs",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(lt,{className:"w-3.5 h-3.5"})," ",H.sold_count||0]})})}),H.category_name&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-600 text-white text-[10px] font-medium uppercase rounded",children:H.category_name})}),ge&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-semibold uppercase rounded",children:"My Product"})})]}),s.jsxs("div",{className:"p-3 bg-gradient-to-b from-white to-blue-50",children:[s.jsx("h3",{className:"font-bold text-slate-900 text-base line-clamp-2 mb-1",children:H.name}),s.jsxs("button",{onClick:le=>{le.stopPropagation(),e(`/store/${H.seller_id}`)},className:"text-sm text-slate-500 hover:text-blue-600 mb-2 inline-flex items-center gap-1 transition-colors bg-transparent border-0 p-0 hover:underline font-normal cursor-pointer",children:[s.jsx(Ds,{className:"w-3 h-3"}),s.jsx("span",{children:H.seller_name})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("span",{className:"font-bold text-blue-600 text-lg",children:["",H.price.toLocaleString()]}),s.jsxs("span",{className:"text-xs text-slate-400",children:[H.stock_qty," in stock"]})]})]})]},H.id)})}),G>1&&s.jsxs("div",{className:"flex items-center justify-center gap-2 pt-6",children:[s.jsx("button",{onClick:()=>L(Math.max(1,I-1)),disabled:I===1,className:"px-4 py-2 rounded-lg border border-slate-300 text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:s.jsx(tt,{className:"w-4 h-4"})}),s.jsxs("span",{className:"px-4 py-2 text-slate-600",children:["Page ",I," of ",G]}),s.jsx("button",{onClick:()=>L(Math.min(G,I+1)),disabled:I===G,className:"px-4 py-2 rounded-lg border border-slate-300 text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50",children:s.jsx(st,{className:"w-4 h-4"})})]})]})]}),s.jsx("div",{className:"hidden lg:block sticky top-24",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 p-4 shadow-lg hover:shadow-xl transition-shadow rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ds,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Top Sellers"})]}),s.jsxs("div",{className:"space-y-3",children:[i.slice(0,5).map((H,V)=>s.jsxs("div",{onClick:()=>y(H.id),className:"flex items-start gap-3 cursor-pointer hover:bg-slate-50 p-2 -mx-2 transition-colors rounded",children:[s.jsx("span",{className:"text-lg font-bold text-slate-300",children:V+1}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-sm font-medium text-slate-900 line-clamp-1",children:H.name})})]},H.id)),i.length===0&&s.jsx("p",{className:"text-sm text-slate-400 text-center py-2",children:"No sellers available"})]})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 p-4 shadow-lg hover:shadow-xl transition-shadow rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Qb,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Shop Stats"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Total Products"})]}),s.jsx("span",{className:"font-semibold text-slate-900",children:z})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Active Sellers"})]}),s.jsx("span",{className:"font-semibold text-slate-900",children:i.length})]})]})]}),s.jsxs("button",{onClick:O,className:"w-full flex items-center justify-center gap-2 px-3 py-2.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors shadow-md rounded",children:[s.jsx(vo,{className:"w-4 h-4"}),"Back to Top"]})]})})]})]})}function _3(){var Re;const{id:e}=Nl(),t=mt(),{isLoggedIn:r,user:n}=rt(),{showToast:a}=ht(),[l,i]=u.useState(null),[o,c]=u.useState(!0),[d,m]=u.useState(null),[f,p]=u.useState(0),[g,v]=u.useState([]),[y,j]=u.useState(!1),[b,h]=u.useState(1),[x,S]=u.useState(0),E=5,[w,k]=u.useState(null),[D,q]=u.useState(!1),[N,_]=u.useState(5),[I,L]=u.useState(""),[z,M]=u.useState({}),[J,U]=u.useState(!1),[C,F]=u.useState(!1),[B,Q]=u.useState(!1),[$,O]=u.useState(!1),[G,H]=u.useState(!1);u.useEffect(()=>{if(!e)return;(async()=>{var A;c(!0),m(null);try{const re=await mk(e);i(re.product),p(re.product.main_image_index||0)}catch(re){((A=re.response)==null?void 0:A.status)===404?m("Product not found"):m("Failed to load product")}finally{c(!1)}})()},[e]),u.useEffect(()=>{if(!e)return;(async()=>{j(!0);try{const A=await Yn(e,b,E);v(A.reviews||[]),S(A.total||0)}catch(A){console.error("Failed to load reviews:",A)}finally{j(!1)}})()},[e,b]),u.useEffect(()=>{if(!e||!r||(n==null?void 0:n.role)!=="user"){k(null),q(!1);return}(async()=>{F(!0);try{const A=await R5(e);q(A.can_review),k(A.review||null),A.review?(_(A.review.rating),L(A.review.comment)):(_(5),L(""))}catch(A){console.error("Failed to load review status:",A),k(null),q(!1)}finally{F(!1)}})()},[e,r,n==null?void 0:n.role]),u.useEffect(()=>{if(!e||!r)return;(async()=>{try{const A=await hk(e);Q(A.in_wishlist)}catch(A){console.error("Failed to check wishlist:",A)}})()},[e,r]);const V=async()=>{if(!r){a("Please login to add items to wishlist"),t("/login");return}if(n&&n.role&&n.role!=="user"){a(" Role Access Denied  admin or seller cannot wishlist or order");return}if(!(!e||$)){O(!0);try{const T=await ec(e);Q(T.in_wishlist),a(T.message)}catch{a("Failed to update wishlist")}finally{O(!1)}}},K=async()=>{var T,A;if(!r){a("Please login to add items to cart"),t("/login");return}if(n&&n.role&&n.role!=="user"){a(" Role Access Denied  admin or seller cannot order");return}if(l&&!G){H(!0);try{const re=await Pb(l.id,1);a(re.message||"Added to cart")}catch(re){const oe=((A=(T=re==null?void 0:re.response)==null?void 0:T.data)==null?void 0:A.detail)||"Failed to add to cart";a(oe)}finally{H(!1)}}},de=()=>{var T;(T=l==null?void 0:l.images)!=null&&T.length&&p(A=>A===0?l.images.length-1:A-1)},ge=()=>{var T;(T=l==null?void 0:l.images)!=null&&T.length&&p(A=>A===l.images.length-1?0:A+1)},fe=g.length>0?Math.round(g.reduce((T,A)=>T+A.rating,0)/g.length*10)/10:0,le=Math.ceil(x/E),Ie=()=>{const{valid:T,errors:A}=HC(N,I);return M(A),T},ue=async()=>{var T,A;if(e){if(!r){a("Please login to leave a review"),t("/login");return}if((n==null?void 0:n.role)!=="user"){a("Only customers can review products");return}if(!D){a("You can only review products you ordered");return}if(!(J||!Ie())){U(!0);try{const re=Ps(I.trim());if(w){const Se=await M5(e,{rating:N,comment:re});k(Se.review),a("Review updated")}else{const Se=await O5(e,{rating:N,comment:re});k(Se.review),a("Review submitted")}h(1);const oe=await Yn(e,1,E);v(oe.reviews||[]),S(oe.total||0)}catch(re){const oe=((A=(T=re==null?void 0:re.response)==null?void 0:T.data)==null?void 0:A.detail)||"Failed to submit review";a(oe)}finally{U(!1)}}}},Y=async()=>{var T,A;if(!(!e||!w)&&confirm("Are you sure you want to delete your review? This action cannot be undone.")){U(!0);try{await F5(e),k(null),_(5),L(""),a("Review deleted successfully");const re=await Yn(e,1,E);v(re.reviews||[]),S(re.total||0),h(1)}catch(re){const oe=((A=(T=re==null?void 0:re.response)==null?void 0:T.data)==null?void 0:A.detail)||"Failed to delete review";a(oe)}finally{U(!1)}}};if(o)return s.jsx("div",{className:"space-y-6 w-full min-h-screen",children:s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"text-xl text-slate-500",children:"Loading product..."})})});if(d||!l)return s.jsx("div",{className:"space-y-6 w-full min-h-screen",children:s.jsxs("div",{className:"text-center py-20",children:[s.jsx(ye,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),s.jsx("div",{className:"text-2xl text-slate-700 font-semibold mb-2",children:d||"Product not found"}),s.jsx(ae,{to:"/catalog",className:"text-blue-600 hover:underline",children:" Back to catalog"})]})});const se=l.images&&l.images.length>0,be=se?(Re=l.images[f])==null?void 0:Re.url:null;return s.jsxs("div",{className:"space-y-8 w-full min-h-screen bg-white",children:[s.jsx(we,{title:l.name,subtitle:`Sold by ${l.seller_name}`,backgroundImage:be||"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[s.jsxs("button",{onClick:()=>t("/catalog"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium text-sm mb-6 transition-colors",children:[s.jsx(sr,{className:"w-4 h-4"}),"Back to Catalog"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[s.jsxs("div",{className:"relative aspect-square bg-slate-50 rounded-none overflow-hidden border border-slate-200",children:[be?s.jsx("img",{src:be,alt:l.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(ye,{className:"w-20 h-20 text-slate-300"})}),se&&l.images.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:de,className:"absolute left-3 top-1/2 -translate-y-1/2 p-2 bg-slate-900/90 hover:bg-slate-950 text-white transition-colors",children:s.jsx(tt,{className:"w-5 h-5"})}),s.jsx("button",{onClick:ge,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-slate-900/90 hover:bg-slate-950 text-white transition-colors",children:s.jsx(st,{className:"w-5 h-5"})})]})]}),se&&l.images.length>1&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:l.images.map((T,A)=>s.jsx("button",{onClick:()=>p(A),className:`flex-shrink-0 w-16 h-16 overflow-hidden border transition-all ${A===f?"border-slate-900 ring-1 ring-slate-900":"border-slate-200 hover:border-slate-400"}`,children:s.jsx("img",{src:T.url,alt:"",className:"w-full h-full object-cover"})},A))})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.category_name&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qb,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs font-medium uppercase tracking-wide",children:l.category_name})]}),s.jsx("div",{children:s.jsx("h1",{className:"text-4xl font-bold text-slate-900 leading-tight",children:l.name})}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm border-t border-b border-slate-200 py-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(Ds,{className:"w-4 h-4"}),s.jsx("span",{children:"Sold by"}),s.jsx(ae,{to:`/store/${l.seller_id}`,className:"font-semibold text-slate-900 hover:underline",children:l.seller_name})]}),l.created_at&&s.jsxs("div",{className:"text-slate-500",children:["Listed ",new Date(l.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((T,A)=>s.jsx(Ls,{className:`w-4 h-4 ${A<Math.floor(fe)?"fill-amber-400 text-amber-400":"text-slate-300"}`},A))}),s.jsx("span",{className:"text-sm text-slate-600",children:y?"Loading...":x>0?`${fe} (${x})`:"No reviews"})]}),s.jsxs("div",{className:"text-5xl font-bold text-slate-900",children:["",l.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx(ye,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:`font-semibold ${l.stock_qty>0?"text-green-600":"text-red-600"}`,children:l.stock_qty>0?`${l.stock_qty} in stock`:"Out of stock"}),l.sold_count!==void 0&&l.sold_count>0&&s.jsxs("span",{className:"text-slate-500 ml-2",children:["(",l.sold_count," sold)"]})]})]}),l.description&&s.jsxs("div",{className:"border-t border-b border-slate-200 py-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3 text-sm uppercase tracking-wide",children:"Description"}),s.jsx("p",{className:"text-slate-700 leading-relaxed text-sm",children:l.description})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsxs("button",{onClick:K,disabled:!!(l.stock_qty<=0||l.is_disabled||r&&n&&n.role!=="user"),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 font-bold text-sm transition-all ${l.stock_qty<=0||l.is_disabled||r&&n&&n.role!=="user"?"bg-slate-200 text-slate-500 cursor-not-allowed":"bg-slate-900 text-white hover:bg-slate-950"}`,children:[s.jsx(lt,{className:"w-4 h-4"}),l.stock_qty<=0?"Out of Stock":"Add to Cart"]}),s.jsx("button",{onClick:V,disabled:$,className:`p-3 border transition-colors ${B?"bg-red-50 border-red-400 text-red-600 hover:bg-red-100":"border-slate-300 text-slate-600 hover:border-red-400 hover:text-red-600"}`,title:B?"Remove from wishlist":"Add to wishlist",children:s.jsx(Je,{className:`w-4 h-4 ${B?"fill-red-600":""}`})}),s.jsx("button",{className:"p-3 border border-slate-300 text-slate-600 hover:border-slate-400 hover:text-slate-900 transition-colors",children:s.jsx(wu,{className:"w-4 h-4"})})]}),!r&&s.jsxs("div",{className:"mt-2 text-xs text-slate-600 bg-slate-50 border border-slate-200 px-3 py-2",children:[s.jsx(ae,{to:"/login",className:"text-slate-900 font-semibold hover:underline",children:"Login"})," to purchase, save to wishlist, and review this product."]})]})]})]}),s.jsxs("section",{className:"max-w-7xl mx-auto px-6 border-t border-slate-200 pt-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Customer Reviews"}),s.jsxs("span",{className:"text-sm text-slate-600 font-medium",children:["(",x,")"]})]}),!r&&s.jsxs("div",{className:"mb-8 border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700",children:[s.jsx(ae,{to:"/login",className:"text-slate-900 font-semibold hover:underline",children:"Login"})," to write a review."]}),r&&(n==null?void 0:n.role)==="user"&&s.jsxs("div",{className:"mb-8 border border-slate-200 p-6 bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-bold text-slate-900",children:w?"Update your review":"Share your feedback"}),w&&s.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:["Last updated ",new Date(w.updated_at||w.created_at).toLocaleDateString("en-US")]})]}),C?s.jsx("div",{className:"text-sm text-slate-500",children:"Checking review eligibility..."}):D?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-900 mb-2",children:"Your rating"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(T=>s.jsx("button",{type:"button",onClick:()=>_(T),className:"p-1 transition-transform hover:scale-110","aria-label":`Rate ${T} stars`,children:s.jsx(Ls,{className:`w-5 h-5 ${T<=N?"fill-amber-400 text-amber-400":"text-slate-300"}`})},T))}),s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[N," / 5"]})]}),z.rating&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:z.rating})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-slate-900 mb-2",children:"Your review"}),s.jsx("textarea",{value:I,onChange:T=>L(T.target.value),rows:3,placeholder:"Share your experience with this product.",className:"w-full border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-slate-900"}),z.comment&&s.jsx("div",{className:"text-xs text-red-600 mt-1",children:z.comment})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",onClick:ue,disabled:J,className:"px-4 py-2 bg-slate-900 text-white text-sm font-bold hover:bg-slate-950 disabled:opacity-60 transition-colors",children:J?"Saving...":w?"Update review":"Submit review"}),w&&s.jsx("button",{type:"button",onClick:Y,disabled:J,className:"px-4 py-2 bg-red-600 text-white text-sm font-bold hover:bg-red-700 disabled:opacity-60 transition-colors",children:"Delete"}),s.jsx("span",{className:"text-xs text-slate-500 ml-auto",children:w?"You can update any time.":"You can edit your review later."})]})]}):s.jsxs("div",{className:"text-sm text-slate-700 bg-amber-50 border border-amber-200 p-3",children:[s.jsx("p",{className:"font-medium mb-1",children:" Reviews for orders only"}),s.jsx("p",{children:"You can review products after receiving your order."})]})]}),y?s.jsx("div",{className:"text-center py-12 text-slate-500",children:"Loading reviews..."}):g.length===0?s.jsx("div",{className:"text-center py-12 text-slate-500",children:s.jsx("p",{children:"No reviews yet."})}):s.jsxs("div",{className:"space-y-4",children:[g.map(T=>s.jsxs("div",{className:"border border-slate-200 p-4 bg-white",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-700 font-bold text-xs",children:T.user_name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"font-bold text-slate-900 text-sm",children:T.user_name}),r&&(n==null?void 0:n.id)&&T.user_id===n.id&&s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide bg-slate-900 text-white px-2 py-0.5",children:"Your Review"})]}),s.jsx("div",{className:"text-xs text-slate-500",children:new Date(T.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})]}),s.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((A,re)=>s.jsx(Ls,{className:`w-3.5 h-3.5 ${re<T.rating?"fill-amber-400 text-amber-400":"text-slate-300"}`},re))})]}),s.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:T.comment})]},T.id)),le>1&&s.jsxs("div",{className:"flex items-center justify-center gap-2 pt-6",children:[s.jsx("button",{onClick:()=>h(Math.max(1,b-1)),disabled:b===1,className:"px-3 py-1 border border-slate-300 text-slate-600 text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:"Previous"}),s.jsxs("span",{className:"px-3 py-1 text-slate-600 text-sm",children:[b," of ",le]}),s.jsx("button",{onClick:()=>h(Math.min(le,b+1)),disabled:b===le,className:"px-3 py-1 border border-slate-300 text-slate-600 text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:"Next"})]})]})]})]})}function E3(){const e=mt(),{isLoggedIn:t}=rt(),{showToast:r}=ht(),[n,a]=u.useState([]),[l,i]=u.useState(!0),[o,c]=u.useState({}),[d,m]=u.useState(null);u.useEffect(()=>{t&&f()},[t,e]);const f=async()=>{i(!0);try{const y=await Ob();a(y.products||[]),p(y.products||[])}catch(y){console.error("Failed to load wishlist:",y),r("Failed to load wishlist")}finally{i(!1)}},p=async y=>{const j={};await Promise.all(y.map(async b=>{try{const h=await Yn(b.id,1,10),x=h.reviews||[];if(x.length>0){const S=x.reduce((E,w)=>E+w.rating,0)/x.length;j[b.id]={avg:Math.round(S*10)/10,count:h.total}}else j[b.id]={avg:0,count:0}}catch{j[b.id]={avg:0,count:0}}})),c(j)},g=async y=>{try{await ec(y),a(j=>j.filter(b=>b.id!==y)),r("Removed from wishlist")}catch{r("Failed to remove from wishlist")}},v=async y=>{var j,b;if(!t){e("/login");return}try{m(y.id);const h=await Pb(y.id,1);r(h.message||"Added to cart")}catch(h){r(((b=(j=h==null?void 0:h.response)==null?void 0:j.data)==null?void 0:b.detail)||"Failed to add to cart")}finally{m(null)}};return t?s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"My Wishlist",subtitle:"Your saved products, all in one place",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(ae,{to:"/catalog",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[s.jsx(sr,{className:"w-4 h-4"}),"Continue Shopping"]})}),l?s.jsx("div",{className:"flex items-center justify-center py-20",children:s.jsx("div",{className:"text-xl text-slate-500",children:"Loading wishlist..."})}):n.length===0?s.jsxs("div",{className:"text-center py-20 bg-white border border-blue-200 rounded-lg shadow-md",children:[s.jsx(Je,{className:"w-20 h-20 mx-auto text-slate-300 mb-4"}),s.jsx("div",{className:"text-2xl text-slate-700 font-semibold mb-2",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Start adding products you love!"}),s.jsxs(ae,{to:"/catalog",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:[s.jsx(lt,{className:"w-5 h-5"}),"Browse Products"]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:[n.length," ",n.length===1?"item":"items"," in wishlist"]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map(y=>{var x;const j=o[y.id]||{avg:0,count:0},h=y.images&&y.images.length>0?(x=y.images[y.main_image_index||0])==null?void 0:x.url:null;return s.jsxs("div",{className:"bg-white border border-blue-200 overflow-hidden group relative cursor-pointer shadow-md hover:shadow-lg hover:border-blue-400 transition-all duration-200 rounded-lg",children:[s.jsx("button",{onClick:S=>{S.stopPropagation(),g(y.id)},className:"absolute top-2 right-2 z-10 p-2 bg-white/90 border border-red-300 text-red-500 rounded-full hover:bg-red-50 transition-colors",title:"Remove from wishlist",children:s.jsx(Wt,{className:"w-4 h-4"})}),s.jsx(ae,{to:`/catalog/${y.id}`,children:s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-blue-50",children:[h?s.jsx("img",{src:h,alt:y.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(ye,{className:"w-12 h-12 text-blue-300"})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:s.jsxs("div",{className:"flex items-center gap-4 text-white text-xs",children:[s.jsx("span",{className:"flex items-center gap-1",children:s.jsx(Je,{className:"w-3.5 h-3.5 fill-red-500 text-red-500"})}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(lt,{className:"w-3.5 h-3.5"})," ",y.sold_count||0]})]})}),y.category_name&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-1.5 py-0.5 bg-blue-600 text-white text-[10px] font-medium uppercase rounded",children:y.category_name})})]})}),s.jsx(ae,{to:`/catalog/${y.id}`,children:s.jsxs("div",{className:"p-3 bg-gradient-to-b from-white to-blue-50",children:[s.jsx("h3",{className:"font-bold text-slate-900 text-base line-clamp-2 mb-1",children:y.name}),s.jsx("p",{className:"text-sm text-slate-500 mb-2",children:y.seller_name}),s.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((S,E)=>s.jsx(Ls,{className:`w-3 h-3 ${E<Math.floor(j.avg)?"fill-amber-400 text-amber-400":"text-slate-300"}`},E))}),s.jsx("span",{className:"text-xs text-slate-500",children:j.count>0?`${j.avg} (${j.count})`:"No reviews"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-bold text-blue-600 text-lg",children:["",y.price.toLocaleString()]}),s.jsxs("span",{className:"text-xs text-slate-400",children:[y.stock_qty," in stock"]})]})]})}),s.jsx("div",{className:"p-3 pt-0",children:s.jsxs("button",{onClick:()=>v(y),disabled:y.stock_qty<=0||y.is_disabled||d===y.id,className:`w-full flex items-center justify-center gap-2 py-2 rounded-lg font-medium text-sm transition-all ${y.stock_qty<=0||y.is_disabled?"bg-slate-200 text-slate-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[s.jsx(lt,{className:"w-4 h-4"}),d===y.id?"Adding...":y.stock_qty<=0?"Out of Stock":"Add to Cart"]})})]},y.id)})})]})]}):s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"My Wishlist",subtitle:"Your saved products, all in one place",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-300 rounded-lg p-8 text-center shadow-lg",children:[s.jsx(Je,{className:"w-16 h-16 mx-auto text-blue-600 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Login to view your wishlist"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Sign in to save your favorite products and keep track of items you love."}),s.jsx(ae,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Login to Continue"})]})})]})}function P3(){const[e,t]=u.useState([]),[r,n]=u.useState(!0),[a,l]=u.useState("");u.useEffect(()=>{(async()=>{n(!0);try{const c=await Lb();t(c.sellers||[])}catch(c){console.error("Failed to load sellers:",c)}finally{n(!1)}})()},[]);const i=e.filter(o=>o.name.toLowerCase().includes(a.toLowerCase()));return s.jsxs("div",{className:"space-y-6 w-full min-h-screen",children:[s.jsx(we,{title:"Browse Stores",subtitle:"Discover trusted sellers offering premium quality dried fish products.",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500"}),s.jsx("input",{type:"text",placeholder:"Search stores...",value:a,onChange:o=>l(o.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-blue-300 bg-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 rounded-lg"})]}),r?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),"Loading stores..."]}):i.length===0?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx(Ds,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),s.jsx("p",{children:"No stores found."})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:i.map(o=>s.jsxs(ae,{to:`/store/${o.id}`,className:"bg-white border border-blue-200 p-5 hover:border-blue-400 hover:shadow-lg transition-all duration-200 rounded-lg group",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center border-2 border-blue-200 group-hover:border-blue-400 transition-colors",children:s.jsx(Ds,{className:"w-7 h-7 text-blue-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-bold text-slate-900 text-lg truncate group-hover:text-blue-600 transition-colors",children:o.name}),s.jsx("p",{className:"text-sm text-slate-500",children:"View Store"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-1 text-blue-600 mb-1",children:s.jsx(ye,{className:"w-4 h-4"})}),s.jsx("p",{className:"text-lg font-bold text-slate-900",children:o.product_count||0}),s.jsx("p",{className:"text-xs text-slate-500",children:"Products"})]}),s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"flex items-center justify-center gap-1 text-blue-600 mb-1",children:s.jsx(lt,{className:"w-4 h-4"})}),s.jsx("p",{className:"text-lg font-bold text-slate-900",children:(o.total_sold||0).toLocaleString()}),s.jsx("p",{className:"text-xs text-slate-500",children:"Sold"})]})]})]},o.id))})]})}function I3(){const{sellerId:e}=Nl(),t=mt(),{isLoggedIn:r,user:n}=rt(),{showToast:a}=ht(),l=(n==null?void 0:n.role)??"user",[i,o]=u.useState(null),[c,d]=u.useState([]),[m,f]=u.useState(!0),[p,g]=u.useState(!0),[v,y]=u.useState(1),[j,b]=u.useState(0),[h,x]=u.useState([]),[S,E]=u.useState(""),[w,k]=u.useState([]),[D,q]=u.useState(!0),[N,_]=u.useState(""),[I,L]=u.useState("latest"),z=12;u.useEffect(()=>{if(!e)return;(async()=>{f(!0);try{const F=await q5(e);o(F.seller)}catch(F){console.error("Failed to load seller:",F),a("Failed to load store profile")}finally{f(!1)}})()},[e]),u.useEffect(()=>{(async()=>{q(!0);try{const F=await Eb();k(F.categories||[])}catch(F){console.error("Failed to load categories:",F)}finally{q(!1)}})()},[]),u.useEffect(()=>{if(!e)return;(async()=>{g(!0);try{const F=await Wa({seller_id:e,search:S||void 0,category_id:N||void 0,page:v,page_size:z,sort:I});d(F.products||[]),b(F.total||0)}catch(F){console.error("Failed to load products:",F)}finally{g(!1)}})()},[e,v,S,N,I]),u.useEffect(()=>{if(!r||l!=="user"){x([]);return}(async()=>{try{const F=await Mb();x(F.product_ids||[])}catch(F){console.error("Failed to load wishlist:",F)}})()},[r,l]);const M=async C=>{if(!r){a("Please login to add items to wishlist"),t("/login");return}if(l!=="user"){a("Only customers can add items to wishlist");return}try{const F=await ec(C);F.in_wishlist?x(B=>[...B,C]):x(B=>B.filter(Q=>Q!==C)),a(F.message)}catch{a("Failed to update wishlist")}},J=()=>{E(""),_(""),L("latest"),y(1)},U=Math.ceil(j/z);return m?s.jsx("div",{className:"w-full min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-slate-500",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),"Loading store..."]})}):i?s.jsxs("div",{className:"w-full min-h-screen",children:[s.jsx(we,{title:"Store Profile",subtitle:"Browse products and learn more about this seller.",backgroundImage:"/assets/page-hero/hero-bg.jpg"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[s.jsx("div",{className:"relative -mt-20 mb-6 bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl shadow-md p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 border-4 border-white shadow-md flex items-center justify-center overflow-hidden",children:i!=null&&i.avatar_url?s.jsx("img",{src:i.avatar_url,alt:i.name,className:"w-full h-full object-cover"}):s.jsx(Ds,{className:"w-12 h-12 text-blue-600"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:i==null?void 0:i.name}),s.jsx("p",{className:"text-slate-600 text-sm mb-3",children:(i==null?void 0:i.bio)||"Welcome to our store"}),s.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx($r,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{children:"Online Store"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(_t,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{children:["Joined ",i!=null&&i.joined_at?new Date(i.joined_at).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"Recently"]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl shadow-md px-4 py-3 text-center min-w-[110px]",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i==null?void 0:i.product_count}),s.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Products"})]}),s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl shadow-md px-4 py-3 text-center min-w-[110px]",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i==null?void 0:i.total_sold.toLocaleString()}),s.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Sold"})]}),(i==null?void 0:i.avg_rating)&&s.jsxs("div",{className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 rounded-xl shadow-md px-4 py-3 text-center min-w-[110px]",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600 flex items-center justify-center gap-1",children:[i.avg_rating,s.jsx(Ls,{className:"w-4 h-4 fill-amber-400 text-amber-400"})]}),s.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[i.total_reviews," reviews"]})]})]})]})}),s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsxs("div",{className:"flex gap-1 border-b border-slate-300 overflow-x-auto",children:[s.jsx("button",{className:"px-4 py-3 font-medium text-slate-900 border-b-2 border-blue-600 text-sm whitespace-nowrap",children:"Seller Products"}),s.jsx("button",{className:"px-4 py-3 font-medium text-slate-600 hover:text-slate-900 text-sm whitespace-nowrap",children:"Feedbacks"}),s.jsx("button",{className:"px-4 py-3 font-medium text-slate-600 hover:text-slate-900 text-sm whitespace-nowrap",children:"Policy"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-blue-200 rounded-xl shadow-md p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(or,{className:"w-4 h-4 text-blue-600"}),s.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Filters"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"lg:col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Search"}),s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search products...",value:S,onChange:C=>{E(C.target.value),y(1)},className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Category"}),s.jsxs("select",{value:N,onChange:C=>{_(C.target.value),y(1)},disabled:D,className:"w-full px-3 py-2 border border-slate-300 bg-white text-sm rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50",children:[s.jsx("option",{value:"",children:"All Categories"}),w.map(C=>s.jsx("option",{value:C.id,children:C.name},C.id))]})]}),s.jsxs("div",{className:"lg:col-span-1",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Sort By"}),s.jsxs("select",{value:I,onChange:C=>{L(C.target.value),y(1)},className:"w-full px-3 py-2 border border-slate-300 bg-white text-sm rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"latest",children:"Date: Newest"}),s.jsx("option",{value:"most_sold",children:"Most Sold"}),s.jsx("option",{value:"price_low",children:"Price: Low to High"}),s.jsx("option",{value:"price_high",children:"Price: High to Low"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:J,className:"w-full px-4 py-2 text-slate-600 border border-slate-300 bg-white hover:bg-slate-100 text-sm rounded-lg transition-colors flex items-center justify-center gap-1",children:[s.jsx(Pe,{className:"w-4 h-4"}),"Clear"]})})]})]})]}),p?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"}),"Loading products..."]}):c.length===0?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto text-slate-300 mb-3"}),s.jsx("p",{children:"This store has no products yet."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:c.map(C=>{var $;const B=C.images&&C.images.length>0?($=C.images[C.main_image_index||0])==null?void 0:$.url:null,Q=h.includes(C.id);return s.jsxs(ae,{to:`/catalog/${C.id}`,className:"bg-gradient-to-b from-white to-blue-50 border border-blue-200 overflow-hidden group hover:shadow-lg hover:border-blue-400 transition-all duration-200 rounded-xl shadow-md",children:[r&&l==="user"&&s.jsx("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),M(C.id)},className:"absolute top-2 right-2 z-10 p-1.5 bg-white/95 rounded-full border border-slate-200 hover:bg-white transition-colors",children:s.jsx(Je,{className:`w-4 h-4 ${Q?"fill-red-500 text-red-500":"text-slate-400"}`})}),s.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-slate-100",children:[B?s.jsx("img",{src:B,alt:C.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-blue-50",children:s.jsx(ye,{className:"w-12 h-12 text-blue-300"})}),C.category_name&&s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-2 py-1 bg-blue-600 text-white text-[10px] font-medium uppercase rounded",children:C.category_name})})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h3",{className:"font-semibold text-slate-900 text-sm line-clamp-2 mb-2",children:C.name}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-bold text-blue-600",children:["",C.price.toLocaleString()]}),s.jsxs("span",{className:"text-xs text-slate-500",children:[C.stock_qty," left"]})]})]})]},C.id)})}),U>1&&s.jsxs("div",{className:"flex items-center justify-center gap-2 py-6",children:[s.jsx("button",{onClick:()=>y(Math.max(1,v-1)),disabled:v===1,className:"p-2 rounded-lg border border-slate-300 text-slate-600 disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-50",children:s.jsx(tt,{className:"w-4 h-4"})}),s.jsxs("span",{className:"px-4 py-2 text-sm text-slate-600",children:["Page ",v," of ",U]}),s.jsx("button",{onClick:()=>y(Math.min(U,v+1)),disabled:v===U,className:"p-2 rounded-lg border border-slate-300 text-slate-600 disabled:opacity-30 disabled:cursor-not-allowed hover:bg-slate-50",children:s.jsx(st,{className:"w-4 h-4"})})]})]})]})]}):s.jsx("div",{className:"w-full min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ds,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Store Not Found"}),s.jsx("p",{className:"text-slate-500 mb-4",children:"This store doesn't exist or has no products."}),s.jsxs(ae,{to:"/sellers",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(sr,{className:"w-4 h-4"}),"Browse Stores"]})]})})}function T3(){const e=mt(),{isLoggedIn:t,user:r}=rt(),{showToast:n}=ht(),a="checkout_seller_id",[l,i]=u.useState([]),[o,c]=u.useState(!0),[d,m]=u.useState(null),[f,p]=u.useState(null),[g,v]=u.useState("subtotal_desc");u.useEffect(()=>{if(!t)return;(async()=>{var _,I;c(!0);try{const L=await Bm();i(L.items||[])}catch(L){const z=((I=(_=L==null?void 0:L.response)==null?void 0:_.data)==null?void 0:I.detail)||"Failed to load cart";n(z)}finally{c(!1)}})()},[t,e]);const y=async(N,_)=>{var I,L;if(!(_<1)){m(N);try{await U5(N,_),i(z=>z.map(M=>M.product.id===N?{...M,qty:_}:M)),n("Quantity updated")}catch(z){const M=((L=(I=z==null?void 0:z.response)==null?void 0:I.data)==null?void 0:L.detail)||"Failed to update quantity";n(M)}finally{m(null)}}},j=async N=>{var _,I;p(N);try{await $5(N),i(L=>L.filter(z=>z.product.id!==N)),n("Item removed from cart")}catch(L){const z=((I=(_=L==null?void 0:L.response)==null?void 0:_.data)==null?void 0:I.detail)||"Failed to remove item";n(z)}finally{p(null)}},b=N=>{n("Move to wishlist feature coming soon")},h=N=>{sessionStorage.setItem(a,N),e("/checkout/address")},x=()=>l.reduce((N,_)=>N+_.product.price*_.qty,0),S=()=>{const N=x(),_=(l.length>0,0);return N+_},E=x(),w=S(),k=l.reduce((N,_)=>N+_.qty,0),D=u.useMemo(()=>{const N={};for(const _ of l){const I=_.product.seller_id||"unknown",L=_.product.seller_name||"Unknown Seller";N[I]||(N[I]={sellerId:I,sellerName:L,items:[],subtotal:0,totalQty:0}),N[I].items.push(_),N[I].subtotal+=_.product.price*_.qty,N[I].totalQty+=_.qty}return Object.values(N)},[l]),q=u.useMemo(()=>{const N=[...D];switch(g){case"subtotal_asc":return N.sort((_,I)=>_.subtotal-I.subtotal);case"name_asc":return N.sort((_,I)=>_.sellerName.localeCompare(I.sellerName));case"name_desc":return N.sort((_,I)=>I.sellerName.localeCompare(_.sellerName));case"subtotal_desc":default:return N.sort((_,I)=>I.subtotal-_.subtotal)}},[D,g]);return t?o?s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(gs,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-spin"}),s.jsx("p",{className:"text-slate-600",children:"Loading your cart..."})]})}):s.jsxs("div",{className:"min-h-screen w-full bg-slate-50 pb-6",children:[s.jsx(we,{title:"My Cart",subtitle:"Review your items and proceed to checkout",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[s.jsxs("button",{onClick:()=>e(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mb-6",children:[s.jsx(sr,{className:"w-4 h-4"}),"Continue Shopping"]}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm mb-2",children:"1"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Cart"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-slate-300 max-w-xs mx-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-300 text-slate-600 flex items-center justify-center font-bold text-sm mb-2",children:"2"}),s.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Address"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-slate-300 max-w-xs mx-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-300 text-slate-600 flex items-center justify-center font-bold text-sm mb-2",children:"3"}),s.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Payment"})]})]})}),l.length===0?s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-12 text-center",children:[s.jsx(lt,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-700 mb-2",children:"Your cart is empty"}),s.jsx("p",{className:"text-slate-500 mb-6",children:"Add some items to get started!"}),s.jsxs(ae,{to:"/catalog",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[s.jsx(lt,{className:"w-4 h-4"}),"Start Shopping"]})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:q.map(N=>s.jsxs("div",{className:"bg-white border border-blue-200 rounded-xl p-4 space-y-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-700 font-semibold",children:"Seller"}),s.jsx("p",{className:"text-sm font-bold text-slate-900",children:N.sellerName})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-xs text-slate-500",children:["Items: ",N.totalQty]}),s.jsxs("p",{className:"text-sm font-semibold text-blue-700",children:["",N.subtotal.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),N.items.map(_=>{var z;const L=_.product.images&&_.product.images.length>0?(z=_.product.images[_.product.main_image_index||0])==null?void 0:z.url:null;return s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 flex gap-4 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ae,{to:`/catalog/${_.product.id}`,className:"w-14 h-14 bg-slate-100 rounded-lg overflow-hidden flex items-center justify-center hover:opacity-80 transition-opacity",children:L?s.jsx("img",{src:L,alt:_.product.name,className:"block w-full h-full object-cover"}):s.jsx(ye,{className:"w-8 h-8 text-slate-300"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(ae,{to:`/catalog/${_.product.id}`,className:"font-semibold text-slate-900 hover:text-blue-600 transition-colors block mb-1",children:_.product.name}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 mb-3",children:[_.product.category_name&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:_.product.category_name}),s.jsx("span",{className:"text-slate-300",children:""})]}),_.product.stock_qty>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"In Stock"}),s.jsx("span",{className:"text-slate-300",children:""})]}),s.jsx("span",{className:"text-green-600 font-medium",children:"Free Delivery"})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("span",{className:"text-2xl font-bold text-slate-900",children:["",_.product.price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center border border-slate-300 rounded-lg bg-slate-50",children:[s.jsx("button",{onClick:()=>y(_.product.id,_.qty-1),disabled:_.qty<=1||d===_.product.id,className:"px-3 py-2 text-slate-600 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:""}),s.jsx("span",{className:"px-4 py-2 font-medium text-slate-900 text-center min-w-16",children:_.qty}),s.jsx("button",{onClick:()=>y(_.product.id,_.qty+1),disabled:_.qty>=_.product.stock_qty||d===_.product.id,className:"px-3 py-2 text-slate-600 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"+"})]}),s.jsxs("button",{onClick:()=>j(_.product.id),disabled:f===_.product.id,className:"flex items-center gap-2 px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-red-50 hover:border-red-300 hover:text-red-600 disabled:opacity-50 transition-colors",children:[s.jsx(Wt,{className:"w-4 h-4"}),"Remove"]})]}),s.jsxs("button",{onClick:()=>b(_.product.id),className:"mt-3 flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 hover:underline",children:[s.jsx(Je,{className:"w-3 h-3"}),"Move to Wishlist"]})]})]},_.product.id)}),s.jsx("div",{className:"pt-3 border-t border-slate-200 flex justify-end",children:s.jsxs("button",{onClick:()=>h(N.sellerId),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:[s.jsx(lt,{className:"w-4 h-4"}),"Proceed to Checkout"]})})]},N.sellerId))}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 sticky top-24 space-y-4",children:[s.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Price Details"}),s.jsxs("div",{className:"space-y-3 border-b border-slate-200 pb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-slate-600",children:["Price (",k," item",k!==1?"s":"",")"]}),s.jsxs("span",{className:"font-medium text-slate-900",children:["",E.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),!1,s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Delivery Charges"}),s.jsx("span",{className:"font-medium text-green-600",children:"Free"})]})]}),s.jsxs("div",{className:"flex justify-between text-base font-bold py-4 border-b border-slate-200",children:[s.jsx("span",{className:"text-slate-900",children:"Total Amount"}),s.jsxs("span",{className:"text-slate-900",children:["",w.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-semibold text-slate-600",children:"Seller Sorting"}),s.jsxs("select",{value:g,onChange:N=>v(N.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[s.jsx("option",{value:"subtotal_desc",children:"Highest total first"}),s.jsx("option",{value:"subtotal_asc",children:"Lowest total first"}),s.jsx("option",{value:"name_asc",children:"Seller name A-Z"}),s.jsx("option",{value:"name_desc",children:"Seller name Z-A"})]})]}),s.jsxs("div",{className:"flex items-start gap-2 text-xs text-green-700 bg-green-50 border border-green-200 rounded p-3",children:[s.jsx(tc,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"You will save 0.00 on this order"})]}),s.jsx("div",{className:"text-xs text-slate-500",children:'Checkout is done per seller. Use the "Proceed to Checkout" button in each seller section.'})]})})]})]})]}):s.jsxs("div",{className:"min-h-screen w-full bg-slate-50 pb-6",children:[s.jsx(we,{title:"My Cart",subtitle:"Review your items and proceed to checkout",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 mt-8",children:s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-300 rounded-lg p-8 text-center shadow-lg",children:[s.jsx(lt,{className:"w-16 h-16 mx-auto text-blue-600 mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Login to view your cart"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Sign in to save items, manage your cart, and complete your purchases."}),s.jsx(ae,{to:"/login",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Login to Continue"})]})})]})}const fi=e=>{const t=(e||"").toLowerCase();return["cancelled","canceled","failed"].includes(t)?"cancelled":["arrived","delivered","completed"].includes(t)?"arrived":["shipped","on_shipping","on_delivery"].includes(t)?"shipped":["confirmed"].includes(t)?"confirmed":(["pending"].includes(t),"pending")},Af=e=>{switch(e){case"pending":return s.jsx(Br,{className:"w-4 h-4 text-blue-600"});case"confirmed":return s.jsx(Gt,{className:"w-4 h-4 text-blue-600"});case"shipped":return s.jsx(Br,{className:"w-4 h-4 text-orange-600"});case"arrived":return s.jsx(Gt,{className:"w-4 h-4 text-green-600"});case"cancelled":return s.jsx(gl,{className:"w-4 h-4 text-red-600"});default:return null}},Lf=e=>{switch(e){case"pending":return{label:"Pending",color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200"};case"confirmed":return{label:"Confirmed",color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200"};case"shipped":return{label:"Shipped",color:"text-orange-600",bg:"bg-orange-50",border:"border-orange-200"};case"arrived":return{label:"Delivered",color:"text-green-600",bg:"bg-green-50",border:"border-green-200"};case"cancelled":return{label:"Canceled",color:"text-red-600",bg:"bg-red-50",border:"border-red-200"};default:return{label:"Unknown",color:"text-slate-600",bg:"bg-slate-50",border:"border-slate-200"}}};function A3(){var k,D,q,N,_,I,L,z;const{isLoggedIn:e}=rt(),{showToast:t}=ht(),r=mt(),[n,a]=u.useState(null),[l,i]=u.useState([]),[o,c]=u.useState(!0),[d,m]=u.useState(!1),[f,p]=u.useState(!1),[g,v]=u.useState(null),y=async()=>{c(!0);try{const M=await Ib(1,50);i(M.orders||[]),M.orders&&M.orders.length>0&&!n&&a(M.orders[0])}catch{t("Failed to load orders")}finally{c(!1)}};u.useEffect(()=>{e&&y()},[e]);const j=async()=>{var J,U;if(!n)return;if((n.status||"").toLowerCase()!=="shipped"){t("Only shipped orders can be marked as delivered");return}m(!0);try{const C=await V5(n.id);i(F=>F.map(B=>B.id===n.id?C.order:B)),a(C.order),t("Order marked as delivered!")}catch(C){t(((U=(J=C==null?void 0:C.response)==null?void 0:J.data)==null?void 0:U.detail)||"Failed to update order")}finally{m(!1)}},b=async()=>{var J,U;if(!n)return;const M=(n.status||"").toLowerCase();if(!["pending","confirmed"].includes(M)){t("Only pending or confirmed orders can be cancelled");return}if(confirm("Are you sure you want to cancel this order?")){p(!0);try{const C=await W5(n.id);i(F=>F.map(B=>B.id===n.id?C.order:B)),a(C.order),t("Order cancelled successfully")}catch(C){t(((U=(J=C==null?void 0:C.response)==null?void 0:J.data)==null?void 0:U.detail)||"Failed to cancel order")}finally{p(!1)}}},h=M=>{r(`/catalog/${M}`)},x=async()=>{var M,J;if(n){v(n.id);try{const{blob:U,filename:C}=await Ab(n.id),F=URL.createObjectURL(U),B=document.createElement("a");B.href=F,B.download=C,document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(F)}catch(U){t(((J=(M=U==null?void 0:U.response)==null?void 0:M.data)==null?void 0:J.detail)||"Failed to download receipt")}finally{v(null)}}};if(!e)return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-16 h-16 mx-auto text-slate-300 mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Please log in"}),s.jsx(ae,{to:"/login",className:"text-blue-600 hover:underline",children:"Go to login"})]})});const S=n&&(n.status||"").toLowerCase()==="shipped",E=n&&["delivered","arrived","completed"].includes((n.status||"").toLowerCase()),w=n&&["pending","confirmed"].includes((n.status||"").toLowerCase());return s.jsxs("div",{className:"min-h-screen w-full bg-slate-50 pb-6",children:[s.jsx(we,{title:"My Orders",subtitle:"Track and review your recent purchases",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[s.jsxs(ae,{to:"/profile",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mb-6",children:[s.jsx(sr,{className:"w-4 h-4"}),"Back to Profile"]}),s.jsxs("div",{className:"flex gap-4 h-[calc(100vh-16rem)]",children:[s.jsxs("div",{className:"w-2/5 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Order List"}),s.jsxs("p",{className:"text-sm text-slate-600",children:[l.length," total orders"]})]}),s.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 px-3 py-2 rounded-md border border-blue-200 text-blue-700 hover:bg-blue-50 transition-colors text-sm",children:[s.jsx(sc,{className:"w-4 h-4"}),"Refresh"]})]}),s.jsxs("div",{className:"flex-1 bg-white border border-slate-200 shadow-sm overflow-hidden rounded-lg flex flex-col",children:[s.jsx("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-200 bg-gradient-to-r from-white to-slate-50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 text-blue-700",children:s.jsx(ye,{className:"w-5 h-5"})}),s.jsx("span",{className:"font-bold text-slate-900 text-base",children:"All Orders"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:o?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 animate-pulse text-slate-300"}),s.jsx("p",{children:"Loading orders..."})]})}):l.length===0?s.jsx("div",{className:"flex items-center justify-center h-64 text-slate-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ye,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),s.jsx("p",{children:"No orders yet."}),s.jsx(ae,{to:"/catalog",className:"text-blue-600 hover:underline text-sm mt-2 inline-block",children:"Start Shopping"})]})}):s.jsx("div",{className:"divide-y divide-slate-100",children:l.map(M=>{var C;const J=(n==null?void 0:n.id)===M.id,U=Lf(fi(M.status));return s.jsxs("div",{onClick:()=>a(M),className:`px-4 py-4 cursor-pointer transition-colors hover:bg-slate-50 ${J?"bg-blue-50 border-l-4 border-blue-600":""}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-semibold text-slate-900 text-sm mb-1",children:["#",M.order_number||M.id.slice(-8)]}),s.jsx("div",{className:"text-xs text-slate-500 mb-2",children:M.created_at?new Date(M.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""})]}),s.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 text-xs font-semibold border rounded ${U.bg} ${U.color} ${U.border}`,children:[Af(fi(M.status)),U.label]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"text-slate-600 text-xs",children:[s.jsx(zr,{className:"w-3.5 h-3.5 inline mr-1"}),M.total_items||((C=M.items)==null?void 0:C.length)||0," item(s)"]}),s.jsxs("div",{className:"font-semibold text-blue-700",children:["",M.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]},M.id)})})})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:n?s.jsxs("div",{className:"flex-1 bg-white border border-slate-200 shadow-sm rounded-lg overflow-hidden flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-blue-50 to-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-blue-900",children:["Order #",n.order_number||n.id.slice(-8)]}),s.jsxs("p",{className:"text-sm text-slate-600 flex items-center gap-2 mt-1",children:[s.jsx(_t,{className:"w-3.5 h-3.5"}),n.created_at?new Date(n.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""]})]}),s.jsx("button",{onClick:x,disabled:g===n.id,className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-semibold border border-blue-200 text-blue-700 rounded-md hover:bg-blue-50 transition-colors disabled:opacity-60",children:g===n.id?"Preparing...":"Download Receipt"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-5 space-y-5",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-5",children:[s.jsxs("h3",{className:"text-base font-bold text-blue-900 mb-4 flex items-center gap-2",children:[s.jsx(Br,{className:"w-5 h-5"}),"Delivery Summary"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white/70 rounded-md p-3 text-center",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Status"}),s.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[Af(fi(n.status)),s.jsx("span",{className:"font-semibold text-sm text-slate-900",children:Lf(fi(n.status)).label})]})]}),s.jsxs("div",{className:"bg-white/70 rounded-md p-3 text-center",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Items"}),s.jsx("p",{className:"font-bold text-lg text-slate-900",children:n.total_items||((k=n.items)==null?void 0:k.length)||0})]}),s.jsxs("div",{className:"bg-white/70 rounded-md p-3 text-center",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Amount"}),s.jsxs("p",{className:"font-bold text-lg text-blue-700",children:["",n.total.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),s.jsx("div",{className:"bg-white/70 rounded-md p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx($r,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"Delivery Address"}),s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:((D=n.address)==null?void 0:D.full_name)||"N/A"}),s.jsx("p",{className:"text-sm text-slate-700",children:((q=n.address)==null?void 0:q.address_line)||"No address provided"}),s.jsx("p",{className:"text-sm text-slate-700",children:[(N=n.address)==null?void 0:N.city,(_=n.address)==null?void 0:_.province,(I=n.address)==null?void 0:I.postal_code].filter(Boolean).join(", ")||""}),((L=n.address)==null?void 0:L.phone)&&s.jsxs("p",{className:"text-sm text-slate-600 mt-1 flex items-center gap-1",children:[s.jsx(fa,{className:"w-3.5 h-3.5"}),n.address.phone]})]})]})}),S&&s.jsxs("button",{onClick:j,disabled:d,className:"w-full px-4 py-3 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(Gt,{className:"w-5 h-5"}),d?"Updating...":"Mark as Delivered"]}),w&&s.jsxs("button",{onClick:b,disabled:f,className:"w-full px-4 py-3 bg-red-600 text-white rounded-md font-semibold hover:bg-red-700 disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(gl,{className:"w-5 h-5"}),f?"Cancelling...":"Cancel Order"]})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 mb-3 flex items-center gap-2",children:[s.jsx(ye,{className:"w-4 h-4"}),"Order Items (",((z=n.items)==null?void 0:z.length)||0,")"]}),s.jsx("div",{className:"space-y-3",children:(n.items||[]).map((M,J)=>s.jsxs("div",{className:"flex gap-3 p-3 bg-slate-50 rounded-md border border-slate-200",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-md flex-shrink-0 flex items-center justify-center overflow-hidden",children:M.image_url?s.jsx("img",{src:M.image_url,alt:M.name,className:"w-full h-full object-cover"}):s.jsx(ye,{className:"w-6 h-6 text-slate-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm text-slate-900 mb-1 line-clamp-2",children:M.name}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"text-slate-600",children:["Qty: ",M.qty]}),s.jsxs("span",{className:"font-semibold text-blue-700",children:["",M.price.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),E&&s.jsxs("button",{onClick:()=>h(M.product_id),className:"mt-2 px-3 py-1.5 text-xs font-semibold bg-yellow-500 text-white rounded hover:bg-yellow-600 flex items-center gap-1",children:[s.jsx(Ls,{className:"w-3.5 h-3.5"}),"Leave a Review"]})]})]},J))})]})]})]}):s.jsx("div",{className:"flex-1 bg-white border border-slate-200 shadow-sm rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-slate-400",children:[s.jsx(ye,{className:"w-16 h-16 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"Select an order to view details"}),s.jsx("p",{className:"text-sm",children:"Click on an order from the list to see delivery summary"})]})})})]})]})]})}const Df="checkout_address",rd="checkout_profile_prompted",L3="checkout_seller_id",nd="checkout_voucher";function D3(){const e=mt(),{isLoggedIn:t}=rt(),{showToast:r}=ht(),[n,a]=u.useState(!0),[l,i]=u.useState([]),[o,c]=u.useState(!1),[d,m]=u.useState(""),[f,p]=u.useState({}),[g,v]=u.useState({full_name:"",phone:"",address_line:"",city:"",province:"",postal_code:"",notes:""}),[y,j]=u.useState(""),[b,h]=u.useState(null),[x,S]=u.useState(""),[E,w]=u.useState(!1);u.useEffect(()=>{if(!t){e("/login");return}const z=(sessionStorage.getItem(L3)||"").trim();if(!z){r("Please choose a seller to checkout from your cart"),e("/cart");return}m(z),(async()=>{var F,B;a(!0);try{const $=((await Bm()).items||[]).filter(O=>O.product.seller_id===z);if($.length===0){r("No items found for the selected seller"),e("/cart");return}i($)}catch(Q){r(((B=(F=Q==null?void 0:Q.response)==null?void 0:F.data)==null?void 0:B.detail)||"Failed to load cart")}finally{a(!1)}})();const J=sessionStorage.getItem(Df),U=!!J;if(J)try{v(JSON.parse(J))}catch{}(async()=>{try{const F=await Ys.getCurrentUser(),B=F.full_name||F.name||"",Q=F.phone||"",$=F.street_address||"",O=F.city||"",G=F.province||"",H=F.postal_code||"",V=!B||!Q||!$||!O||!G;c(V),U||v(K=>({...K,full_name:B||K.full_name,phone:Q||K.phone,address_line:$||K.address_line,city:O||K.city,province:G||K.province,postal_code:H||K.postal_code})),V?sessionStorage.getItem(rd)||(sessionStorage.setItem(rd,"1"),r("Please complete your profile details before placing an order."),e("/profile")):sessionStorage.removeItem(rd)}catch{}})()},[t,e,r]);const k=(z,M)=>{v(J=>({...J,[z]:M}))},D=z=>{z.preventDefault(),p({});const M={},J=Qc(g.full_name,"Full name");J.valid||(M.full_name=J.error);const U=rv(g.phone);U.valid||(M.phone=U.error);const C=ku(g.address_line,5,200,"Street address");C.valid||(M.address_line=C.error);const F=Qc(g.city,"City");F.valid||(M.city=F.error);const B=Qc(g.province,"Province");B.valid||(M.province=B.error);const Q=WC(g.postal_code);if(Q.valid||(M.postal_code=Q.error),g.notes.trim()&&g.notes.trim().length>500&&(M.notes="Notes must not exceed 500 characters"),Object.keys(M).length>0){p(M),r("Please fix the errors in the form");return}if(o){r("Please update your profile details before continuing."),e("/profile");return}if(l.length===0){r("Your cart is empty");return}sessionStorage.setItem(Df,JSON.stringify(g)),e("/checkout/payment")},q=l.reduce((z,M)=>z+M.product.price*M.qty,0);u.useEffect(()=>{const z=sessionStorage.getItem(nd);if(z)try{h(JSON.parse(z))}catch{}},[]);const N=async()=>{var z,M;if(!y.trim()){S("Please enter a code");return}w(!0),S("");try{const J=await Nk(y.toUpperCase(),q);h(J),sessionStorage.setItem(nd,JSON.stringify(J)),r(`Voucher applied! Saving ${J.discount_value.toLocaleString()}`),j("")}catch(J){S(((M=(z=J.response)==null?void 0:z.data)==null?void 0:M.detail)||"Invalid voucher code")}finally{w(!1)}},_=()=>{h(null),sessionStorage.removeItem(nd),j(""),S("")},I=(b==null?void 0:b.discount_value)||0,L=Math.max(0,q-I);return n?s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(gs,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-spin"}),s.jsx("p",{className:"text-slate-600",children:"Loading checkout..."})]})}):s.jsxs("div",{className:"min-h-screen w-full bg-slate-50 pb-6",children:[s.jsx(we,{title:"Shipping Address",subtitle:"Set your delivery details before payment",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm mb-2",children:"1"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Cart"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-blue-200 max-w-xs mx-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm mb-2",children:"2"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Address"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-slate-300 max-w-xs mx-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-300 text-slate-600 flex items-center justify-center font-bold text-sm mb-2",children:"3"}),s.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Payment"})]})]})}),s.jsxs(ae,{to:"/cart",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mb-6",children:[s.jsx(sr,{className:"w-4 h-4"}),"Back to Cart"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white border border-slate-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx($r,{className:"w-5 h-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Delivery Address"})]}),o&&s.jsx("div",{className:"mb-4 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800",children:"Please complete your profile details first. After updating your profile, return here and the form will be auto-filled (you can still edit it for a different delivery location)."}),s.jsxs("form",{onSubmit:D,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Full Name"}),s.jsx("input",{value:g.full_name,onChange:z=>k("full_name",z.target.value),required:!0,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.full_name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.full_name&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.full_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Phone"}),s.jsx("input",{value:g.phone,onChange:z=>k("phone",z.target.value),required:!0,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.phone?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.phone&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.phone})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Street Address"}),s.jsx("input",{value:g.address_line,onChange:z=>k("address_line",z.target.value),required:!0,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.address_line?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.address_line&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.address_line})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"City"}),s.jsx("input",{value:g.city,onChange:z=>k("city",z.target.value),required:!0,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.city?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.city&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.city})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Province"}),s.jsx("input",{value:g.province,onChange:z=>k("province",z.target.value),required:!0,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.province?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.province&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.province})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Postal Code"}),s.jsx("input",{value:g.postal_code,onChange:z=>k("postal_code",z.target.value),required:!0,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.postal_code?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.postal_code&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.postal_code})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-600",children:"Notes (Optional)"}),s.jsx("textarea",{value:g.notes,onChange:z=>k("notes",z.target.value),rows:3,className:`w-full mt-1 px-3 py-2 border rounded-lg text-sm focus:ring-1 ${f.notes?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),f.notes&&s.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.notes})]}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",children:"Continue to Payment"})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 h-fit",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Order Summary"}),s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"Items"}),s.jsx("span",{className:"text-slate-900",children:l.length})]}),s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"Subtotal"}),s.jsxs("span",{className:"text-slate-900",children:["",q.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"Delivery"}),s.jsx("span",{className:"text-green-600",children:"Free"})]}),s.jsxs("div",{className:"my-4 pt-4 border-t border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Vm,{className:"w-4 h-4 text-blue-600"}),s.jsx("label",{className:"text-xs font-semibold text-slate-700 uppercase",children:"Discount Code"})]}),b?s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-emerald-900",children:b.voucher_id}),s.jsxs("p",{className:"text-xs text-emerald-700 mt-1",children:["Saving ",b.discount_value.toLocaleString()]})]}),s.jsx("button",{onClick:_,className:"text-emerald-600 hover:text-emerald-700 text-xs font-semibold hover:underline",children:"Remove"})]}):s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Enter code",value:y,onChange:z=>{j(z.target.value.toUpperCase()),S("")},className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:outline-none focus:ring-1 ${x?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-300 focus:ring-blue-500 focus:border-blue-500"}`}),s.jsx("button",{onClick:N,disabled:E||!y.trim(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?s.jsx(gs,{className:"w-4 h-4 animate-spin"}):"Apply"})]}),x&&s.jsxs("div",{className:"mt-2 flex items-start gap-2 text-xs text-red-600 bg-red-50 border border-red-200 rounded p-2",children:[s.jsx(Pt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:x})]})]}),b&&s.jsxs("div",{className:"flex justify-between text-sm mb-2 pt-2 border-t border-slate-200",children:[s.jsx("span",{className:"text-slate-600",children:"Discount"}),s.jsxs("span",{className:"text-green-600 font-semibold",children:["-",b.discount_value.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between font-semibold text-slate-900 border-t border-slate-200 pt-4",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["",L.toLocaleString()]})]}),s.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"Your order will be processed after payment confirmation."})]})]})]})]})}const gn={publicKey:"pk_test_JsM6hAfEyDF58ULeova92Jfp",secretKey:"sk_test_LjXwVfQP9a7QMdnuuuL8gfAb",apiUrl:"https://api.paymongo.com/v1",isTestMode:!0},R3={success:{number:"4343434343434345",expiry:"12/28",cvv:"123",description:"Always succeeds"},declined:{number:"4571736000000008",expiry:"12/28",cvv:"123",description:"Always declined"},threeDSecure:{number:"4120000000000007",expiry:"12/28",cvv:"123",description:"Requires 3D Secure"}};async function O3(e){var i,o;const{number:t,expMonth:r,expYear:n,cvc:a}=e,l={data:{attributes:{type:"card",details:{card_number:t.replace(/\s/g,""),exp_month:parseInt(r),exp_year:parseInt(n),cvc:a}}}};try{const c=await fetch(`${gn.apiUrl}/payment_methods`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${btoa(gn.publicKey)}`},body:JSON.stringify(l)});if(!c.ok){const m=await c.json();throw new Error(((o=(i=m.errors)==null?void 0:i[0])==null?void 0:o.detail)||"Failed to create payment method")}return(await c.json()).data}catch(c){throw new Error(c.message||"Payment processing failed")}}async function M3(e,t){var a,l;const n={data:{attributes:{amount:Math.round(e*100),payment_method_allowed:["card"],payment_method_options:{card:{request_three_d_secure:"any"}},currency:"PHP",description:t}}};try{const i=await fetch(`${gn.apiUrl}/payment_intents`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${btoa(gn.secretKey)}`},body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(((l=(a=c.errors)==null?void 0:a[0])==null?void 0:l.detail)||"Failed to create payment intent")}return(await i.json()).data}catch(i){throw new Error(i.message||"Payment intent creation failed")}}async function F3(e,t){var n,a;const r={data:{attributes:{payment_method:t,return_url:`${window.location.origin}/order-confirmed`}}};try{const l=await fetch(`${gn.apiUrl}/payment_intents/${e}/attach`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${btoa(gn.secretKey)}`},body:JSON.stringify(r)});if(!l.ok){const o=await l.json();throw new Error(((a=(n=o.errors)==null?void 0:n[0])==null?void 0:a.detail)||"Failed to attach payment method")}return(await l.json()).data}catch(l){throw new Error(l.message||"Payment attachment failed")}}async function U3(e,t,r){try{const n=await O3(e),a=await M3(t,r),l=await F3(a.id,n.id);return{success:l.attributes.status==="succeeded"||l.attributes.status==="processing",paymentIntentId:l.id,status:l.attributes.status}}catch(n){throw n}}function $3(e){const t=e.replace(/\s/g,"");if(!/^\d{13,19}$/.test(t))return!1;let r=0,n=!1;for(let a=t.length-1;a>=0;a--){let l=parseInt(t[a]);n&&(l*=2,l>9&&(l-=9)),r+=l,n=!n}return r%10===0}function Rf(e){return(e.replace(/\s/g,"").match(/.{1,4}/g)||[]).join(" ").substring(0,19)}function z3(e){const t=e.replace(/\s/g,"");return/^4/.test(t)?"visa":/^5[1-5]/.test(t)?"mastercard":/^3[47]/.test(t)?"amex":/^6(?:011|5)/.test(t)?"discover":/^35/.test(t)?"jcb":"unknown"}const Of="checkout_address",Mf="checkout_seller_id",Ff="checkout_email_status";function B3(){const e=mt(),{isLoggedIn:t}=rt(),{showToast:r}=ht(),[n,a]=u.useState(!0),[l,i]=u.useState(!1),[o,c]=u.useState([]),[d,m]=u.useState(null),[f,p]=u.useState("cod"),[g,v]=u.useState(""),[y,j]=u.useState(""),[b,h]=u.useState(""),[x,S]=u.useState(""),[E,w]=u.useState(""),[k,D]=u.useState({}),[q,N]=u.useState(!1),[_,I]=u.useState("gcash"),[L,z]=u.useState(""),[M,J]=u.useState({});u.useEffect(()=>{if(!t){e("/login");return}const V=sessionStorage.getItem(Of);if(!V){e("/checkout/address");return}const K=(sessionStorage.getItem(Mf)||"").trim();if(!K){r("Please choose a seller to checkout from your cart"),e("/cart");return}v(K);try{m(JSON.parse(V))}catch{e("/checkout/address");return}(async()=>{var ge,fe;a(!0);try{const Ie=((await Bm()).items||[]).filter(ue=>ue.product.seller_id===K);if(Ie.length===0){r("No items found for the selected seller"),e("/cart");return}c(Ie)}catch(le){r(((fe=(ge=le==null?void 0:le.response)==null?void 0:ge.data)==null?void 0:fe.detail)||"Failed to load cart")}finally{a(!1)}})()},[t,e]);const U=V=>{const K=Rf(V.target.value);j(K),k.cardNumber&&D({...k,cardNumber:""})},C=V=>{let K=V.target.value.replace(/\D/g,"");K.length>=2&&(K=K.slice(0,2)+"/"+K.slice(2,4)),h(K.slice(0,5)),k.expiry&&D({...k,expiry:""})},F=V=>{const K=V.target.value.replace(/\D/g,"").slice(0,4);S(K),k.cvc&&D({...k,cvc:""})},B=V=>{const K=R3[V];j(Rf(K.number)),h(K.expiry),S(K.cvv),w("Test User"),N(!1),r(`Test card loaded: ${K.description}`)},Q=()=>{const V={};(!y||!$3(y))&&(V.cardNumber="Invalid card number");const[K,de]=b.split("/");return(!K||!de||parseInt(K)<1||parseInt(K)>12)&&(V.expiry="Invalid expiry date"),(!x||x.length<3)&&(V.cvc="Invalid CVC"),E.trim()||(V.cardName="Card holder name is required"),D(V),Object.keys(V).length===0},$=()=>{const V={},K=/^(09|\+639)\d{9}$/,de=L.replace(/\s/g,"");return(!de||!K.test(de))&&(V.phone="Invalid Philippine phone number (09XXXXXXXXX)"),J(V),Object.keys(V).length===0},O=V=>{let K=V.target.value.replace(/\D/g,"");K.length>0&&(K.startsWith("0")||(K="0"+K),K=K.slice(0,11),K.length>2&&(K=K.slice(0,4)+" "+K.slice(4,7)+" "+K.slice(7))),z(K),M.phone&&J({...M,phone:""})},G=async()=>{var V,K,de,ge,fe;if(d){if(o.length===0){r("Your cart is empty");return}if(f==="card"&&!Q()){r("Please fill in all card details correctly");return}if(f==="paymongo"&&!$()){r("Please enter a valid Philippine phone number");return}i(!0);try{if(f==="paymongo"){r("Creating order and initializing payment...");const ue=await fetch("http://localhost:8000/orders/checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({address:d,payment_method:"paymongo",seller_id:g||null})});if(!ue.ok){const se=await ue.json();throw new Error(se.detail||"Failed to create order")}const Y=await ue.json();if(Y.checkout_url){r("Redirecting to payment processor..."),setTimeout(()=>{window.location.href=Y.checkout_url},1e3);return}else throw new Error("No checkout URL received from payment processor")}if(f==="card"){r("Processing card payment...");const[ue,Y]=b.split("/"),se="20"+Y;if(!(await U3({number:y.replace(/\s/g,""),expMonth:ue,expYear:se,cvc:x},H,`DaingGrader Order - ${o.length} item(s)`)).success)throw new Error("Payment was declined. Please try another card.");r("Payment successful! Creating order...")}const le=await z5({address:d,payment_method:f,seller_id:g});sessionStorage.removeItem(Of),sessionStorage.removeItem(Mf),le.email_status?sessionStorage.setItem(Ff,JSON.stringify(le.email_status)):sessionStorage.removeItem(Ff);const Ie=(V=le.order_ids)!=null&&V.length?le.order_ids:((K=le.orders)==null?void 0:K.map(ue=>ue.id))||((de=le.order)!=null&&de.id?[le.order.id]:[]);if(Ie.length>0){const ue=new URLSearchParams({ids:Ie.join(",")});e(`/order-confirmed?${ue.toString()}`)}else e("/order-confirmed")}catch(le){r(((fe=(ge=le==null?void 0:le.response)==null?void 0:ge.data)==null?void 0:fe.detail)||le.message||"Failed to place order")}finally{i(!1)}}},H=o.reduce((V,K)=>V+K.product.price*K.qty,0);return n?s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(gs,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-spin"}),s.jsx("p",{className:"text-slate-600",children:"Loading payment..."})]})}):s.jsxs("div",{className:"min-h-screen w-full bg-slate-50 pb-6",children:[s.jsx(we,{title:"Payment",subtitle:"Confirm your payment method and place the order",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm mb-2",children:"1"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Cart"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-blue-200 max-w-xs mx-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm mb-2",children:"2"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Address"})]}),s.jsx("div",{className:"flex-1 h-0.5 bg-blue-200 max-w-xs mx-2"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm mb-2",children:"3"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Payment"})]})]})}),s.jsxs(ae,{to:"/checkout/address",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium mb-6",children:[s.jsx(sr,{className:"w-4 h-4"}),"Back to Address"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(vu,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-amber-900 font-semibold text-sm",children:"Test Mode Active"}),s.jsx("p",{className:"text-amber-700 text-sm mt-1",children:"Using PayMongo test environment. No real money will be charged."})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(bu,{className:"w-5 h-5 text-blue-600"}),s.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Payment Method"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="cod"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"}`,children:[s.jsx("input",{type:"radio",name:"payment",value:"cod",checked:f==="cod",onChange:()=>p("cod"),className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-slate-700 font-medium",children:"Cash on Delivery"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Pay when you receive your order"})]})]}),s.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="paymongo"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"}`,children:[s.jsx("input",{type:"radio",name:"payment",value:"paymongo",checked:f==="paymongo",onChange:()=>p("paymongo"),className:"w-4 h-4 text-blue-600"}),s.jsx(Yk,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-slate-700 font-medium",children:"PayMongo e-Wallet"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"GCash, GrabPay, Maya (via PayMongo)"})]})]}),s.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="card"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300"}`,children:[s.jsx("input",{type:"radio",name:"payment",value:"card",checked:f==="card",onChange:()=>p("card"),className:"w-4 h-4 text-blue-600"}),s.jsx(bu,{className:"w-5 h-5 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-slate-700 font-medium",children:"Credit / Debit Card"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Visa, Mastercard, JCB (via PayMongo)"})]})]})]}),f==="paymongo"&&s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"E-Wallet Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Provider"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["gcash","grabpay","maya"].map(V=>s.jsxs("button",{type:"button",onClick:()=>I(V),className:`py-2 px-3 rounded-lg font-medium text-sm transition-all capitalize ${_===V?"bg-blue-600 text-white border-2 border-blue-600":"bg-white border-2 border-slate-300 text-slate-700 hover:border-blue-300"}`,children:[V==="gcash"&&" GCash",V==="grabpay"&&" GrabPay",V==="maya"&&" Maya"]},V))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Philippine Mobile Number"}),s.jsx("input",{type:"text",value:L,onChange:O,placeholder:"09XX XXX XXXX",maxLength:13,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${M.phone?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`}),M.phone&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:M.phone}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" A payment prompt will be sent to this number"})]}),s.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[s.jsx(Pt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsxs("span",{children:["When you confirm, you'll be redirected to ",_==="gcash"?"GCash":_==="grabpay"?"GrabPay":"Maya"," to complete the payment."]})]})]})]}),f==="card"&&s.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center justify-between",children:[s.jsx("span",{children:"Card Details"}),s.jsxs("button",{type:"button",onClick:()=>N(!q),className:"text-xs text-blue-600 hover:text-blue-700 font-normal",children:[q?"Hide":"Show"," Test Cards"]})]}),q&&gn.isTestMode&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-xs font-semibold text-blue-900 mb-2",children:"Test Cards (Click to use):"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{type:"button",onClick:()=>B("success"),className:"block w-full text-left text-xs px-2 py-1 hover:bg-blue-100 rounded",children:[s.jsx("span",{className:"font-mono text-blue-700",children:"4343 4343 4343 4345"}),s.jsx("span",{className:"text-slate-600 ml-2",children:"- Payment successful"})]}),s.jsxs("button",{type:"button",onClick:()=>B("declined"),className:"block w-full text-left text-xs px-2 py-1 hover:bg-blue-100 rounded",children:[s.jsx("span",{className:"font-mono text-blue-700",children:"4571 7360 0000 0008"}),s.jsx("span",{className:"text-slate-600 ml-2",children:"- Payment declined"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Card Number"}),s.jsx("input",{type:"text",value:y,onChange:U,placeholder:"1234 5678 9012 3456",maxLength:19,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${k.cardNumber?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`}),k.cardNumber&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:k.cardNumber}),y&&!k.cardNumber&&s.jsxs("p",{className:"text-xs text-slate-500 mt-1 capitalize",children:[z3(y)," card detected"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Expiry Date"}),s.jsx("input",{type:"text",value:b,onChange:C,placeholder:"MM/YY",maxLength:5,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${k.expiry?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`}),k.expiry&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:k.expiry})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"CVC"}),s.jsx("input",{type:"text",value:x,onChange:F,placeholder:"123",maxLength:4,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 ${k.cvc?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`}),k.cvc&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:k.cvc})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Card Holder Name"}),s.jsx("input",{type:"text",value:E,onChange:V=>{w(V.target.value),k.cardName&&D({...k,cardName:""})},placeholder:"JOHN DOE",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 uppercase ${k.cardName?"border-red-300 focus:ring-red-500":"border-slate-300 focus:ring-blue-500"}`}),k.cardName&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:k.cardName})]}),s.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[s.jsx(Pt,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:"Your payment is secured by PayMongo. Card details are encrypted and never stored on our servers."})]})]})]}),s.jsx("button",{onClick:G,disabled:l,className:"w-full mt-6 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center gap-2",children:l?s.jsxs(s.Fragment,{children:[s.jsx(gs,{className:"w-5 h-5 animate-spin"}),f==="cod"?"Placing order...":"Processing payment..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Gt,{className:"w-5 h-5"}),f==="cod"?"Confirm Order":"Pay & Confirm Order"]})})]})]}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6 h-fit",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Order Summary"}),s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"Items"}),s.jsx("span",{className:"text-slate-900",children:o.length})]}),s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"Subtotal"}),s.jsxs("span",{className:"text-slate-900",children:["",H.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between text-sm mb-4",children:[s.jsx("span",{className:"text-slate-600",children:"Delivery"}),s.jsx("span",{className:"text-green-600",children:"Free"})]}),s.jsxs("div",{className:"flex justify-between font-semibold text-slate-900 border-t border-slate-200 pt-4",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["",H.toLocaleString()]})]}),s.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"By placing your order, you agree to our terms and policies."})]})]})]})]})}const H3=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return e}},ad=e=>`${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;function V3({order:e,onDownload:t,showDownload:r=!0}){var l,i,o,c,d,m;const n=e.items||[],a=n.reduce((f,p)=>f+p.price*p.qty,0);return s.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6 lg:p-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm uppercase tracking-[0.2em] text-blue-500 font-semibold",children:"Receipt"}),s.jsx("h2",{className:"text-3xl font-bold text-slate-900 mt-2",children:"Thank you for your purchase!"}),s.jsx("p",{className:"text-slate-600 mt-3 max-w-md",children:"Your order has been confirmed and will be processed within 24 hours during business days."})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5",children:[s.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[s.jsx($r,{className:"w-4 h-4"}),"Billing Address"]}),s.jsxs("div",{className:"text-sm text-slate-700 space-y-1",children:[s.jsx("div",{className:"font-semibold text-slate-900",children:((l=e.address)==null?void 0:l.full_name)||"N/A"}),s.jsx("div",{children:((i=e.address)==null?void 0:i.address_line)||"No address provided"}),s.jsx("div",{children:[(o=e.address)==null?void 0:o.city,(c=e.address)==null?void 0:c.province,(d=e.address)==null?void 0:d.postal_code].filter(Boolean).join(", ")||""}),((m=e.address)==null?void 0:m.phone)&&s.jsx("div",{children:e.address.phone})]})]}),r&&s.jsxs("button",{onClick:()=>t==null?void 0:t(e),className:"inline-flex items-center gap-2 px-5 py-3 bg-blue-600 text-white rounded-full font-semibold hover:bg-blue-700 transition-colors",children:[s.jsx(Ol,{className:"w-4 h-4"}),"Download Receipt"]})]}),s.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 shadow-inner",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Order Summary"}),s.jsxs("span",{className:"text-xs font-semibold text-blue-700 bg-blue-100 px-3 py-1 rounded-full",children:["#",e.order_number||e.id.slice(-8)]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs text-slate-600 mb-5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_t,{className:"w-4 h-4 text-blue-500"}),H3(e.created_at)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bu,{className:"w-4 h-4 text-blue-500"}),(e.payment_method||"cod").toUpperCase()]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ds,{className:"w-4 h-4 text-blue-500"}),e.seller_name||"DaingGrader Store"]})]}),s.jsx("div",{className:"space-y-4",children:n.map((f,p)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-white border border-slate-200 overflow-hidden flex items-center justify-center",children:f.image_url?s.jsx("img",{src:f.image_url,alt:f.name,className:"w-full h-full object-cover"}):s.jsx(ye,{className:"w-5 h-5 text-slate-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 line-clamp-1",children:f.name}),s.jsxs("div",{className:"text-xs text-slate-500",children:["Qty: ",f.qty]})]}),s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:ad(f.price)})]},`${f.product_id}-${p}`))}),s.jsxs("div",{className:"border-t border-slate-200 mt-5 pt-4 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between text-slate-600",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{children:ad(a)})]}),s.jsxs("div",{className:"flex items-center justify-between text-slate-600",children:[s.jsx("span",{children:"Shipping"}),s.jsx("span",{className:"text-green-600",children:"Free"})]}),s.jsxs("div",{className:"flex items-center justify-between text-base font-semibold text-slate-900",children:[s.jsx("span",{children:"Order Total"}),s.jsx("span",{children:ad(e.total)})]})]})]})]})})}const W3="checkout_email_status";function Uf(){const{orderId:e}=Nl(),[t]=Fw(),{showToast:r}=ht(),[n,a]=u.useState(!0),[l,i]=u.useState([]),[o,c]=u.useState(null),[d,m]=u.useState([]),f=u.useMemo(()=>{const v=(t.get("ids")||"").split(",").map(y=>y.trim()).filter(Boolean);return v.length>0?v:e?[e]:[]},[e,t]);u.useEffect(()=>{if(f.length===0){a(!1);return}(async()=>{var y,j;a(!0);try{const b=await Promise.all(f.map(h=>B5(h)));i(b.map(h=>h.order).filter(Boolean))}catch(b){r(((j=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:j.detail)||"Failed to load order receipt")}finally{a(!1)}})()},[f,r]),u.useEffect(()=>{const v=sessionStorage.getItem(W3);if(v)try{const y=JSON.parse(v);Array.isArray(y)&&m(y)}catch{}},[]);const p=u.useMemo(()=>{if(!d.length)return null;const v=d.filter(b=>!f.length||f.includes(b.order_id||""));if(!v.length)return null;const y=v.some(b=>!b.buyer_sent),j=v.some(b=>!b.seller_sent);return y||j?{type:"error",message:"Receipt email failed to send for one or more recipients. Please try again later."}:{type:"success",message:"Receipt email sent to buyer and seller."}},[d,f]),g=async v=>{var y,j;c(v.id);try{const{blob:b,filename:h}=await Ab(v.id),x=URL.createObjectURL(b),S=document.createElement("a");S.href=x,S.download=h,document.body.appendChild(S),S.click(),S.remove(),URL.revokeObjectURL(x)}catch(b){r(((j=(y=b==null?void 0:b.response)==null?void 0:y.data)==null?void 0:j.detail)||"Failed to download receipt")}finally{c(null)}};return n?s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx(gs,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-spin"}),s.jsx("p",{className:"text-slate-600",children:"Loading order..."})]})}):s.jsxs("div",{className:"min-h-screen w-full bg-slate-50 pb-6",children:[s.jsx(we,{title:"Order Confirmed",subtitle:"Your order has been placed successfully",backgroundImage:"/assets/daing/danggit/slide1.jfif"}),s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6",children:[p&&s.jsx("div",{className:`mb-6 rounded-lg border px-4 py-3 text-sm font-medium ${p.type==="success"?"border-green-200 bg-green-50 text-green-800":"border-amber-200 bg-amber-50 text-amber-800"}`,children:p.message}),s.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-8 text-center mb-8",children:[s.jsx(Gt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank you for your order!"}),s.jsx("p",{className:"text-slate-600 mb-4",children:l.length>1?`Your items were split into ${l.length} orders by seller.`:"Your order has been confirmed."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s.jsx(ae,{to:"/orders",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View Orders"}),s.jsx(ae,{to:"/catalog",className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Continue Shopping"})]})]}),l.length===0?s.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-6 text-center text-slate-600",children:"No order details found."}):s.jsx("div",{className:"space-y-6",children:l.map(v=>s.jsxs("div",{className:"relative",children:[o===v.id&&s.jsx("div",{className:"absolute inset-0 bg-white/70 rounded-2xl flex items-center justify-center text-sm text-slate-600 z-10",children:"Preparing receipt..."}),s.jsx(V3,{order:v,onDownload:g})]},v.id))})]})]})}function Ve({allowed:e,children:t}){const{isLoggedIn:r,isLoading:n,user:a}=rt(),{showToast:l}=ht(),[i,o]=Rs.useState(!1),c=(a==null?void 0:a.role)??"user";return u.useEffect(()=>{if(!n&&r&&!e.includes(c)){const d=e.length===1?e[0]:e.join(" or ");l(` Access Denied. ${d.charAt(0).toUpperCase()+d.slice(1)} Only`),o(!0)}},[n,r,c,e,l]),r?n?s.jsx("div",{className:"card max-w-xl text-center py-12",children:s.jsx("div",{className:"text-slate-500",children:"Loading access"})}):e.includes(c)?t:s.jsxs("div",{className:"card max-w-xl text-center py-12 border border-black/10 shadow-card",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("div",{className:"text-slate-700 font-semibold mb-2 text-xl",children:"Access Denied"}),s.jsxs("div",{className:"text-slate-500",children:["This page is restricted to ",s.jsx("span",{className:"font-medium capitalize",children:e.join(" or ")})," users only."]})]}):s.jsx(Ei,{to:"/login",replace:!0})}function q3(){return s.jsxs(kw,{children:[s.jsx(pe,{path:"/",element:s.jsx(ve,{children:s.jsx(mC,{})})}),s.jsx(pe,{path:"/admin",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(e3,{})})})}),s.jsx(pe,{path:"/admin/users",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(s3,{})})})}),s.jsx(pe,{path:"/admin/orders",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(o3,{})})})}),s.jsx(pe,{path:"/admin/posts",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(r3,{})})})}),s.jsx(pe,{path:"/admin/scans",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(n3,{})})})}),s.jsx(pe,{path:"/admin/audit-logs",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(i3,{})})})}),s.jsx(pe,{path:"/admin/discounts",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(c3,{})})})}),s.jsx(pe,{path:"/admin/payouts",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(h3,{})})})}),s.jsx(pe,{path:"/grade",element:s.jsx(ve,{children:s.jsx(AC,{})})}),s.jsx(pe,{path:"/history",element:s.jsx(ve,{children:s.jsx(RC,{})})}),s.jsx(pe,{path:"/analytics",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["admin"],children:s.jsx(OC,{})})})}),s.jsx(pe,{path:"/forum",element:s.jsx(ve,{children:s.jsx(XC,{})})}),s.jsx(pe,{path:"/catalog",element:s.jsx(ve,{children:s.jsx(C3,{})})}),s.jsx(pe,{path:"/catalog/:id",element:s.jsx(ve,{children:s.jsx(_3,{})})}),s.jsx(pe,{path:"/sellers",element:s.jsx(ve,{children:s.jsx(P3,{})})}),s.jsx(pe,{path:"/store/:sellerId",element:s.jsx(ve,{children:s.jsx(I3,{})})}),s.jsx(pe,{path:"/wishlist",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(E3,{})})})}),s.jsx(pe,{path:"/cart",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(T3,{})})})}),s.jsx(pe,{path:"/checkout/address",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(D3,{})})})}),s.jsx(pe,{path:"/checkout/payment",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(B3,{})})})}),s.jsx(pe,{path:"/order-confirmed",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(Uf,{})})})}),s.jsx(pe,{path:"/order-confirmed/:orderId",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(Uf,{})})})}),s.jsx(pe,{path:"/shop",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(ZC,{})})})}),s.jsx(pe,{path:"/seller",element:s.jsx(Ei,{to:"/seller/dashboard",replace:!0})}),s.jsx(pe,{path:"/seller/dashboard",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["seller"],children:s.jsx(p3,{})})})}),s.jsx(pe,{path:"/seller/products",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["seller"],children:s.jsx(b3,{})})})}),s.jsx(pe,{path:"/seller/orders",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["seller"],children:s.jsx(v3,{})})})}),s.jsx(pe,{path:"/seller/reviews",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["seller"],children:s.jsx(y3,{})})})}),s.jsx(pe,{path:"/seller/discounts",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["seller"],children:s.jsx(j3,{})})})}),s.jsx(pe,{path:"/seller/earnings",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["seller"],children:s.jsx(k3,{})})})}),s.jsx(pe,{path:"/dataset",element:s.jsx(ve,{children:s.jsx(pC,{})})}),s.jsx(pe,{path:"/dataset/:id",element:s.jsx(ve,{children:s.jsx(gC,{})})}),s.jsx(pe,{path:"/login",element:s.jsx(ve,{children:s.jsx(yC,{})})}),s.jsx(pe,{path:"/profile",element:s.jsx(ve,{children:s.jsx(SC,{})})}),s.jsx(pe,{path:"/orders",element:s.jsx(ve,{children:s.jsx(Ve,{allowed:["user"],children:s.jsx(A3,{})})})}),s.jsx(pe,{path:"/about",element:s.jsx(ve,{children:s.jsx(CC,{})})}),s.jsx(pe,{path:"/about-daing",element:s.jsx(Ei,{to:"/about-daing/espada",replace:!0})}),s.jsx(pe,{path:"/about-daing/:slug",element:s.jsx(ve,{children:s.jsx(PC,{})})}),s.jsx(pe,{path:"/contact",element:s.jsx(ve,{children:s.jsx(QC,{})})}),s.jsx(pe,{path:"/publications",element:s.jsx(Ei,{to:"/publications/local",replace:!0})}),s.jsx(pe,{path:"/publications/local",element:s.jsx(ve,{children:s.jsx(gf,{type:"local"})})}),s.jsx(pe,{path:"/publications/foreign",element:s.jsx(ve,{children:s.jsx(gf,{type:"foreign"})})})]})}Z0(document.getElementById("root")).render(s.jsx(Rs.StrictMode,{children:s.jsx(Lw,{children:s.jsx(Sk,{children:s.jsx(kk,{children:s.jsx(q3,{})})})})}));
